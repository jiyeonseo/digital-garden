{"/":{"title":"ğŸª´","content":"\nì¹˜ì¦ˆ ë‚˜ë¬´ ì§€ì‹ ê±¸ë ¸ë„¤ ğŸ§€ğŸŒ²\n\n## All notes ğŸ“\n\n- [All notes](/notes/)\n- [All tags](/tags/)\n","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/2023.01-books":{"title":"2023ë…„  1ì›” ë…ì„œ","content":"\n## ì˜¤ëŠ˜ ë˜ ì¼ì„ ë¯¸ë£¨ê³  ë§ì•˜ë‹¤\n- [ì˜¤ëŠ˜ ë˜ ì¼ì„ ë¯¸ë£¨ê³  ë§ì•˜ë‹¤ : ì¼ì— ì«“ê²¨ ì¸ìƒë§ˆì € ê¼¬ì˜€ì„ ë•Œ, ì˜¤ëŠ˜ë¶€í„° ë¡œì¼“ ìŠ¤íƒ€íŠ¸ ì‹œê°„ ê´€ë¦¬ë²•](http://www.yes24.com/Product/Goods/45094325)\n- ë§ˆì´í¬ë¡œì†Œí”„íŠ¸ì—ì„œ ìœˆë„ìš° 95, ë”ë¸”í´ë¦­ ë“± ê°œë°œì— ì°¸ì—¬í–ˆë˜ ê°œë°œì ë‚˜ì¹´ì§€ë§ˆ ì‚¬í† ì‹œì˜ ì‹œê°„ê´€ë¦¬ ë²•ì— ëŒ€í•œ ì±….\n- íš¨ìœ¨ì ì¸ ì‹œê°„ê´€ë¦¬ë¡œ ì¢‹ì•„í•˜ëŠ” ì¼ì„ ë” ììœ ë¡­ê²Œ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì´ì•¼ê¸° í•˜ê³  ìˆë‹¤. \n- **ë¡œì¼“ ìŠ¤íƒ€íŠ¸ ì‹œê°„ ê´€ë¦¬ë²•** : ì‹«ì–´í•˜ëŠ” ì¼ì„ ë¹¨ë¦¬ ëë‚´ê³ , ì¢‹ì•„í•˜ëŠ” ì¼ì„ ì˜¤ë˜ í•˜ê¸° ìœ„í•œ í•´ê²°ì±… \n\t- \"ë‘ë ¤ì›Œí•´ì•¼ í•  ëŒ€ìƒì€ ì‹¤íŒ¨ê°€ ì•„ë‹ˆë‹¤. ìì‹ ì´ 'í•˜ê³  ì‹¶ì€ ì¼'ì— ë¶ˆì„±ì‹¤í•˜ê²Œ ì„í•˜ëŠ” íƒœë„ë‹¤.'\" \n\t- \"í”„ë¡œê·¸ë˜ë¨¸ì—ê²Œ ìš”êµ¬ë˜ëŠ” ê²ƒì€ 100ì ì´ ì•„ë‹Œ 80~ 90ì ì§œë¦¬ í”„ë¡œê·¸ë¨ì„ ê¸°í•œ ë‚´ì— ì™„ì„±í•˜ëŠ” ì¼ì´ë‹¤.\"\n\t- \"í•˜ë£¨ ì—…ë¬´ëŸ‰ì˜ 80%ë¥¼ ì˜¤ì „ ì¤‘ì— ëë‚´ì•¼ í•œë‹¤.\"\n- í•˜ê¸° ì‹«ì€ ì¼ì„ ë¹¨ë¦¬ ëë‚´ë²„ë¦¬ë©´ ì¢‹ì•„í•˜ëŠ” ì¼ì„ ì¶©ë¶„íˆ ì¦ê¸¸ ìˆ˜ ìˆë‹¤. 80%ì¼ì„ ë¹¨ë¦¬ ëë‚´ë©´ ë‚˜ë¨¸ì§€ ì‹œê°„ì— 20%ì˜ ì—£ì§€ë¥¼ ì±„ì›Œì„œ ì™„ì„±ë„ë¥¼ ë†’í ìˆ˜ ìˆë‹¤.\n- ê°œë°œìì˜ ì´ì•¼ê¸°, ê·¸ê²ƒë„ ìœˆë„ìš° ê°œë°œì— ê´€ë ¨í•œ ì´ì•¼ê¸°ì´ê¸° ë•Œë¬¸ì— ê°œë°œì ì»¤ë¦¬ì–´ ì¸¡ë©´ì—ì„œë„ ì¦ê²ê²Œ ì½ì„ ìˆ˜ ìˆì—ˆë‹¤.","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/ABI":{"title":"ABI","content":"\n- Contract **A**pplication **B**inary **I**nterface\n- Smart Contract í•¨ìˆ˜ì™€ íŒŒë¼ë¯¸í„°ì— ëŒ€í•œ Interface ì •ì˜ \n- ê°€ì§€ê³  ìˆëŠ” ì •ë³´\n\t- í•¨ìˆ˜ì— ëŒ€í•œ **ì •ë³´** \n\t- í•¨ìˆ˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” **ì¸ìˆ˜**\n![](https://static.packt-cdn.com/products/9781789954111/graphics/assets/fe0f2ffc-2f3c-4615-9cb5-43c8e036239b.png)\n- ì˜ˆì‹œ : https://etherscan.io/address/0xb59f67a8bff5d8cd03f6ac17265c550ed8f33907#code\n```json\n{\n   \"anonymous\":false,\n   \"inputs\":[\n      {\n         \"indexed\":true,\n         \"name\":\"from\",\n         \"type\":\"address\"\n      },\n      {\n         \"indexed\":true,\n         \"name\":\"to\",\n         \"type\":\"address\"\n      },\n      {\n         \"indexed\":false,\n         \"name\":\"value\",\n         \"type\":\"uint256\"\n      }\n   ],\n   \"name\":\"Transfer\",\n   \"type\":\"event\"\n},\n{\n   \"anonymous\":false,\n   \"inputs\":[\n      {\n         \"indexed\":true,\n         \"name\":\"old\",\n         \"type\":\"address\"\n      },\n      {\n         \"indexed\":true,\n         \"name\":\"current\",\n         \"type\":\"address\"\n      }\n   ],\n   \"name\":\"NewOwner\",\n   \"type\":\"event\"\n}\n```\n- `anonymous` : ì´ methodê°€ publicì¸ì§€ ì•„ë‹Œì§€ (default: `false`. public ì´ë‹¤.)\n- `type` : ì–´ë–¤ ë°ì´í„° íƒ€ì…ì¸ì§€\n\t- `event`\n\t- `inputs` ì•ˆì—ëŠ” input type\n- `name` : item í˜¹ì€ íŒŒë¼ë¯¸í„°ì˜ ì´ë¦„ \n- `indexed` \n\t- `true` : `topics` ì— ì €ì¥ëœë‹¤. \n\t- `false` : `data` í•„ë“œì— ë“¤ì–´ê°„ë‹¤. \n\n\n## References\n- [Understanding Logs: Deep Dive into eth_getLogs](https://docs.alchemy.com/docs/deep-dive-into-eth_getlogs)\n- [Understanding event logs on the Ethereum blockchain](https://medium.com/mycrypto/understanding-event-logs-on-the-ethereum-blockchain-f4ae7ba50378)","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/AWS-CLI":{"title":"AWS CLI","content":"\n\n## AWS Configuration ì„¤ì • í™•ì¸í•˜ê¸° \n`aws configure`ë¡œ êµ¬ì„±í•œ credential í™•ì¸í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ í•  ìˆ˜ ìˆë‹¤.\n\n```sh\nvi ~/.aws/credentials\n\n[default]\naws_access_key_id={ACCESS_KEY}\naws_secret_access_key={SECRET_ACCESS_KEY}\n\nvi ~/.aws/config\n\n[default]\nregion=us-west-2\noutput=json\n```\n\n- https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/cli-configure-files.html\n\n\n## AWS S3 íŒŒì¼ ì˜®ê¸°ê¸°\n\n```sh\naws s3 mv s3://{from_path} s3://{to_path} --recursive\n```\n\n- web console ì—ì„œë„ ê°€ëŠ¥í•˜ë‹¤\n![](https://user-images.githubusercontent.com/2231510/206854577-026b629c-6c0d-4e25-a8bd-a47fda6dab95.png)\n","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/AWS-Cost-Optimization":{"title":"AWS ë¹„ìš© ìµœì í™”","content":"\n## 1) ë¦¬ì†ŒìŠ¤ì— Tag ë‹¬ê¸°\n- ë¦¬ì†ŒìŠ¤ ë§Œë“¤ê³  ë§¨ ë§ˆì§€ë§‰ì— ë‚˜ì˜¤ëŠ” optional ë©”íƒ€ë°ì´í„° (key-value)\n- \n## 2) ë°ì´í„° ì „ì†¡ ë¹„ìš©\n\n## 3) Compute ë¹„ìš© ìµœì í™” ì •ë¦¬\n\n## 4) AWS Trusted Advisor\n\n## 5) ìš°ë¦¬ íšŒì‚¬ì— ë§ëŠ” ë¹„ìš© ëŒ€ì‹œë³´ë“œ \n\n\n## References\n- [AWS ì“°ë‹¤ ë³´ë©´ ê¼­ ê³ ë¯¼í•˜ëŠ” ê²ƒ, ë¹„ìš© ìµœì í™”!](https://www.youtube.com/watch?v=hY7ssLoJcWQ)","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/AWS-S3-presigned-URL":{"title":"AWS S3 presigned URL ì‚¬ìš© ë°©ë²•","content":"- S3ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ privateì´ì§€ë§Œ, presigned_urlì„ í†µí•´ ê¶Œí•œì´ ì—†ëŠ” ì‚¬ëŒì—ê²Œë„ objectë¥¼ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì„ì‹œë¡œ í—ˆìš©í•  ìˆ˜ ìˆë‹¤. \n-  ë§Œë£Œì‹œê°„ì„ ì£¼ì–´ accessë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤. \n- presigned_url ë§Œë“¤ ì‹œì—ëŠ” ë§Œë“  **ì‚¬ìš©ìì˜ ê¶Œí•œ**ì— ë”°ë¼ ì œí•œëœë‹¤.\n\t- IAM instance profile : ìµœëŒ€ 6ì‹œê°„ ì‚¬ìš© ê°€ëŠ¥í•œ presigned_url ìƒì„± ê°€ëŠ¥ \n\t- AWS Security Token Service : ìµœëŒ€ 36ì‹œê°„ \n\t- IAM user : ìµœëŒ€ 7ì¼ (AWS Signature Version 4 ì‚¬ìš©ì‹œ)\n- ë§Œë£Œ ì‹œê°„ ì „ê¹Œì§€ëŠ” ê³„ì† ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. \n## `generate_presigned_url` \n- `boto3` ë¥¼ ì´ìš©í•˜ì—¬ ì‰½ê²Œ presigned URLì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤. \n\n```python\nimport logging\nimport boto3\nfrom botocore.exceptions import ClientError\n\ndef create_presigned_url(bucket_name, object_name, expiration=3600):\n    \"\"\"Generate a presigned URL to share an S3 object\n\n    :param bucket_name: string\n    :param object_name: string\n    :param expiration: Time in seconds for the presigned URL to remain valid\n    :return: Presigned URL as string. If error, returns None.\n    \"\"\"\n\n    # Generate a presigned URL for the S3 object\n    s3_client = boto3.client('s3')\n    try:\n        response = s3_client.generate_presigned_url('get_object',\n                                                    Params={'Bucket': bucket_name,\n                                                            'Key': object_name},\n                                                    ExpiresIn=expiration)\n    except ClientError as e:\n        logging.error(e)\n        return None\n\n    # The response contains the presigned URL\n    return response\n```\n\npresigned URLì„ í†µí•´ì„œëŠ” GET, PUT ëª¨ë‘ ê°€ëŠ¥í•œë° ì´ë•Œ client methodë¥¼ ì§€ì •í•˜ì—¬ ë‚´ë ¤ì¤„ ìˆ˜ ìˆë‹¤. \n- GET : `get_object`\n- PUT : `put_object`\n``\n`get_object` ìš©ìœ¼ë¡œ ë°˜í™˜ëœ URLì€ ë‹¤ìŒê³¼ ê°™ì€ ëª¨ì–‘ìœ¼ë¡œ ìƒê²¼ë‹¤. \n```\nhttps://{bucket_name}.s3.amazonaws.com/{key}?AWSAccessKeyId={aws_access_key}\u0026Signature={signature}\u0026Expires={expire_unixtimestamp}\n```\n\n\n### ë™ì‘ ë°©ì‹ \n![](https://user-images.githubusercontent.com/2231510/208320571-2ef6f2c5-c6db-413a-b171-879d8bed1b78.png)\n(ì¶œì²˜ : https://insecurity.blog/2021/03/06/securing-amazon-s3-presigned-urls/)\n\nì•ˆì „í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” \n- í•´ë‹¹ S3 ë²„í‚·ì˜ sever access log í™œì„±í™”\n- íŒŒì¼ ì´ë¦„ì€ ì˜ˆì¸¡í•˜ê¸° ì–´ë µë„ë¡ UUIDë¥¼ ì‚¬ìš©í•œë‹¤.\n\n## S3 Client Sample Code with boto3 in Python\n```python\nimport boto3\n\nS3_ACCESS_KEY = 's3_access_key'\nS3_SECRET_KEY = 's3_secret_key'\n\nclass S3Client():\n\n    def __init__(self, aws_access_key=S3_ACCESS_KEY, aws_secret_key=S3_SECRET_KEY):\n        self.aws_access_key = aws_access_key\n        self.aws_secret_key = aws_secret_key\n        self.client = boto3.client(\n            's3',\n            aws_access_key_id=self.aws_access_key,\n            aws_secret_access_key=self.aws_secret_key)\n\n    def list_folder_contents(self, bucket_name, folder_name=None, exclude_self=True):\n        if folder_name:\n            folder_name = os.path.join(folder_name, '') # ensure it ends in a slash\n        else:\n            folder_name = '' # non-prefixed -- all folders\n\n        objects = []\n        incomplete = True\n        continuation_token = None\n\n        while incomplete:\n            if continuation_token:\n                response = self.client.list_objects_v2(\n                    Bucket=bucket_name,\n                    Prefix=folder_name,\n                    ContinuationToken=continuation_token,\n                )\n            else:\n                response = self.client.list_objects_v2(\n                    Bucket=bucket_name,\n                    Prefix=folder_name,\n                )\n\n            objects += response.get('Contents', [])\n            if response.get('isTruncated', False):\n                continuation_token = response['NextContinuationToken']\n            else:\n                incomplete = False\n\n        if exclude_self:\n            contents = [obj['Key'] for obj in objects if obj['Key'] != folder_name]\n        else:\n            contents = [obj['Key'] for obj in objects]\n\n        return contents\n\n    def move_object(self, source_bucket_name=None, source_name=None, target_name=None, target_bucket_name=None):\n        \"\"\"\n        Moving an object on S3 requires two steps:\n        1) copy to destination\n        2) delete from source\n        :param source_bucket_name: (str) name of bucket to copy from\n        :param source_name: (str) object key to copy from\n        :param target_name: (str) object key to copy to\n        :param target_bucket_name: (str) name of bucket to copy to. If None, use the source_bucket_name\n        :return None:\n        \"\"\"\n\n        if target_bucket_name is None:\n            target_bucket_name = source_bucket_name\n\n        response = self.client.copy_object(\n            Bucket=target_bucket_name,\n            Key=target_name,\n            CopySource={\n                'Bucket': source_bucket_name,\n                'Key': source_name\n            }\n        )\n\n        if response.get('CopyObjectResult', False):\n            # Assume it worked\n            response = self.client.delete_object(\n                Bucket=source_bucket_name,\n                Key=source_name\n            )\n\n\n    def upload_file(self, source_name, target_name, bucket_name):\n        \"\"\"\n        Uploads the source to the target in the bucket\n        :params source_name: (str) name of file to upload\n        :params target_name: (str) name of object on S3 (include any folder or path)\n        :params bucket_name: (str) bucket to receive file\n        :returns: None\n        \"\"\"\n        self.client.upload_file(\n            source_name,\n            bucket_name,\n            target_name\n        )\n\n    def download_file(self, source_name, target_name, bucket_name):\n        \"\"\"\n        Downloads the source object from the bucket into the target file. Note that the target_name paths should already exist.\n        :params source_name: (str) object key to download\n        :params target_name: (str) destination for download -- all paths to the base file must already exist\n        :params bucket_name: (str) name of bucket to download from\n        :returns: None\n        \"\"\"\n        self.client.download_file(\n            bucket_name,\n            source_name,\n            target_name\n        )\n\tdef generate_presigned_url(self, bucket_name, key, expiration=3600):\n        return self.client.generate_presigned_url(\n            ClientMethod=\"get_object\",\n            Params={\n                \"Bucket\": bucket_name,\n                \"Key\": key,\n            },\n            ExpiresIn=expiration, # seconds\n        )\n```\n\n\n## Preferences\n- [ë¯¸ë¦¬ ì„œëª…ëœ URLì„ ìƒì„±í•˜ì—¬ ê°ì²´ ì—…ë¡œë“œ](https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/PresignedUrlUploadObject.html)\n- [ë¯¸ë¦¬ ì„œëª…ëœ URL ê¸°ëŠ¥ ì œí•œ](https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/using-presigned-url.html#PresignedUrlUploadObject-LimitCapabilities)\n- [Example: An S3 proxy client written in Python](https://gist.github.com/tamouse/b5c725082743f663fb531fa4add4b189)\n- [Using presigned URLs](https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-presigned-url.html)\n- [Securing your Amazon AWS S3 presigned URLs, tips and tricks](https://insecurity.blog/2021/03/06/securing-amazon-s3-presigned-urls/)\n- [S3 pre-signed URL í•œë²ˆë§Œ ì‚¬ìš©í•˜ê¸°](https://mygumi.tistory.com/380)","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/Amazon-Athena":{"title":"Amazon Athena","content":"\n","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/Block-Proposer":{"title":"Block Proposer","content":"\n\n## References\n- [What is Proposer / Builder Separation (PBS)?](https://www.alchemy.com/overviews/proposer-builder-separation#what-is-a-block-proposer-2)\n","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/Blockchain":{"title":"Blockchain","content":"\n## Blockchain\n-   public database\n-   í•œ ë„¤íŠ¸ì›Œí¬ ë‚´ ì—¬ëŸ¬ ì»´í“¨í„°ë“¤ì„ í†µí•´ ì €ì¥í•˜ê³ , ê³µìœ í•˜ëŠ” ë¶„ì‚°í˜• ë°ì´í„°ë² ì´ìŠ¤\n\n## Block\n-   ì—°ì†ì„±ìˆëŠ” ê·¸ë£¹(Blocks)ì— ì €ì¥ë˜ëŠ” ë°ì´í„°(data+state)\n-   ì˜ˆë¥¼ ë“¤ì–´, ETHë¥¼ ì „ì†¡í–ˆë‹¤ë©´, ì´ íŠ¸ëœì­ì…˜ ë°ì´í„°ëŠ” blockì— ì €ì¥ë¨\n\n## Chain\n-   ê° ë¸”ë¡ì€ ë¶€ëª¨ ë¸”ë¡ë¥¼ ì°¸ì¡°í•˜ê³  ìˆë‹¤. ì¦‰, ë¸”ë¡ë“¤ì€ ì—°ê²°ë˜ì–´ ìˆìŒ.\n-   ë¸”ë¡ë“¤ì€ ì—°ê²°ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, ë¸”ë¡ì²´ì¸ì´ë¼ê³  ë¶€ë¦„\n\n## Web3\n- íƒˆì¤‘ì•™í™”, ë¸”ë¡ì²´ì¸ ê¸°ìˆ , í† í° ê¸°ë°˜ ê²½ì œí•™ê³¼ ê°™ì€ ê°œë…ì„ í†µí•©í•œ WWWì˜ ìƒˆë¡œìš´ ì•„ì´ë””ì–´\n- Web1 : read-only\n- Web2 : read-write\n- Web3 : read-write-own\n\n## Cryptocurrency\n- ì¤‘ì•™ ê¸°ê´€ì´ ì•„ë‹Œ ì•”í˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ê²€ì¦ ë° ìœ ì§€ë˜ëŠ” ë””ì§€í„¸ í†µí™”\n- crypto-currency í˜¹ì€ crypto ë¼ê³  ë¶ˆë¦°ë‹¤.\n\n## References\n- [alchemy Web3 Glossary](https://docs.alchemy.com/docs/web3-glossary)\n- ","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/Clickhouse":{"title":"Clickhouse","content":"- [https://clickhouse.com/](https://clickhouse.com/)","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/Common-Injection":{"title":"Common Injection","content":"\n\n## References\n- https://owasp.org/www-community/attacks/Command_Injection","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/DB-Connection-Pool":{"title":"DB Connection Poolì´ í•„ìš”í•œ ì´ìœ ","content":"\n## DB Connection\nì–´í”Œë¦¬ì¼€ì´ì…˜ì´ DB serverì™€ì˜ í†µì‹ ì„ ìœ„í•œ ì—°ê²°ë¡œ SQL ë¬¸ì„ ë³´ë‚´ê³  ê·¸ ê²°ê³¼ê°’ì„ ë°›ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ë„ ì•±ì„œë²„ì™€ ê°™ì´ íŠ¹ì • í¬íŠ¸ (ì˜ˆë¥¼ ë“¤ì–´, MySQL ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ëŠ” ê¸°ë³¸ `3306`)ë¡œ ë–  ìˆìœ¼ë©°, ì´ ì„œë²„ì™€ ë°±ì—”ë“œ ì„œë²„ê°€ **TCP-IP protocol**ë¡œ Connectionì„ ë§ºëŠ”ë‹¤. ì´ë•Œ, í•„ìš”ì— ë”°ë¼ user name, passwordì™€ ê°™ì€ credentials ê°€ í•„ìš”í•  ìˆ˜ë„ ìˆë‹¤.\n\nDB Connectionì„ ë§ºê¸° ìœ„í•´ì„œëŠ” DB Host, Port, database name, driver, user name, password ë“±ì´ í•„ìš”í•˜ë‹¤. \n\n```yaml\ndb_url      = jdbc:mysql://HOST/DATABASE  \ndb_driver   = com.mysql.jdbc.Driver  \ndb_username = USERNAME  \ndb_password = PASSWORD\n```\n\n## DB Connection ìƒì• ì£¼ê¸°\n![](https://vladmihalcea.com/wp-content/uploads/2014/04/connectionlifecycle.gif)\n(ref : https://vladmihalcea.com/wp-content/uploads/2014/04/connectionlifecycle.gif)\n1. DBë¡œ Connectionì„ ì²˜ìŒ ì—°ê²° ì‹œë„ í•œë‹¤.\n2. Connectionì„ ì‹¤ì œë¡œ ì—´ê¸° ì „, user credential ì´ ìœ íš¨í•œì§€ ì¸ì¦ ê²€ì‚¬ë¥¼ í•œë‹¤. \n3. ê²€ì‚¬ë¥¼ í†µê³¼í•˜ë©´ TCP socketì„ ì—°ë‹¤.\n4. SQL ë¬¸ì´ ë“¤ì–´ì˜¤ë©´ ì´ì— ëŒ€í•œ ê²°ê³¼ ë°ì´í„°ë¥¼ ë³´ë‚´ì¤€ë‹¤. \n5. DB Connectionì„ ë‹«ëŠ”ë‹¤.\n6. TCP socketì´ ë‹«íŒë‹¤. \n\nìœ„ì—ì„œ ë³´ë‹¤ì‹œí”¼ DB Connectionì„ ë§ºëŠ” ê²ƒì€ ë§¤ìš° ë¹„ì‹¸ê³  ì‹œê°„ì´ ë§ì´ ë“œëŠ” ì‘ì—…ì´ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— í•„ìš”í•  ë•Œë§ˆë‹¤ connectionì„ ë§ºëŠ” ê²ƒì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ ìì²´ ì†ë„ë¥¼ ëŠ¦ì¶°ì„œ ì„œë¹„ìŠ¤ í’ˆì§ˆì— ì•…ì˜í–¥ì„ ë¼ì¹  ìˆ˜ ìˆë‹¤. ë˜ ê°ê°ì˜ ìš”ì²­ë§ˆë‹¤ connectionì„ ë§ºê²Œë˜ë©´ ë™ì‹œì— ë„ˆë¬´ ë§ì€ connectionì´ ë§Œë“¤ì–´ì§€ê²Œ ë˜ë©° DB serverì˜ CPUì™€ memoryë¥¼ ë„ˆë¬´ ë§ì´ ì‚¬ìš©í•˜ì—¬ resource ë¶€ì¡± ë¬¸ì œë¥¼ ì•¼ê¸°í•  ìˆ˜ ìˆë‹¤. \n\nì´ ë¬¸ì œë¥¼ í’€ê¸° ìœ„í•˜ì—¬ Connection Poolì„ ì‚¬ìš©í•œë‹¤. ë¯¸ë¦¬ Connectionì„ ë§ºì–´ë‘ê³  ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì´ë¯¸ ë§Œë“¤ì–´ì§„ Connectionì„ ì¬ì‚¬ìš©(reuse)í•œë‹¤. \n\n![](https://user-images.githubusercontent.com/2231510/209923693-a45f6129-3053-4089-a626-ef77143b6032.png)\n(ref:https://raw.githubusercontent.com/practicalli/graphic-design/live/practicalli-clojure-webapps-database-postgres-no-connection-pool.png)\n\n\n## References\n- [Why do we need a Database Connection Pool? - every programmer must know](https://dineshchandgr.medium.com/why-do-we-need-a-database-connection-pool-every-programmer-must-know-9f90e7c8e5af)","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/DB-Index":{"title":"DB Index","content":"\n## Simple indexes\n## Secondary indexes\n## B-trees\n## Hash tables\n","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/ERC-1155":{"title":"ERC-1155","content":"","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/ERC-721":{"title":"ERC-721","content":"","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/ERC721A":{"title":"ERC721A","content":"- [ERC721A](https://www.erc721a.org/)\n- [[notes/ERC-721]] í‘œì¤€ì˜ í™•ì¥. \n- í† í°ì„ ë°°ì¹˜ë¡œ ë°œí–‰í•˜ì—¬ ë§‰ëŒ€í•œ ì–‘ì˜ gas feeë¥¼ ë°©ì§€. ì—¬ëŸ¬ í† í°ì„ í•œë²ˆì— ë°œí–‰  \n\n### ERC721A êµ¬í˜„í•˜ê¸° \n- [[notes/Hardhat]]ìœ¼ë¡œ í”„ë¡œì íŠ¸ ì„¸íŒ…í•˜ê¸° \n\n```sh\nnpx hardhat\n```\n\n\n\n## References\n- [# **ERC721A**Â Quick Start](https://coinsbench.com/erc721a-quick-start-24131e198e37)","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/Ethereum":{"title":"Ethereum","content":"\n## Ethereum\n- ì»´í“¨í„°ê°€ ë‚´ì¥ëœ ë¸”ë¡ì²´ì¸.\n- ë¹„íŠ¸ì½”ì¸ê³¼ ë‹¤ë¥¸ ì  : ì•”í˜¸í™”íë¡œì„œì˜ ê¸°ëŠ¥ ë¿ë§Œ ì•„ë‹ˆë¼ í”„ë¡œê·¸ë˜ë°ì´ ê°€ëŠ¥. ë„¤íŠ¸ì›Œí¬ì—ì„œ ë¶„ì‚°í˜• ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶• ë° ë°°í¬í•  ìˆ˜ ìˆìŒ.\n- ì¤‘ì•™ ì£¼ì²´ì˜ í†µì œ ì—†ì´ ì•±ê³¼ ì¡°ì§ì„ êµ¬ì¶•í•˜ê³ , ìì‚°ì„ ë³´ìœ í•˜ê³ , ê±°ë˜í•˜ê³  ì†Œí†µí•  ìˆ˜ ìˆìŒ\n\n## EVM\n- [[notes/Ethereum Virtual Machine]]\n- ê¸€ë¡œë²Œ ê°€ìƒ ì»´í“¨í„°, ëª¨ë“  ì°¸ì—¬ìë“¤ì´ ì½”ë“œ ì‹¤í–‰ì„ ìš”ì²­ í•  ìˆ˜ ìˆê³ , ì½”ë“œ ì‹¤í–‰ì€ EVM ìƒíƒœë¥¼ ë³€ê²½ì‹œí‚´\n- [https://ethereum.org/ko/developers/docs/evm](https://ethereum.org/ko/developers/docs/evm)\n\n## Ether\n- ETH : native cryptocurrency of Ethereum\n- í™”íë¡œì„œ ì‚¬ìš©ë˜ëŠ” ì•”í˜¸í™”í\n- ê±°ë˜ ìš”ì²­ í™•ì¸ ë° ì‹¤í–‰í•œ ì»´í“¨í„°ì— ëŒ€í•œ ë³´ìƒìœ¼ë¡œ ì§€ê¸‰ë¨\n\n## Ethereum Classic\n- ì˜¤ë¦¬ì§€ë„ ì´ë”ë¦¬ì›€ ë„¤íŠ¸ì›Œí¬ í•´í‚¹ì„ í•´ê²°í•˜ê¸° ìœ„í•´ í•˜ë“œí¬í¬ í•˜ê¸° ì „ì˜ ì˜¤í”ˆì†ŒìŠ¤ ë¸”ë¡ì²´ì¸\n- ETC : ì´ë”ë¦¬ì›€ í´ë˜ì‹ì˜ ê³ ìœ  í†µí™”\n\n## Smart contracts\n- ì´ë”ë¦¬ì›€ ë¸”ë¡ì²´ì¸ ìƒì—ì„œ ì‹¤í–‰ë˜ëŠ” í”„ë¡œê·¸ë¨\n- ì´ë”ë¦¬ì›€ ë¸”ë¡ì²´ì¸ ìƒì˜ íŠ¹ì • ì£¼ì†Œì— ìˆëŠ” ì½”ë“œ(function)ê³¼ ë°ì´í„°(state)ì˜ ëª¨ìŒ\n\n### Smart contract ë™ì‘ ë°©ì‹\n- ë„¤íŠ¸ì›Œí¬ ìƒì— ë¯¸ë¦¬ ê²°ì •ëœ ì¡°ê±´ì´ ì¶©ì¡±ë  ë•Œ ë™ì‘ ì‹¤í–‰\n\n## Minting Ether\n- ì´ë”ë¦¬ì›€ ì›ì¥(Ethereum ledger)ì— ìƒˆë¡œìš´ ì´ë”ë¦¬ì›€ì„ ë°œí–‰í•˜ëŠ” ê²ƒ\n- underlying Ethereum ë§Œì´ ìƒˆë¡œìš´ etherë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.\n\n## Burning Ether\n- ì´ë”ë¦¬ì›€ ì›ì¥(Ethereum ledger)ì—ì„œ ì´ë”ë¦¬ì›€ì„ ì‚­ì œí•˜ëŠ” ê²ƒ\n\n## Denominations of ether\n- ì´ë” ì¢…íŒŒ\n- ì´ë”ë¦¬ì›€ì—ì„œ ì ì€ ê¸ˆì•¡ìœ¼ë¡œ ê±°ë˜ê°€ ìì£¼ ì¼ì–´ë‚˜, ì´ë¥¼ ìš©ì´í•˜ê²Œ í•˜ê¸° ìœ„í•´ ë§Œë“  ë‹¨ìœ„\n- \"Wei\"ì™€ \"Gwei\"ê°€ ê°€ì¥ ìœ ëª…í•˜ë‹¤.\n- [https://ethereum.org/ko/developers/docs/intro-to-ether/#denominations](https://ethereum.org/ko/developers/docs/intro-to-ether/#denominations)\n\n### Wei\n- ì´ë”(ether)ì˜ ê°€ì¥ ì‘ì€ ë‹¨ìœ„\n- 1 wei = 10^-18 ether = 0.000000000000000001 ether\n- 1 ether = 10^18 wei = 1,000,000,000,000,000,000 wei\n- ì£¼ë¡œ ê¸°ìˆ ì  êµ¬í˜„ë‹¨ì—ì„œ ìì£¼ ì‚¬ìš©ë¨.\n- ë¹„íŠ¸ì½”ì¸ íƒ„ìƒì— í° ì˜í–¥ì„ ì¤€ B-Moneyë¥¼ ê³ ì•ˆí•œ ì¸ë¬¼ì¸ [Wei Dai](https://en.wikipedia.org/wiki/Wei_Dai)ì˜ ì´ë¦„ì„ ë”°ì„œ ë§Œë“¤ì–´ì¡Œë‹¤.\n\n### Gwei\n- giga-wei. 1,000,000,000 wei\n- Gas ì´ì•¼ê¸° í•  ë•Œ ë§ì´ ì‚¬ìš©ë¨.\n\n## Transferring ether\n- ê° íŠ¸ëœì­ì…˜ì—ëŠ” `value` í•„ë“œ : ì „ì†¡í•  etherì˜ ì–‘(wei ë‹¨ìœ„ë¡œ)\n- sender -\u003e recipient ì£¼ì†Œë¡œ ì˜®ê²¨ì§\n- recipient ì£¼ì†Œê°€ smart contractë¼ë©´ smart contract ì‹¤í–‰ì— ëŒ€í•œ gas fee ì§€ë¶ˆí•˜ëŠ”ë° ìƒˆìš©ë  ìˆ˜ë„ ìˆë‹¤.\n- [https://ethereum.org/ko/developers/docs/intro-to-ether/#transferring-ether](https://ethereum.org/ko/developers/docs/intro-to-ether/#transferring-ether)\n\n  \n## Ethereum accounts\n- ì´ë”ë¦¬ì›€ì—ì„œ ê±°ë˜í•  ìˆ˜ ìˆëŠ” ether ì”ê³ ë¥¼ ê°€ì§€ê³  ìˆëŠ” entity\n- accountì€ ì‚¬ìš©ìê°€ ì‚¬ìš©í•˜ê±°ë‚˜ smart contractë¥¼ ë°°í¬í•  ìˆ˜ ìˆë‹¤.\n\n## Types of Ethereum accounts\n- 1) Externally-owned account (EOA) : priveate keyë¥¼ ê°€ì§€ê³  ìˆëŠ” ê³„ì •\n- 2) Contract account : ë„¤íŠ¸ì›Œí¬ì— ë°°í¬ëœ smart contract.\n\n### 1) Externally-owned account (EOA)\n- ë§Œë“œëŠ”ë° ë¹„ìš©ì´ ë“¤ì§€ ì•ŠëŠ”ë‹¤.\n- íŠ¸ëœì­ì…˜ì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤.\n- EOA ì‚¬ì´ì—ì„œ ETHë‚˜ í† í°ì„ ì „ì†¡í•  ìˆ˜ ìˆë‹¤.\n- public keyì™€ private key ì•”í˜¸í™”ëœ í‚¤ ìŒì„ ê°€ì§€ê³  ìˆë‹¤.\n\n### 2) Contract account\n- ìƒì„±ì‹œ ë¹„ìš©ì´ ë“ ë‹¤. ë„¤íŠ¸ì›Œí¬ ìŠ¤í† ë¦¬ì§€ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—\n- íŠ¸ëœì­ì…˜ ìˆ˜ì‹ í•˜ëŠ” ì‘ë‹µìœ¼ë¡œë§Œ íŠ¸ëœì­ì…˜ì„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. (ìŠ¤ìŠ¤ë¡œ íŠ¸ëœì­ì…˜ì„ ë³´ë‚¼ ìˆ˜ ì—†ë‹¤.)\n- ì™¸ë¶€ì—ì„œ contract accountë¡œì˜ ì „ì†¡ì„ í†µí•´ ì—¬ëŸ¬ ê°€ì§€ ì‘ì—…í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¥¼ íŠ¸ë¦¬ê±°ë§ í•  ìˆ˜ ìˆë‹¤. ex. í† í° ë³´ë‚´ê¸° í˜¹ì€ ìƒˆë¡œìš´ contract ë§Œë“¤ê¸° ë“±\n- private í‚¤ê°€ ì—†ë‹¤. ëŒ€ì‹  code ë‚´ ë¡œì§ì— ì˜í•´ ì»¨íŠ¸ë¡¤ ëœë‹¤.\n\n\n## Ethereum accounts have four fields\n![](https://ethereum.org/static/19443ab40f108c985fb95b07bac29bcb/302a4/accounts.png)\n - [AN ACCOUNT EXAMINED](https://ethereum.org/ko/developers/docs/accounts/#an-account-examined)\n\n### nonce\n- ê° accountì—ì„œ ë³´ë‚¸ íŠ¸ëœì­ì…˜ì˜ ìˆ˜. íŠ¸ëœì­ì…˜ ì¹´ìš´í„°\n- í•œ íŠ¸ëœì­ì…˜ì„ í•œë²ˆë§Œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë¨. replay attack ë°©ì§€.\n- account ì—ì„œ ìƒì„±ëœ contract ê°¯ìˆ˜.\n\n### balance\n- ì£¼ì†Œê°€ ì†Œìœ í•œ weiì˜ ìˆ˜.\n\n### codeHash\n- EVM(ì´ë”ë¦¬ì›€ ê°€ìƒë¨¸ì‹ ) ë‚´ account ì½”ë“œ.\n- ë³€í•˜ì§€ ì•ŠëŠ” ê°’. (ë‹¤ë¥¸ í•„ë“œë“¤ì€ ë³€í•¨)\n- contract accountì˜ ê²½ìš°, contractì˜ ì½”ë“œë¥¼ ê°€ë¦¬í‚¨ë‹¤.\n- accountê°€ ë©”ì„¸ì§€ë¥¼ ë°›ê²Œë˜ë©´ ì½”ë“œ ì‹¤í–‰\n- ì½”ë“œ ì¡°ê°ì€ ë‚˜ì¤‘ì— ê²€ìƒ‰í•  ìˆ˜ ìˆë„ë¡ í•´ë‹¹ í•´ì‹œ ì•„ë˜ ìƒíƒœ ë°ì´í„°ë² ì´ìŠ¤(state database)ì— í¬í•¨ë¨\n- EOAì˜ ê²½ìš°, ë¹ˆ string í•´ì‹œ ê°’.\n\n### storageRoot\n- storage hash\n- accountì˜ storage contentì˜ í•´ì‹œ ê°’.\n- defaultëŠ” ë¹„ì–´ ìˆìŒ.\n\n## Contract address\n- 42ìë¡œ êµ¬ì„±ëœ 16ì§„ìˆ˜ ì£¼ì†Œ\n\t- ex. `0x06012c8cf97bead5deae237070f9587f8e7a266d`\n- Contractê°€ ì´ë”ë¦¬ì›€ ë¸”ë¡ì²´ì¸ì— ë°°í¬ë  ë•Œ ë¶€ì—¬ëœë‹¤.\n- ë§Œë“  ì‚¬ëŒì˜ ì£¼ì†Œì™€ í•´ë‹¹ ì£¼ì†Œì—ì„œ ë³´ë‚¸ íŠ¸ëœì­ì…˜ì˜ ìˆ˜([nonce](#nonce))ë¥¼ í†µí•´ ë§Œë“¤ì–´ì§„ë‹¤.\n\n## Validator Keys\n- ì‘ì—… ì¦ëª…(proof-of-work)ì—ì„œ ì§€ë¶„ ì¦ëª…(proof-of-stake)ë¡œ ë³€ê²½ë˜ë©° í•„ìš”í•´ì§\n- BLS(Boneh-Lyn-Shacham) í‚¤ëŠ” ê²€ì¦ì¸(validator)ë¥¼ ì‹ë³„í•˜ëŠ”ë° ì‚¬ìš© \n- BLSí‚¤ëŠ” íš¨ìœ¨ì ìœ¼ë¡œ ì§‘ê³„í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ í•©ì˜ ë„ë‹¬í•˜ëŠ”ë° í•„ìš”í•œ ëŒ€ì—­í­ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤. \n- private key + public key\n\n## Wallets\n- account != wallet\n- accountì™€ ì¸í„°ë ‰ì…˜ í•  ìˆ˜ ìˆëŠ” interface ì´ì application\n\n## Querying Ether\n- [[notes/Etherscan]]ì—ì„œ ì£¼ì†Œ ê²€ìƒ‰í•˜ì—¬ ì”ì•¡ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. \n\n## DApp\n- decentralized application\n- decentralized network ìƒ ìœ„ì— smart contractì™€ front end ì¸í„°í˜ì´ìŠ¤ë¡œ ë§Œë“¤ì–´ì§„ ì–´í”Œë¦¬ì¼€ì´ì…˜. \n\t- smart contractëŠ” ì ‘ê·¼ ê°€ëŠ¥í•˜ë©° íˆ¬ëª…í•˜ê²Œ ê³µê°œëœë‹¤. \n- ì¥ì \n\t- Zero downtime\n\t\t- ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ ìš´ì˜ë˜ê¸° ë•Œë¬¸ì— \n\t- privacy\n\t- ê²€ì—´ì´ ë”°ë¡œ ì—†ìŒ\n\t- ë°ì´í„° ë¬´ê²°ì„±\n\t\t- ë¸”ë¡ì²´ì¸ì— ë°ì´í„°ê°€ ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ë¶ˆë³€ì´ë©° ìœ„ì¡°í•  ìˆ˜ ì—†ë‹¤. \n\t- ê²€ì¦ ê°€ëŠ¥í•œ ë™ì‘ \n\t\t- ë³„ë„ ì¤‘ì•™ ê¸°ê´€ ì—†ì´ ë”°ë¡œ ì‹ ë¢°í•  ê²ƒ ì—†ì´ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. \n\t\t- í˜„ì‹¤ ì„¸ê³„ì—ì„œëŠ”  ì€í–‰ ì‹œìŠ¤í…œ ì‚¬ìš©ì‹œ ê¸ˆìœµ ê¸°ê´€ì„ ë¯¿ê³  ì‚¬ìš©í•˜ì§€ë§Œ DAppì—ì„œëŠ” ê·¸ëŸ´ í•„ìš”ê°€ ì—†ë‹¤.\n- ë‹¨ì \n\t- ìš´ì˜ì´ ì–´ë µë‹¤.\n\t\t- ë¸”ë¡ì²´ì¸ì— ì˜¬ë¼ê°€ê³ ë‚˜ë©´ ìˆ˜ì •ì´ ì–´ë µë‹¤. \n\t- í¼í¬ë¨¼ìŠ¤ ì´ìŠˆ \n\t\t- ì´ë”ë¦¬ì›€ì´ ì§€í–¥í•˜ëŠ” ë³´ì•ˆ, ë¬´ê²°ì„±, íˆ¬ëª…ì„±, ì‹ ë¢°ì„± ìˆ˜ì¤€ ë‹¬ì„±ì„ ìœ„í•´ ëª¨ë“  ë…¸ë“œê°€ ëª¨ë“  íŠ¸ëœì­ì…˜ì„ ì‹¤í–‰ ë° ì €ì¥. ì¦ëª… í•©ì˜ì—ë„ ì‹œê°„ì´ ê±¸ë¦¬ê²Œ ëœë‹¤. \n\t- ë„¤íŠ¸ì›Œí¬ ì •ì²´\n\t\t- í•˜ë‚˜ì˜ DAppì´ ë„ˆë¬´ ë§ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì „ì²´ ë„¤íŠ¸ì›Œí¬ê°€ ì •ì²´ëœë‹¤. í˜„ì¬ ë„¤íŠ¸ì›Œí¬ëŠ” ì´ˆë‹¹ 10~15ê°œì˜ íŠ¸ëœì­ì…˜ë§Œ ì²˜ë¦¬ ê°€ëŠ¥í•˜ë©°, ì´ë³´ë‹¤ ë” ë§ì€ íŠ¸ëœì­ì…˜ì´ ìƒê¸°ë©´ í’€ì´ ë¹ ë¥´ê²Œ ì¦ê°€ í•  ìˆ˜ ìˆë‹¤. \n\t- ì‚¬ìš©ì„±\n\t\t- ì‚¬ìš©ì ì—­ì‹œ ë¸”ë¡ì²´ì¸ì˜ ë³´ì•ˆ ë°©ì‹ì„ ì„¤ì •í•´ì•¼í•¨ìœ¼ë¡œ ì§„ì… ì¥ë²½ì´ ë†’ì„ ìˆ˜ ìˆë‹¤.\n\t- ì¤‘ì•™ ì§‘ì¤‘í™” \n\t\t- ì‚¬ìš©ì ì¹œí™”ì ìœ¼ë¡œ í•˜ë ¤ë©´ ì „í†µì ì¸ ì¤‘ì•™ ì§‘ì¤‘í™”ëœ ì„œë¹„ìŠ¤ë¡œ ë§Œë“¤ê²Œ ë˜ëŠ”ë°, ì´ë ‡ê²Œ ë˜ë©´ ë¸”ë¡ì²´ì¸ì˜ ì¥ì ë“¤ì„ ë” ì´ìƒ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ëœë‹¤. \n\n## Transaction\n- accountì˜ ì•”í˜¸í™”ëœ ëª…ë ¹\n- ì˜ˆë¥¼ ë“¤ì–´, account =\u003e account ETH ì „ì†¡\n- [EVM](#EVM) ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” íŠ¸ëœì­ì…˜ì€ ì „ì²´ ë„¤íŠ¸ì›Œí¬ë¡œ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë˜ì–´ì•¼ í•œë‹¤.\n\t- **recipient** : ìˆ˜ì‹  ì£¼ì†Œ \n\t\t- EOA : ì „ì†¡ ë°›ëŠ” ì‚¬ëŒ\n\t\t- Contact account : ì´ íŠ¸ëœì­ì…˜ì€ contract codeë¥¼ ì‹¤í–‰í•˜ëŠ” íŠ¸ëœì­ì…˜ì„. \n\t- **signature** : ë³´ë‚¸ ì‚¬ëŒ ì‹ë³„ì \n\t\t- ë³´ë‚¸ ì‚¬ëŒì˜ private keyê°€ íŠ¸ëœì­ì…˜ì— ì‹¸ì¸í•˜ê³  ë³´ë‚¸ ì‚¬ëŒì´ ì´ íŠ¸ëœì­ì…˜ì„ ìŠ¹ì¸ í–ˆë‹¤ê³  í™•ì¸ í•  ë•Œ ìƒì„±ë¨. \n\t- **nonce** : ê³„ì •ì˜ íŠ¸ëœì­ì…˜ ë²ˆí˜¸. ìˆœì°¨ì ìœ¼ë¡œ ì¦ê°€í•˜ëŠ” ì¹´ìš´í„°\n\t- **value** : ì „ì†¡í•˜ëŠ” ETH ì–‘ ([WEI](#wei))\n\t- **data** : ì„ì˜ ë°ì´í„° (optional)\n\t- **gasLimit** : íŠ¸ëœì­ì…˜ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ê°€ìŠ¤ ë‹¨ìœ„ì˜ ì–‘. ê³„ì‚° ë‹¨ê³„ì—ì„œ ë‚˜ì˜¤ëŠ” ê°€ìŠ¤ ì–‘\n\t- **maxPriorityFeePerGas** : validatorì—ê²Œ ë³´ë‚¼ ìµœëŒ€ ê°€ìŠ¤ëŸ‰\n\t- **maxFeePerGas** : ê±°ë˜ì— ëŒ€í•´ ì§€ë¶ˆí•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ê°€ìŠ¤ëŸ‰ ( baseFeePerGas ì™€ maxPriorityFeePerGas í¬í•¨)\n\n## Gas\n- ì´ë”ë¦¬ì›€ ë„¤íŠ¸ì›Œí¬ì—ì„œ íŠ¹ì • ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ê³„ì‚° ë…¸ë ¥ì˜ ì–‘ì„ ì¸¡ì •í•˜ëŠ” ë‹¨ìœ„ \n- ê±°ë˜ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ê³„ì‚° ìì› í•„ìš” =\u003e ê° ê±°ë˜ëŠ” ìˆ˜ìˆ˜ë£Œê°€ í•„ìš”.\n- ì´ ê±°ë˜ë¥¼ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ í•„ìš”í•œ ìˆ˜ìˆ˜ë£Œ \n- `gasLimit` ì™€ `maxPriorityFeePerGas` ë¥¼ ì´ìš©í•˜ì—¬ validatorì—ê²Œ ì¤„ ìµœëŒ€ ê±°ë˜ ìˆ˜ìˆ˜ë£Œë¥¼ ê²°ì •í•œë‹¤. \n\n### ê±°ë˜ ìˆ˜ìˆ˜ë£Œ ê³„ì‚° ë°©ë²• \n- ì´ë”ë¦¬ì›€ ë„¤íŠ¸ì›Œí¬ ê±°ë˜ ìˆ˜ìˆ˜ë£Œ ê³„ì‚° ë°©ì‹ì€ [[notes/London upgrade]] ì´í›„ë¡œ ë³€ê²½ë¨.\n- ê¸°ì¡´ ë™ì‘ ë°©ì‹ (ëŸ°ë˜ ì—…ê·¸ë ˆì´ë“œ ì „)\n\t- `gasLimit` : 21,000 unit, gas price : 200 gwei ì¸ ê²½ìš° =\u003e Gas units * price = 21,000 * 200 = 4,2000,000 gwei (0.0042 ETH)\n- ì´í›„ ë™ì‘ ë°©ì‹ (ëŸ°ë˜ ì—…ê·¸ë ˆì´ë“œ ì´í›„)\n\t- gasLimit` : 21,000 unit`, **base fee** 10 gwei, tipì€ 2 gwei \n\t  =\u003e 21,000 ( 10 + 2) = 252,000 gwei (0.000252ETH)\n\t- validatorëŠ” 0.000042 ETH íŒì„ ë°›ê³ , base feeì¸ 0.00021 ETHëŠ” burn ëœë‹¤.\n\t- `maxFeePerGas` ì„¤ì •í•  ìˆ˜ ìˆë‹¤.\n\t\t- refund = ìµœëŒ€ ìˆ˜ìˆ˜ë£Œ - ( base fee + priority fee )\n\t- ì´ë¥¼ í†µí•´ ê¸°ë³¸ë£Œ ì´ìƒì˜ ê³¼ë„í•œ ì§€ë¶ˆì„ ë§‰ëŠ”ë‹¤.\n\n## Block\n- íŠ¸ëœì­ì…˜ì„ ë‹´ê³  ìˆë‹¤. \n- ì¦‰, íŠ¸ëœì­ì…˜ì€ ê¸°ë¡ì´ê³  ë¸”ë¡ì€ ì¥ë¶€ë‹¤. \n- hashëŠ” ë¸”ë¡ ë°ì´í„°ì—ì„œ ì•”í˜¸í™”ë˜ì–´ ì´ ë§í¬ë¡œ ë¸”ë¡ë“¤ì„ ì—°ê²° \n\t- í•œë²ˆ ì—°ê²°ëœ hashëŠ” ëª¨ë“  ì´ìš©ìê°€ ì•Œê³  ìˆê¸° ë•Œë¬¸ì— ì‰½ê²Œ ë³€ì¡°í•  ìˆ˜ ì—†ë‹¤. \n\n### ì™œ blockì´ í•„ìš”í•œê°€\n- ì´ë”ë¦¬ì›€ ë„¤íŠ¸ì›Œí¬ì— ì‡ëŠ” ëª¨ë“  ì°¸ê°€ìê°€ ë™ê¸°í™” ìƒíƒœë¥¼ ìœ ì§€í•˜ê³  íŠ¸ëœì­ì…˜ì˜ ì •í™•í•œ ê¸°ë¡ì„ ë™ì˜\n- ë°¸ë¦¬ë°ì´í„°(validator)ë“¤ì€ ëœë¤ìœ¼ë¡œ íŠ¸ëœì­ì…˜ì„ ë¸”ë¡ì— ë‹´ì„ ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë°›ê³  ê·¸ íŠ¸ëœì­ì…˜ì„ ë¸”ë¡ì— ë‹´ì•„ ë˜ ë‹¤ë¥¸ ë°¸ë¦¬ë°ì´í„°ë“¤ì—ê²Œ ê³µìœ  \n\n### block ì‘ë™ ë°©ì‹ \n- íŠ¸ëœì­ì…˜ ê¸°ë¡ ë³´ì¡´ì„ ìœ„í•´ ë¸”ë¡ì€ ë°˜ë“œì‹œ ì •ë ¬ëœë‹¤\n- ë¸”ë¡ì´ ë°¸ë¦¬ë°ì´í„°ì— ì˜í•´ í•©ì³ì§€ê³  ë‚˜ë©´, ë„¤íŠ¸ì›Œí¬ì— ëª¨ë‘ ì „íŒŒëœë‹¤.\n- ë¸”ë¡ì´ í•©ì³ì§€ê³  ë‚˜ë©´ ìƒˆë¡œìš´ ë²¨ë¦¬ë°ì´í„°ë¥¼ ì„ íƒí•˜ê³  ë‹¤ìŒ ë¸”ë¡ì„ ë§Œë“ ë‹¤.\n- í˜„ì¬ ì´ë”ë¦¬ì›€ì€ proof-of-stake(POS) í”„ë¡œí† ì½œë¡œ ëª…ì‹œë˜ì–´ìˆë‹¤. \n\n### Proof-of-stake Protocol \n- ì§€ë¶„ ì¦ëª… \n- ë°¸ë¦¬ë°ì´í„°ê°€ ë˜ê¸° ìœ„í•´ì„œëŠ” ë‹´ë³´ë¡œ 32ETH ì§€ë¶ˆí•´ì•¼í•œë‹¤. \n- ë¶€ì •í–‰ìœ„ê°€ ê±¸ë¦´ ê²½ìš°, ì´ ë‹´ë³´ì—ì„œ ì‚¬ë¼ì§€ê²Œ ë¨ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ ë³´í˜¸ìš©ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.\n- ëª¨ë“  [[notes/ethereum 2.0#ìŠ¬ë¡¯ (slot)]]ë§ˆë‹¤ [[notes/Block Proposer]]ë¡œ ë¶€í„° ë°¸ë¦¬ë°ì´í„°ê°€ ë¬´ì‘ìœ„ë¡œ ì„ íƒ\n- ë°¸ë¦¬ë°ì´í„°ëŠ” íŠ¸ëœì­ì…˜ì„ ë¬¶ê³ , ì‹¤í–‰, ìƒˆë¡œìš´ ìƒíƒœ(state)ë¥¼ ê²°ì • í›„ ë‹¤ë¥¸ ë°¸ë¦¬ë°ì´í„°ë“¤ì—ê²Œ ì „ë‹¬ \n\t- ë‹¤ë¥¸ ë°¸ë¦¬ë°ì´í„°ë“¤ : ë³€ê²½ ì‚¬í•­ë“¤ì„ ì‹¤í–‰í•´ë³´ê³ , ìœ íš¨í•˜ë‹¤ê³  íŒë‹¨í•˜ë©´ í•´ë‹¹ ë¸”ë¡ì„ ìì²´ ë°ì´í„°ë² ì´ìŠ¤ì— ì¶”ê°€ \n- ë™ì¼ ìŠ¬ë¡¯ì— ëŒ€í•´ ë‘ê°œì˜ ì¶©ëŒ ë¸”ë¡ì´ ìˆì„ ê²½ìš° [fork-choice algorithm](https://github.com/ethereum/annotated-spec/blob/master/phase0/fork-choice.md) ìœ¼ë¡œ ê°€ì¥ ë§ì´ ì—°ê²°ëœ ETHê°€ ì§€ì›í•˜ëŠ” ë¸”ë¡ ì„ íƒ\n\n### What's in a block\n![](https://user-images.githubusercontent.com/2231510/205472611-01a88b46-e4f4-4d97-8907-1d2f095761b3.png)\n- `slot` : ì´ ë¸”ë¡ì´ ì†í•œ ìŠ¬ë¡¯ \n- `proposer_index` : ë¸”ë¡ ì œì•ˆí•œ ë°¸ë¦¬ë°ì´í„°ì˜ ID\n- `parent_root` : ì´ì „ ë¸”ë¡ í•´ì‹œ\n- `state_root` : ìƒíƒœ ì˜¤ë¸Œì íŠ¸ì˜ ë£¨íŠ¸ í•´ì‹œ\n- `body`\n\t- `randao_reveal` : ë‹¤ìŒ [[notes/Block Proposer]]ì„ ìœ„í•´ ì‚¬ìš©ë  ê°’ \n\t- `eth1_data` : ë‹´ë³´ ì»¨íŠ¸ë ‰íŠ¸ ì •ë³´\n\t- `graffiti` : ë¸”ë¡ íƒœê·¸ë¥¼ ìœ„í•œ ì„ì˜ ë°ì´í„°\n\t- `proposer_slashings` :  ì˜ë¼ë‚¼ ë°¸ë¦¬ë°ì´í„° ëª©ë¡\n\t- `attester_slashings` : ì˜ë¼ë‚¼ ë°¸ë¦¬ë°ì´í„° ëª©ë¡\n\t- `attestations` : í˜„ì¬ ë¸”ë¡ì„ ì§€ì›í•˜ëŠ” ì¦ëª… ëª©ë¡\n\t- `deposits` : ë‹´ë³´ ì»¨íŠ¸ë™íŠ¸ë¥¼ ìœ„í•œ ìƒˆë¡œìš´ ë‹´ë³´ ë¦¬ìŠ¤íŠ¸ \n\t- `voluntary_exits` : ë„¤íŠ¸ì›Œí¬ ë‚´ ë°¸ë¦¬ë°ì´í„° ëª©ë¡\n\t- `sync_aggregate` : light clientì— ì „ë‹¬í•˜ëŠ” ë°¸ë¦¬ë°ì´í„°ì˜ subset\n\t- `execution_payload` : ì‹¤í–‰ clientë¡œ ë¶€í„°ì˜ íŠ¸ëœì­ì…˜\n\n### Block Time\n- ë¸”ë¡ì„ ë¶„ë¦¬í•˜ëŠ” ì‹œê°„\n- ì´ë”ë¦¬ì›€ì—ì„œ ì‹œê°„ì€ ìŠ¬ë¡¯([[notes/ethereum 2.0#ìŠ¬ë¡¯ (slot)]] = 12ì´ˆ\n- ëª¨ë“  ë°¸ë¦¬ë°ì´í„°ê°€ ì˜¨ë¼ì¸ ìƒíƒœê³  ì™„ì „íˆ ë™ì‘í•œë‹¤ê³  ê°€ì •í–ˆì„ ë•Œ, ëª¨ë“  ìŠ¬ë¡¯ì— ë¸”ë¡ì´ ìˆë‹¤. -\u003e ì¦‰, ë¸”ë¡ ì‹œê°„ì€ **12ì´ˆ** \n- í•˜ì§€ë§Œ, ë°¸ë¦¬ë°ì´í„°ê°€ ì˜¤í”„ë¼ì¸ì¼ìˆ˜ë„ ìˆì–´ì„œ, ìŠ¬ë¡¯ì´ ë¹Œ ìˆ˜ë„ ìˆìŒ. \n\n### Block Size\n- ê° ë¸”ë¡ì˜ ëª©í‘œ ì‚¬ì´ì¦ˆëŠ” 1500ë§Œ ê°€ìŠ¤.\n- í•˜ì§€ë§Œ ë„¤íŠ¸ì›Œí¬ ìˆ˜ìš”ì— ë”°ë¼ ì¦ê°€, ê°ì†Œê°€ ê°€ëŠ¥í•˜ì—¬ ìµœëŒ€ 3000ë§Œ ê°€ìŠ¤(ëª©í‘œì˜ 2ë°°)ê¹Œì§€ ëŠ˜ì–´ë‚  ìˆ˜ ìˆë‹¤.\n- ë¸”ë¡ ë‚´ ëª¨ë“  íŠ¸ëœì­ì…˜ì—ì„œ ì§€ì¶œë˜ëŠ” ê°€ìŠ¤í”¼ì˜ ì´ëŸ‰ì€ ë¸”ë¡ ê°€ìŠ¤ í•œë„ë³´ë‹¤ ì‘ì•„ì•¼ í•œë‹¤.\n\t- ë¸”ë¡ì´ ì„ì˜ë¡œ ì»¤ì ¸ë²„ë¦¬ì§€ ì•Šê²Œ í•˜ê¸°ìœ„í•œ ì¥ì¹˜\n\t- ë¸”ë¡ì´ ë„ˆë¬´ ì»¤ì§€ë©´ ì „ì²´ ë…¸ë“œì˜ ë¦¬ì†ŒìŠ¤ì™€ ì†ë„ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì¸í•´ ë„¤íŠ¸ì›Œí¬ë¥¼ ë”°ë¼ê°ˆ ìˆ˜ ì—†ê²Œ ë  ìˆ˜ ìˆìŒ\n\n### Base fee\n- ëª¨ë“  ë¸”ë¡ì—ëŠ” base feeê°€ ìˆì–´ ì˜ˆë¹„ ê°€ê²© ì—­í• ì„ í•¨\n- ë¸”ë¡ì— ë“¤ì–´ê°€ë ¤ë©´ ì´ base fee ë³´ë‹¤ëŠ” ì»¤ì•¼ í•¨\n- ê°ê°ì˜ ë¸”ë¡ë§ˆë‹¤ ë…ë¦½ì ìœ¼ë¡œ ê³„ì‚°ë¨. \n- ì´ì „ ë¸”ë¡ì— ì˜í•´ ê²°ì •ë¨ìœ¼ë¡œ ì‚¬ìš©ìëŠ” feeë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ìˆìŒ\n- ë¸”ë¡ì´ ì±„êµ´ë ë•Œë§ˆë‹¤ ì—°ì†Œ(burned)ëœë‹¤. \n\n### Priority fee (tips)\n- \n\n### Max fee\n\n\n\n## References\n- Ethereum official website : [https://ethereum.org/ko/what-is-ethereum/](https://ethereum.org/ko/what-is-ethereum/)\n- [Learn Ethereum Blockchain daily and Keep the Knowledge Awake :)](https://medium.com/coinsbench/learn-ethereum-blockchain-daily-and-keep-the-knowledge-awake-day-1-6d482ae67ac7)\n- [Account Abstraction \u0026 ERC 4337](https://medium.com/decipher-media/account-abstraction-erc-4337-2b8dff6b0a34)","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/Ethereum-Virtual-Machine":{"title":"Ethereum Virtual Machine","content":"\n\n## References\n- [The Ethereum Virtual Machine â€” How does it work?](https://medium.com/mycrypto/the-ethereum-virtual-machine-how-does-it-work-9abac2b7c9e)","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/Etherscan":{"title":"Etherscan","content":"\n- [Etherscan](https://etherscan.io/)\n- ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ addressë¡œ [[notes/Ethereum]]ì˜ ëª¨ë“  íŠ¸ëœì­ì…˜ê³¼ ë¸”ë¡ì„ ì¶”ì í• ìˆ˜ ìˆëŠ” íˆ´\n\t- transaction\n\t- block\n\t- address \n- ì½ëŠ” ë°©ë²• \n\t- [[notes/How NFT smart contract really work]]\n\n## Transaction Details\n- \n## Block \n- \n## Address\n\n","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/FastAPI-OpenAPI":{"title":"FastAPI OpenAPI custom setting","content":"\n## References\n- [Extending OpenAPI](https://fastapi.tiangolo.com/advanced/extending-openapi/)","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/GitHub-Copilot-Chat":{"title":"GitHub Copoilot Chat","content":"GitHubì€ ì—­ì‹œ ì½”ë“œë¡œ ìŠ¹ë¶€í•˜ë‚˜ë³´ë‹¤. VSCode Pluginìœ¼ë¡œ GitHub Copilot Chatì´ ë² íƒ€ë¡œ ì˜¤í”ˆë˜ì—ˆë‹¤. ì—…ë¬´í•˜ë©° ì•½ ì¼ì£¼ì¼ ì‚¬ìš©í•´ë³´ì•˜ê³ , ê¸°ì¡´ì— ChatGPTì™€ ì™”ë‹¤ê°”ë‹¤ í•˜ë©° ì‚¬ìš©í• ë•Œë³´ë‹¤ í›¨ì”¬ ìœ ìš©í•˜ê³  ì •ë§ AI programming assistant ì—­í• ì— ë§ê²Œ ì˜ ìˆ˜í–‰í•˜ëŠ” ê²ƒ ê°™ë‹¤. \n\n## ê¸°ëŠ¥ \n### 1. `/explain` \n- selected code ë¥¼ ìì—°ì–´ë¡œ ì„¤ëª…. \n- ìµìˆ™í•˜ì§€ ì•Šì€ ì½”ë“œë¥¼ ë¹ ë¥´ê²Œ ì½ì–´ì•¼í•  ë•Œ, ê° í•¨ìˆ˜ë‚˜ ë³€ìˆ˜ê°€ ì–´ë””ì„œ ì–´ë–»ê²Œ ì“°ì´ëŠ”ì§€ ì •ë¦¬. ìƒˆë¡œìš´ ì½”ë“œë‚˜ ì˜¤í”ˆì†ŒìŠ¤ ì½ì„ë•Œ ì•„ì£¼ ìš”ê¸´í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥ . \n- ChatGPTì—ì„œëŠ” ë‚´ê°€ ì½”ë“œë¥¼ ë‹¤ ë³µë¶™í•´ì•¼ì§€ë§Œ ë§¥ë½ì„ ì½ì–´ì£¼ì§€ë§Œ, ì œê°€ ë”°ë¡œ ë³µë¶™ì„ í•´ì£¼ì§€ ì•Šì€ ì½”ë“œê¹Œì§€ í™•ì¸í•˜ê³  ë‚´ê°€ ê°€ì§„ ì½”ë“œì—ì„œ ê°œë…ì„ ì„¤ëª…í•´ì¤˜ì„œ ë”°ë¡œ ì´ë¦¬ì €ë¦¬ ì½”ë“œ ì—¬í–‰ì„ ë‹¤ë‹ˆì§€ ì•Šì„ ìˆ˜ ìˆì–´ \u0008ì¢‹ì•˜ë‹¤. \n![](https://github.com/jiyeonseo/digital-garden/assets/2231510/2335b511-cab3-429e-b2f6-89efcfff4aca)\n- í•œêµ­ì–´ë¡œë„ ê°€ëŠ¥\n![](https://github.com/jiyeonseo/digital-garden/assets/2231510/4b32a475-73ed-47d4-b28b-c0232fd793fc)\n\n\n### 2. `/fix` \n- IDEì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” fixëŠ” pre defined ëœ ë¬¸ì¥ìœ¼ë¡œ ë‚´ê°€ ì‘ì—…í•˜ê³  ìˆëŠ” ë§¥ë½ê³¼ ë§ì§€ ì•Šê±°ë‚˜ ì´í•´í•˜ê¸° ì–´ë ¤ìš´ ê²½ìš°ê°€ ì¢…ì¢… ìˆì—ˆìŒ. \n- ì½”íŒŒì¼ëŸ¿ ì±—ì—ì„œëŠ” ë‚´ ì½”ë“œì˜ ë§¥ë½ì„ íŒŒì•…í•˜ì—¬ ì„¤ëª…í•´ì£¼ì–´ ë” ì´í•´í•˜ê¸° ì¢‹ì•˜ë‹¤. \n- ì½”ë“œì—ì„œ ë°”ë¡œ ëŒ€í™”ê°€ ê°€ëŠ¥í•˜ê¸°ë„ í•˜ê³ . \n\n![](https://github.com/jiyeonseo/digital-garden/assets/2231510/a29d38ac-c48d-4048-bdad-8a2ee1534678)\n- ì½”ë“œ select í•œ ë‹¤ìŒ `/fix`ë¡œ ì§ˆë¬¸ í•  ìˆ˜ ë„ ìˆìŒ\n![](https://github.com/jiyeonseo/digital-garden/assets/2231510/c7f83c78-61b2-46da-92c8-6d997c861d99)\n\n### 3. `/simplify` \n- ë³µì¡í•œ ì½”ë“œë¥¼ ì¢€ ë” ê°„ì†Œí™” ë²„ì „ìœ¼ë¡œ ë¦¬íŒ©í† ë§ í•´ì£¼ëŠ” ê¸°ëŠ¥. \n- ì¼ë‹¨ ëŒì•„ê°€ê²Œ ì§  ë‹¤ìŒ, ë¦¬íŒ©í† ë§ í˜¹ì€ ì½”ë“œë¥¼ ê°„ì†Œí™” í•˜ê³ ì í•  ë•Œ ì´ìš©í•˜ê¸° ì¢‹ì•˜ìŒ. \n![](https://github.com/jiyeonseo/digital-garden/assets/2231510/54051bb1-9f71-4c05-af6c-ffb552656fa2)\n\n\n### 4. `/tests` \n- selected codeì˜ ìœ ë‹›í…ŒìŠ¤íŠ¸ ìƒì„±. í…ŒìŠ¤íŠ¸ ì–´ë–»ê²Œ ì§¤ê¹Œì˜ íŒíŠ¸ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤. \n- ì œëŒ€ë¡œëœ ì˜ˆì œë¥¼ ëª»ì°¾ì•„ì„œ ê·¸ëŸ°ì§€ ëª¨ë¥´ê² ì§€ë§Œ í¬ê²Œ ì˜ ëŒ€ë‹µí•´ì£¼ëŠ” ê²ƒì¸ì§€ ëª¨ë¥´ê² ë‹¤. \n\n### 5. Question suggestion\n- ì§€ê¸ˆ chatì˜ ë§¥ë½ì—ì„œ ë” ê³ ë¯¼í•´ë³¼ë§Œí•œ ì§ˆë¬¸ë“¤ì„ ë¨¼ì € ì œì•ˆ. \n- ëŒ€í™”ì—ì„œ ë‹¨ë°œì„± ì§ˆë¬¸ìœ¼ë¡œ ëë‚˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë” ê¹Šì´ ì–¸ì–´ì ìœ¼ë¡œ ê¸°ìˆ ì ìœ¼ë¡œ í•¨ê»˜ ê³µë¶€í•  ìˆ˜ ìˆì–´ ì¢‹ì•˜ë‹¤. \n![twitter_Fw26Gh5aEAAQ9lM](https://github.com/jiyeonseo/digital-garden/assets/2231510/702e66a9-a9d7-40a8-9cca-8b307158d54c)\n![](https://github.com/jiyeonseo/digital-garden/assets/2231510/1469c58b-aa41-4fea-ac72-5652821598ee)\n\n\n## Fun Facts \n- ì¢‹ì€ ì½”ë“œë§Œ ì§œë ¤ê³  í•œë‹¤. ë³µì¡í•œ ì½”ë“œ ì§œë‹¬ë¼ê³  í•˜ë‹ˆ ê±°ì ˆí•œë‹¤. \n![](https://github.com/jiyeonseo/digital-garden/assets/2231510/f8b492ac-dcf0-4fa0-aeed-edc356dba147)\në²ˆì™¸ë¡œ ChatGPTëŠ” ì˜ ì§œì¤€ë‹¤. \n![](https://github.com/jiyeonseo/digital-garden/assets/2231510/a4343d60-988a-4b91-a0ba-8b29e6720b56)\n \n- ì½”ë“œ ì´ì™¸ì˜ ì§ˆë¬¸ì—ëŠ” ëŒ€ë‹µì„ ì•ˆí•˜ëŠ” í¸\n![](https://github.com/jiyeonseo/digital-garden/assets/2231510/165d908e-1b23-4a10-8036-4e992f7616f7)\n\n- ë¬¼ë¡  í”„ë¡¬í”„íŠ¸ë¥¼ ì–´ë–»ê²Œ ì£¼ëŠëƒì— ë”°ë¼ ë‹¤ë¥´ë‹¤\n![](https://github.com/jiyeonseo/digital-garden/assets/2231510/d7a16a7f-411f-4f22-8e28-186e930ca84f)\n\n- Plugin prompt ë¶„ì„í•œ repo\n\t-  https://github.com/saschaschramm/github-copilot\n\n## References\n- join wait list https://github.com/github-copilot/chat_waitlist_signup/join ","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/Hardhat":{"title":"Hardhat","content":"- [hardhat](https://hardhat.org/)\n- ","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/How-NFT-smart-contract-really-work":{"title":"How NFT smart contract really work","content":"\n\u003e Ethereum NFT ê¸°ì¤€\n\n## OpenSea \n\n- ì˜ˆì œ [Doodle #1815](https://opensea.io/assets/ethereum/0x8a90cab2b38dba80c64b7734e58ee1db38b8992e/1815)\n![](https://user-images.githubusercontent.com/2231510/204299525-29388efa-cc3f-4fed-bd2b-9acc83e8d2a5.png\")\n![](https://user-images.githubusercontent.com/2231510/204299525-29388efa-cc3f-4fed-bd2b-9acc83e8d2a5.png)\n\n- OpenSea ì£¼ì†Œì—ì„œ `chain`, `contract address`, `token` í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n- `https://opensea.io/assets/{chain}/{contract address}/{token id}`\n\n![](https://user-images.githubusercontent.com/2231510/204303462-86a6c32d-033c-4052-ac52-c559d0a2c944.png)\n- Details ì—ì„œë„ ë™ì¼í•˜ê²Œ NFTì— ëŒ€í•´ ì•Œ ìˆ˜ ìˆë‹¤.\n- Contract Address ë§í¬ : NFT Collection contract [[notes/Etherscan]] í˜ì´ì§€ë¡œ ì—°ê²°\n- Token ID ë§í¬ : NFT Tokenì˜ metadata \n\n## Etherscan\n- [ì˜ˆì œ Contract 0x8a90CAb2b38dba80c64b7734e58Ee1dB38B8992e](https://etherscan.io/address/0x8a90cab2b38dba80c64b7734e58ee1db38b8992e)\n\n### \"Contract\" tab\n- Code\n\t- Contract Source Code : solidity. contract code ë‚´ìš©\n\t- Contract ABI \n\t- Contract Creation Code\n\t\t- ByteCode\n\t\t- Opcodes\n- Read Contract : í•´ë‹¹ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë ‰íŠ¸ì— ëŒ€í•´ READ í• ìˆ˜ ìˆëŠ” functionë“¤ \n\t- ì˜ˆë¥¼ ë“¤ì–´, `onwnerOf`  functionì— `tokenId`ë¥¼ ë„£ìœ¼ë©´ í•´ë‹¹ `tokenId`ì˜ NFTë¥¼ ê°€ì§„ owner query ê°€ëŠ¥\n\t  ![](https://user-images.githubusercontent.com/2231510/204311713-6f1ea517-9144-43bc-9add-3e39f0ce9386.png)\n\t- `tokenURI` : NFT metadata link \n\t  ![](https://user-images.githubusercontent.com/2231510/204314326-005287a8-b0f2-43d6-a94a-dd5b8c4bac92.png)\n\t  - [[notes/IPFS]] ì£¼ì†Œ\n\t  - `https://ipfs.io/ipfs/{ë’¤ìª½ ì£¼ì†Œ}` \n\t\t  - ì•ë¶€ë¶„ì€ ë°”ë€Œì§€ ì•Šê³  ë§¨ ë’¤ token IDë§Œ ë³€ê²½ëœë‹¤. \n\t  - [https://ipfs.io/ipfs/QmPMc4tcBsMqLRuCQtPmPe84bpSjrC3Ky7t3JWuHXYB4aS/13](https://ipfs.io/ipfs/QmPMc4tcBsMqLRuCQtPmPe84bpSjrC3Ky7t3JWuHXYB4aS/13)\n\t  - ì´ë ‡ê²Œ ë‹¤ë¥¸ ê³³ì— ì €ì¥ë˜ì–´ìˆê¸° ë•Œë¬¸ì— **owner**ê°€ ì›í•˜ë©´ metadaë¥¼ ë°”ê¿€ ìˆ˜ ìˆë‹¤.\n\t  - ownerë¥¼ ë§Œì•½ resign(ì´ ì—­ì‹œë„ function) í•œë‹¤ë©´ ownerê°€ ì—†ê²Œ ë˜ê³  í•´ë‹¹ NFTëŠ” ì˜ì›íˆ ë°”ê¿€ ìˆ˜ ì—†ê²Œ ëœë‹¤. \n\t- `balanceOf` : owner ì£¼ì†Œê°€ í•´ë‹¹ contract NFT ë¥¼ ëª‡ê°œ ê°€ì¡ŒëŠ”ì§€ \n\t  ![](https://user-images.githubusercontent.com/2231510/204318782-5f27a4cd-4f0d-42ff-92cc-04e2d2cdf3d7.png)\n\t- `totalSupply` : ì´ contractì˜ ìµœëŒ€ ë°œí–‰ê°¯ìˆ˜ \n\t  ![](https://user-images.githubusercontent.com/2231510/204319392-9b9c2e31-1b97-43f7-8a67-ee509a4594a2.png)\n\t  \n- Write code \n\t- ì§€ê°‘ê³¼ ì—°ê²°í•˜ì—¬ codeë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤. \n\t- `setBaseURI` : Metadata URL ì„¸íŒ…í•˜ê¸° \n\t  ![](https://user-images.githubusercontent.com/2231510/204317487-52539b7e-2fe6-444f-b450-f93f8cd83604.png)\n\t  (ë‚´ê°€ `owner`ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— denied ë¨)\n\t  ![](https://user-images.githubusercontent.com/2231510/204317791-d5d95e9d-1074-453d-b198-e8f78f78c8d6.png)\n\t  (ì½”ë“œ ë³´ë©´ `onlyOwner` contract owner ë§Œ ê°€ëŠ¥í•˜ê²Œ ë˜ì–´ìˆìŒ )\n\t  ë‚˜ì¤‘ì— metadataê°€ í˜¸ì˜¤ì˜¤ì˜¥ì‹œë‚˜ ë°”ë€Œê²Œ ë˜ë©´ ì´ `setBaseURI`ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŒ. \n\t  - `withdraw` : `onlyOwner`\n\t    í•´ë‹¹ contractì˜ balanceë¥¼ í•´ë‹¹ function call í•œ ì‚¬ëŒì—ê²Œ transfer í•œë‹¤. (ëˆ„êµ¬ë“  ë¶€ë¥¼ ìˆ˜ ìˆê¸´ í•˜ì§€ë§Œ `onlyOwner`ì—ì„œ ë§‰íˆë‹ˆ ownerë§Œì´ balanceë¥¼ ê°€ì ¸ê°ˆ ìˆ˜ ìˆë‹¤.)\n\t    ![](https://user-images.githubusercontent.com/2231510/204320002-9f55dc99-5744-4f15-ac68-8cc8d5480336.png)\n\t    \n## NFT Staking\n- [ì˜ˆì‹œ Wizards \u0026 Dragons Game (WnD)](https://opensea.io/collection/wizards-dragons-game-v2)\n- [Contract Etherscan](https://etherscan.io/address/0x999e88075692bcee3dbc07e7e64cd32f39a1d3ab#readContract)\n- `Contract` tab \u003e `Read Contract` \u003e `tower` ë‹¤ë¥¸ contract ì£¼ì†Œê°€ ìˆìŒ\n  ![](https://user-images.githubusercontent.com/2231510/204322362-d41719e9-015d-403f-91e0-8bc9986dfd42.png)\n  staking contract \n  ![](https://user-images.githubusercontent.com/2231510/204323453-a5c3738a-c8d6-45cd-a02b-40523d298f07.png)\n  `transferFrom` : [[notes/ERC-20]] standard function\n\t  - `tokenOwner` ë¡œ ë¶€í„° ì´ `address` ì—ê²Œ NFTë¥¼ ë³´ë‚´ê² ë‹¤. \n- unstaking\n  ![](https://user-images.githubusercontent.com/2231510/204324932-81b03754-0647-4039-9982-b511ff4bca45.png)\n  \"claim\", \"unstaking\" functionì„ ë³´ë©´ ëŒ€ë¶€ë¶„ ì—¬ê¸°ì— rewardì— ëŒ€í•œ ì½”ë“œê°€ ìˆë‹¤. \n\n\n## References\n- [HOW NFT SMART CONTRACTS REALLY WORK - Can metadata be changed? How staking works?](https://www.youtube.com/watch?v=Wu436_IwWmo)","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/IPFS":{"title":"IPFS","content":"- [ipfs.tech](https://ipfs.tech/)\n- InterPlanetary File System. \n- ë¶„ì‚°í˜• íŒŒì¼ ì‹œìŠ¤í…œ.\n- P2P ë°©ì‹. \n- NFT Metadata ì €ì¥í•˜ëŠ” ê³³ìœ¼ë¡œ ë§ì´ ì“°ì„. \n\t- ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¡œëŠ”  [[arweave.org]] ë„ ìˆìŒ.","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/K6-Load-Test":{"title":"K6 ë¶€í•˜ í…ŒìŠ¤íŠ¸","content":"\nê³µì‹ í˜ì´ì§€ : https://k6.io/\n\nGrafana k6 is an open-source load testing tool that makes performance testing easy and productive for engineering teams. k6 is free, developer-centric, and extensible.\n\nUsing k6, you can test the reliability and performance of your systems and catch performance regressions and problems earlier. k6 will help you to build resilient and performant applications that scale.\n\nk6 is developed by Grafana Labs and the community.\n\n## Key Feature\n- k6 is packed with features, which you can learn all about in the documentation. Key features include:\n\n- CLI tool with developer-friendly APIs.\n- Scripting in JavaScript ES2015/ES6 - with support for local and remote modules\n- Checks and Thresholds - for goal-oriented, automation-friendly load testing\n\n## ì‚¬ìš©ì²˜ \n\nk6 users are typically Developers, QA Engineers, SDETs, and SREs. They use k6 for testing the performance and reliability of APIs, microservices, and websites. Common k6 use cases are:\n\n### Load testing\nk6 is optimized for minimal resource consumption and designed for running high load tests (spike, stress, soak tests) .\n\n### Performance and synthetic monitoring\nWith k6, you could run tests with a small amount of load to continuously validate the performance and availability of your production environment.\n\n### Chaos and reliability testing\nk6 provides an extensible architecture. You can use k6 to simulate traffic as part of your chaos experiments or trigger them from your k6 tests.\n\n## ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš° \n\nk6 is a high-performing load testing tool, scriptable in JavaScript. The architectural design to have these capabilities brings some trade-offs:\n\n### Does not run natively in a browser\nBy default, k6 does not render web pages the same way a browser does. Browsers can consume significant system resources. Skipping the browser allows running more load within a single machine.\n\nHowever, with xk6-browser, you can interact with real browsers and collect frontend metrics as part of your k6 tests.\n\n### Does not run in NodeJS\nJavaScript is not generally well suited for high performance. To achieve maximum performance, the tool itself is written in Go, embedding a JavaScript runtime allowing for easy test scripting.\n\nIf you want to import npm modules or libraries using NodeJS APIs, you can bundle npm modules with webpack and import them in your tests.\n\n## ì„¤ì¹˜ \nMac ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ `brew`ë¥¼ ì´ìš©í•˜ì—¬ ì„¤ì¹˜ í•  ìˆ˜ ìˆë‹¤. \n```\nbrew install k6\n```\nì´ì™¸ ë‹¤ë¥¸ OSëŠ” [installation í˜ì´ì§€](https://k6.io/docs/getting-started/installation/ )ë¥¼ ì°¸ê³ í•˜ë©´ ëœë‹¤.\n\n## í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ë°©ë²•\nhttps://k6.io/docs/getting-started/running-k6/ \n\n## ê²°ê³¼ê°’ í•´ì„ \nhttps://k6.io/docs/getting-started/results-output/ \n\n## 200 OK ì´ì™¸ì˜ ê°’ \nhttps://k6.io/docs/using-k6/checks/ \nabout this https://github.com/grafana/k6/issues/1828 \n\n## ê²°ê³¼ ë¹„ì¥¬ì–¼ë¼ì´ì œì´ì…˜ Grafanaë‘ë„ ì—°ê²° ê°€ëŠ¥ \nhttps://k6.io/docs/results-visualization/grafana-cloud/\n\n## Loki extension ê³¼ë„ ì—°ê²° ê°€ëŠ¥ \nhttps://grafana.com/docs/loki/latest/clients/k6/ \n\n## Postmanì—ì„œ K6ë¡œ ë„˜ì–´ì˜¤ê¸°\nhttps://github.com/grafana/postman-to-k6 \nhttps://k6.io/blog/load-testing-your-api-with-swagger-openapi-and-k6/\n\n## ì˜ˆì œë“¤\n- í™˜ê²½(env) ì— ë”°ë¼ ë‹¤ë¥¸ domain ì‚¬ìš© ë°©ë²• : https://github.com/quiiver/merino-explorations/blob/b32f61f11f2a31fa281111ddceecc76f13f89b60/load-tests/test.js\n- k6 ì œê³µí•˜ëŠ” ìƒ˜í”Œ : https://github.com/grafana/k6/tree/master/samples/REST_API_testsuite\n- redirect í…ŒìŠ¤íŠ¸ : https://github.com/grafana/k6/blob/master/samples/redirects.js \n \n## k6 learn \nhttps://github.com/grafana/k6-learn\n\n## awesome K6\nhttps://github.com/grafana/awesome-k6 \t","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/LaunchDarkly":{"title":"LaunchDarkly","content":"\n- [[notes/unleash]]ì™€ ê±°ì˜ ë¹„ìŠ·í•˜ì§€ë§Œ, enterpriseë§Œ ì œê³µí•˜ê³  ìˆë‹¤. \n-  stream ë°©ì‹ìœ¼ë¡œ polling ë°©ì‹ unleash ë³´ë‹¤ ë°˜ì˜ì´ ë” ë¹ ë¦„\n-   unleashì™€ ë‹¤ë¥´ê²Œ clientìª½ì—ì„œ ë³€ìˆ˜ë¥¼ ì¢€ ë” ììœ ë¡­ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ. (unleashëŠ” ë¯¸ë¦¬ ì •ì˜í•´ë‘ì–´ì•¼í•¨)\n-   rollout ì „ëµì—ì„œ ë¹„ìœ¨ ì¡°ì ˆ ë¿ë§Œ ì•„ë‹ˆë¼ ë³µí•© ì†ì„±ìœ¼ë¡œ ì—¬ëŸ¬ê°œ ì„ì„ ìˆ˜ ìˆìŒ\n-   [available client sideë„ ê³ ë¥¼ìˆ˜ ìˆìŒ.](https://docs.launchdarkly.com/home/getting-started/feature-flags?site=launchDarkly#making-flags-available-to-client-side-and-mobile-sdks)\n-   [toggle schedulingë„ ê°€ëŠ¥](https://docs.launchdarkly.com/home/feature-workflows/scheduled-changes)","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/Logstash":{"title":"Logstash","content":"\n## Configuration\n\n```yaml\ninput {\n  beats {\n    port =\u003e 5044\n  }\n}\n\nfilter{\n}\n\noutput {\n  s3 {\n    region =\u003e \"us-east-1\"\n    bucket =\u003e \"log-bucket\"\n    prefix =\u003e \"%{+YYYY}/%{+MM}/%{+dd}\"\n    codec =\u003e line { format =\u003e \"%{message}\"}\n  }\n}\n\n```\n\n## Input\n### filebeat\n\n### file\n\n\n## Filter\n\n## Output\n### S3\n- ``\n\n## References \n- [Using Logstash to Send Directly to an S3 Object Store](https://joshua-robinson.medium.com/using-logstash-to-send-directly-to-an-s3-object-store-34a4365a0960)","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/London-upgrade":{"title":"London Upgrade","content":"\n- ëŸ°ë˜ [[notes/hard fork]]\n- 2021ë…„ 8ì›” 5ì¼ \n- ìˆ˜ìˆ˜ë£Œ êµ¬ì¡° ê°œì„  ë° ê³µê¸‰ëŸ‰ ì¡°ì ˆ ë“± \n\n## EIP-1559\n- ê°€ìŠ¤ë¹„ë¥¼ ì¤„ì´ê¸° ìœ„í•œ ìƒˆë¡œìš´ ìˆ˜ìˆ˜ë£Œ êµ¬ì¡° ë„ì… (ìˆ˜ìˆ˜ë£Œ ì ˆê°)\n- ëŸ°ë˜ ì—…ê·¸ë ˆì´ë“œì˜ í•µì‹¬ ë‚´ìš©\n- ë¬¸ì œì \n\t- ë” ë†’ì€ ìˆ˜ìˆ˜ë£Œë¥¼ ì œì‹œí•˜ëŠ” ê±°ë˜ê°€ ë” ë¹ ë¥´ê²Œ ì´ë£¨ì–´ì§€ëŠ” êµ¬ì¡°. ì´ë¡œ ì¸í•´ ê°€ìŠ¤ë¹„ ê²½ìŸì´ ê³¼ì—´ =\u003e ì¼ë¶€ ê±°ë˜ê°€ ì§€ë‚˜ì¹˜ê²Œ ë†’ì€ ìˆ˜ìˆ˜ë£Œë¥¼ ì§€ë¶ˆí•˜ê²Œ ë¨.\n\t- ì‚¬ìš©ìê°€ ì§ì ‘ ê³„ì‚° í•´ì•¼ í•¨ =\u003e ê³¼ë„í•˜ê²Œ ë¹„ì‹¸ê²Œ ì§€ì¶œí•  ìˆ˜ë„ ìˆìŒ\n- ê°œì„ \n\t- ìë™ìœ¼ë¡œ ê³„ì‚°ëœ ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œë¡œ ì§€ë¶ˆ \n\n## EIP-3554\n- ì´ë”ë¦¬ì›€ ì±„êµ´ ë‚œì´ë„ í­íƒ„ì„ 12ì›” 1ì¼ë¡œ ì—°ê¸°\n- ë‚œì´ë„ í­íƒ„ : ì´ë”ë¦¬ì›€ í”Œë«í¼ì— ê¸°ë³¸ì  ë‚´ì¥ëœ ì½”ë“œë¡œ, ì±„êµ´ ë‚œì´ë„ë¥¼ ë†’ì´ëŠ” ì½”ë“œì´ë‹¤.Â \n\t- ë‚œì´ë„ê°€ ë†’ì•„ì§€ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ì‘ì—…ì¦ëª…(PoW)ì˜ ìˆ˜ìš”ê°€ ì¤„ì–´ë“¤ë©°, ì§€ë¶„ì¦ëª…(PoS)ì˜ ìˆ˜ìš”ê°€ ë†’ì•„ì§„ë‹¤.\n\t- ì¦‰, ì±„êµ´ ë°©ì‹ ë³€ê²½ì„ ìœ„í•œ ì½”ë“œë‹¤. ì‘ì—…ì¦ëª…(PoW) â†’ ì§€ë¶„ì¦ëª…(PoS)\n\n## EIP-3198 \n- ê¸°ë³¸ë£Œì— ëŒ€ì‘í•˜ëŠ” ì—°ì‚°ë¶€í˜¸ ë„ì…(Basefee opcode)\n\n## EIP-3529 \n- ê°€ìŠ¤ë¹„ í™˜ë¶ˆ ê¸°ëŠ¥ ì œê±° (ë¸”ë¡ í¬ê¸°ì— ìœ ì—°ì„±ì„ ë‘ëŠ” EIP-15999ë¥¼ ë°©í•´í•˜ëŠ” ê¸°ëŠ¥ì„ ì—†ì• ìëŠ” ì°¨ì›\n\n## EIP-3541 \n- 0xEF ë°”ì´íŠ¸ë¡œ ì‹œì‘í•˜ëŠ” ìƒˆ ì½˜íŠ¸ë™íŠ¸ ìƒì„± ê±°ë¶€\n- EIP(Ethereum Improvement Proposal) : ì´ë”ë¦¬ì›€ ê°œì„  ì œì•ˆ","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/NATS":{"title":"NATS","content":"- ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©ë˜ëŠ” ë©”ì„¸ì§• ë° ì´ë²¤íŠ¸ ë“œë¦¬ë¸ ì•„í‚¤í…ì³ë¥¼ ìœ„í•œ ì˜¤í”ˆì†ŒìŠ¤ ë©”ì„¸ì§• ì‹œìŠ¤í…œ\n- ê°„ë‹¨í•˜ê³  í™•ì¥ì„±ì´ ë†’ì€ ë©”ì„¸ì§• ì‹œìŠ¤í…œ\n\n## JetStream\n- ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³  ë¶„ì‚°í˜• ë°ì´í„° ì‹œìŠ¤í…œì—ì„œ ë°ì´í„°ë¥¼ ì €ì¥ ë° ê²€ìƒ‰ í•  ìˆ˜ ìˆë„ë¡ ê¸°ëŠ¥ í™•ì¥\n\n## References\n- ","lastmodified":"2023-10-02T05:51:50.81545888Z","tags":null},"/notes/NFT":{"title":"NFT","content":"- Non-Fungible Token : ëŒ€ì²´ ë¶ˆê°€ëŠ¥ í† í°\n- ëª¨ë‘ ë™ì¼í•œ ê°€ì¹˜ë¥¼ ê°€ì§€ëŠ” í™”íì™€ ë‹¬ë¦¬ **\"ê³ ìœ ì„±\"**ì„ ê°€ì§„ í† í°\n- ì°½ì‘ë¬¼ì— ëŒ€í•œ ì €ì‘ê¶Œì´ë‚˜ ì†Œìœ ê¶Œ\n- ê²Œì„ ë‚´ ìœ ë‹ˆí¬í•œ ì•„ì´í…œ ë“± ì¬í™”ì— ëŒ€í•œ ì†Œìœ ê¶Œ\n- ì˜ˆìˆ í’ˆ, ë¶€ë™ì‚°, ê³¨ë™í’ˆ ë“± ë“±ê¸°ê°€ í•„ìš”í•œ ìì‚°ì— ëŒ€í•œ ì†Œìœ ê¶Œ\n- íšŒì›ê¶Œê³¼ ê°™ì€ ìê²©ì— ëŒ€í•œ ì¦ëª… \n\n\n## Marketplace\n- OpenSea\n\n## References\n- [NFT, ëŒ€ì²´ ë¶ˆê°€ëŠ¥í•œ í† í°](https://youtu.be/P40WjHh1Hzs)\n- ","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/NoSQL-Injection":{"title":"NoSQL Injection","content":"\n\n## References\n- https://www.imperva.com/learn/application-security/nosql-injection/","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/PDF%EB%A1%9C-%EC%98%A4%EB%94%94%EC%98%A4%EB%B6%81-%EB%A7%8C%EB%93%A4%EA%B8%B0":{"title":"Pythonìœ¼ë¡œ PDF ì˜¤ë””ì˜¤ë¶ ë§Œë“¤ê¸°","content":"- `pyttsx3` : TTS(text-to-speech) ìš© (version: `2.90`)\n- `PyPDF2` : PDF íŒŒì¼ì„ ë‹¤ë£¨ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ (version : `3.0.0`)\n\n## Code \n```python \nimport sys\nimport pyttsx3\nimport PyPDF2\n\n# python main.py ./test.pdf ì¸ìë¡œ ì½ì„ íŒŒì¼ ë°›ê¸°\nfile_path = sys.argv[1]\n\nif len(sys.argv) != 2:\n\tprint(\"Insufficient arguments\")\n\tsys.exit()\n\n# binary modeë¡œ íŒŒì¼ ì½ê¸°\npdf_file = open(file_path, 'rb')\n\n# PdfFileReaderë¡œ íŒŒì¼ ì½ì„ Reader Object ìƒì„±\npdfReader = PyPDF2.PdfReader(pdf_file)\n\n# ì½ì€ ì´ í˜ì´ì§€ ìˆ˜ \npages = len(pdfReader.pages)\n\n# pyttsx3.Engine ì´ˆê¸°í™” í•´ì£¼ê¸°\nspeaker = pyttsx3.init()\n\n# í˜ì´ì§€ ëŒë©° text ì½ì–´ì˜¤ê¸° \nfor num in range(pages):\n\t# í•´ë‹¹ í˜ì´ì§€ ì½ê¸°\n\tpage = pdfReader.pages[num] # pdfReader.getPage(num)\n\t# í•´ë‹¹ í˜ì´ì§€ ë‚´ text ë½‘ì•„ë‚´ê¸° \n\ttext = page.extract_text() \n\t# ë½‘ì•„ë‚¸ text ì½ê¸° \n\tspeaker.say(text)\n\tspeaker.runAndWait() \n\n# mp3ë¡œ ì €ì¥í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ í•˜ë©´ ëœë‹¤.\nspeaker.save_to_file(text, 'audio.mp3')\nspeaker.runAndWait()\n```\n\n## GitHub Code (with Poetry)\n- https://github.com/jiyeonseo/pdf-to-tts-mp3-python \n\n## References\n- [Make Audio Book from any PDF using Python | Python Project](https://morioh.com/p/42a6957afa8a?f=5c21fb01c16e2556b555ab32)\n- [How to save pyttsx3 results to MP3 or WAV file?](https://www.geeksforgeeks.org/how-to-save-pyttsx3-results-to-mp3-or-wav-file/)\n- [Change pyttsx3 language](https://stackoverflow.com/questions/65977155/change-pyttsx3-language)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/Poetry":{"title":"Poetry","content":"\n- [Python poetry](https://python-poetry.org/)\n\nPythonì˜ ê¸°ë³¸ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì¸ pipì˜ ë¶ˆí¸í•œì  \n- ê¸°ë³¸ì ìœ¼ë¡œ global ì„¤ì¹˜ : `virtualenv`ì™€ ê°™ì€ ê°€ìƒ í™˜ê²½ì„ ë”°ë¡œ ì‘ì—…í•´ì£¼ì–´ì•¼ í•œë‹¤. \n- lock íŒŒì¼ì´ ì—†ì–´ í˜‘ì—…ì‹œ ì˜ì¡´ì„± ë²„ì „ ë¶ˆì¼ì¹˜ê°€ ì¼ì–´ë‚  ìˆ˜ ìˆìŒ. \n\n## ì¥ì \n### `poetry.lock` \n\n### virtualenv \n- ì¶”ê°€ ì‘ì—…ì—†ì´ virtualenvë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. \n\n## ì„¤ì¹˜ ë°©ë²• \n### Linux, MacOS, Windows(WSL)\n```\ncurl -sSL https://install.python-poetry.org | python3 -\n```\n\n### windows (powershell)\n```\n(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | py -\n```\n\n## ìƒˆ í”„ë¡œì íŠ¸ ì‹œì‘í•˜ê¸° \n```\npoetry new new-poetry-repository\ncd new-poetry-repository\n```\në“¤ì–´ê°€ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¡œ ë˜ì–´ìˆë‹¤. ([[notes/Tree ëª…ë ¹ì–´]] ë¥¼ ì‚¬ìš©)\n```\nnew-poetry-repository/\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ new_poetry_repository\nâ”‚Â Â  â””â”€â”€ __init__.py\nâ”œâ”€â”€ pyproject.toml\nâ””â”€â”€ tests\n    â””â”€â”€ __init__.py\n```\n\në§Œì•½, íŒ¨í‚¤ì§€ ì´ë¦„ì„ ë°”ê¾¸ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ `name`ì„ ë”°ë¡œ ì¤„ ìˆ˜ë„ ìˆë‹¤.\n```\npoetry new new-poetry-repository --name cheese-poetry\n```\n\n```\nnew-poetry-repository\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ cheese_poetry\nâ”‚Â Â  â””â”€â”€ __init__.py\nâ”œâ”€â”€ pyproject.toml\nâ””â”€â”€ tests\n    â””â”€â”€ __init__.py\n```\n\n## ì´ë¯¸ ìˆëŠ” í”„ë¡œì íŠ¸ ë‚´ì— ì„¸íŒ…í•˜ê¸°\n\n```sh\npoetry init\n```\n- `pyproject.toml` íŒŒì¼ì´ ìƒì„±ë˜ë©° ì•ˆì— ì˜ì¡´ì„±ì´ ì¶”ê°€ëœë‹¤. \n\n## ì˜ì¡´ì„± ì¶”ê°€ \n```sh\npoetry add {package}\npoetry add aioredis\n```\n\n## `pyproject.toml`\n\n```toml\n[tool.poetry]\nname = \"cheese-poetry\"\nversion = \"0.1.0\"\ndescription = \"\"\nauthors = [\"cheese \u003cseojeee@gmail.com\u003e\"]\nreadme = \"README.md\"\npackages = [{include = \"cheese_poetry\"}]\n\n[tool.poetry.dependencies]\npython = \"^3.10\"\n\n\n[build-system]\nrequires = [\"poetry-core\"]\nbuild-backend = \"poetry.core.masonry.api\"\n```\n\n### `poetry check`\n - `pyproject.toml` íŒŒì¼ validation\n\n### `poetry install`\n - `pyproject.toml` ì˜ ì˜ì¡´ì„± ë¡œì»¬ì— ì„¤ì¹˜í•˜ê¸° \n```sh\npoetry install --no-dev # dev-dependencies ë¹¼ê³  \n```\n### `poetry update`\n- ì˜ì¡´ì„± ëª¨ë‘ ì—…ë°ì´íŠ¸ í•˜ê¸° \n- `poetry.lock`ì„ ì‚­ì œí•˜ê³  ìƒˆë¡œ `poetry install` í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ ë™ì‘\n\n## poetry.lock\n- ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ì˜ ì •í™•í•œ ë²„ì „ì„ ëª…ì‹œí•˜ì—¬ ì–´ë– í•œ íŠ¹ì • ë²„ì „ì´ ì´ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©ë˜ê³  ìˆëŠ”ì§€ lock \n- ì—¬ëŸ¬ ì‚¬ëŒê³¼ í˜‘ì—…ì‹œ ë™ì¼í•œ ë²„ì „ì˜ ì˜ì¡´ì„±ì„ ê°€ì§ˆ ìˆ˜ ìˆê²Œ ë¨\n- ë§Œì•½ `poetry.lock` ì´ ì—†ë‹¤ë©´ `pyproject.toml` ì— ëª…ì‹œëœ ë‚´ìš©ì—ì„œ ê°€ì¥ ìµœì‹  ë²„ì „ì„ ë°›ê²Œ ëœë‹¤.\n\n## Virtual Environment\n```sh\n# ì„¤ì • ê°€ëŠ¥í•œ python í™˜ê²½ë“¤ í™•ì¸í•˜ê¸° \npoetry env list\n\n# venvë¡œ ì‚¬ìš©í•  python í™˜ê²½\npoetry env use python3\n\n# venv ì‚¬ìš©í•˜ì—¬ python ì‚¬ìš©í•˜ê¸° \npoetry run python ./main.py\n```\nì§€ê¸ˆ ì‚¬ìš©ì¤‘ì¸ virtual env ìœ„ì¹˜ í™•ì¸í•˜ê¸° \n```sh\npoetry show -v\n```\n\n\n## References\n- [íŒŒì´ì¬ ì˜ì¡´ì„± ê´€ë¦¬ì Poetry ì‚¬ìš©ê¸°](https://spoqa.github.io/2019/08/09/brand-new-python-dependency-manager-poetry.html)\n- [Dependency management with Python Poetry](https://realpython.com/dependency-management-python-poetry/)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/PostgreSQL":{"title":"PostgreSQL","content":"\n## Vacuum\n- DB ë””ìŠ¤í¬ ì¡°ê° ëª¨ìŒ\n- ë°ì´í„°ê°€ `update`/`delete` \n- \n### vacuum ì‹œê°„ í™•ì¸í•˜ê¸°\n```sql\nSELECT relname, last_vacuum, last_autovacuum FROM pg_stat_user_tables;\n```\n\n## pg_user\n### select all user\n```sql\nSELECT \n\tusename AS role_name, \n\tCASE \n\t\tWHEN usesuper AND usecreatedb \n\t\t\tTHEN CAST('superuser, create database' AS pg_catalog.text) \n\t\tWHEN usesuper \n\t\t\tTHEN CAST('superuser' AS pg_catalog.text) \n\t\tWHEN usecreatedb \n\t\t\tTHEN CAST('create database' AS pg_catalog.text) \n\t\tELSE \n\t\t\tCAST('' AS pg_catalog.text) \n\tEND role_attributes \t\nFROM pg_catalog.pg_user \nORDER BY role_name desc;\n```\n\n### create user\n```sql\nCREATE USER \u003cname\u003e;\nCREATE USER \u003cname\u003e WITH PASSWORD '\u003cpassword\u003e';\nALTER USER \u003cname\u003e WITH PASSWORD '\u003cpassword\u003e';\n```\n\n\n### grant privileges\n```sql\nGRANT ALL PRIVILEGES ON DATABASE \u003cdatabase\u003e TO \u003cname\u003e;\nSELECTÂ *Â fromÂ information_schema.table_privilegesÂ WHEREÂ granteeÂ =Â '\u003cname\u003e'Â LIMITÂ 5;\n```\n\n## References\n- [PostgreSQL: ë² í (VACUUM)ì„ ì‹¤í–‰í•´ì•¼ë˜ëŠ” ì´ìœ  ê·¸ë¦¬ê³  ì„±ëŠ¥ í–¥ìƒ](https://blog.gaerae.com/2015/09/postgresql-vacuum-fsm.html)\n- https://tableplus.com/blog/2018/04/postgresql-how-to-grant-access-to-users.html","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/Rate-Limiter":{"title":"ì²˜ë¦¬ìœ¨ ì œí•œ ì¥ì¹˜ Rate Limitter","content":"\n## í•„ìš”í•œ ì´ìœ \n- ì¼ì • ì‹œê°„ ë‹¹ ìš”ì²­ìˆ˜ë¥¼ ì œí•œí•¨.\n\t- e.g. RPS (Request Per Second)\n- ì„œë¹„ìŠ¤ì— í•œ ë²ˆì— ì—„ì²­ë‚œ ìˆ˜ì˜ ìš”ì²­ì„ ë°›ê²Œ ëœ ê²½ìš° ì„œë²„ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìš´ì˜í•˜ê¸° ìœ„í•´ íŠ¹ì • ìš”ì²­ì— ëŒ€í•´ì„œë§Œ í—ˆìš©í•˜ëŠ” ë°©ë²•. ìš”ì²­ì˜ ì„ê³„ì¹˜ë¥¼ ì •í•˜ì—¬ ê·¸ ê°’ì„ ì´ˆê³¼í•˜ê²Œ ë˜ë©´ ì²˜ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤. \n- íŠ¹íˆ, DDOSì™€ ê°™ì´ ë¶ˆí•„ìš”í•œ ìš”ì²­ì„ í•˜ì—¬ ì‹œìŠ¤í…œì„ ê³µê²©ì„ ë°©ì–´í•˜ê¸° ìœ„í•´ ì‚¬ìš©.\n- ìˆ˜ìš© ê°€ëŠ¥í•œ ìš”ì²­ì— ëŒ€í•´ ì²˜ë¦¬í•˜ë©°, ì´ë¡œ ì¸í•´ ì„œë²„ ë¦¬ì†ŒìŠ¤ ë¹„ìš©ì„ ì¡°ì ˆí•  ìˆ˜ ìˆê²Œ ë¨ìœ¼ë¡œì¨ ë¹„ìš© ì ˆê°ì˜ íš¨ê³¼ë„ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\nì•„ë˜ì™€ ê°™ì´ ì‹¤ì œ ì„œë¹„ìŠ¤ì— ë‹¿ê¸° ì „ ìœ íš¨í•œ ìš”ì²­ì¸ì§€ ë°›ì„ ìˆ˜ ìˆì„ì§€ì— ëŒ€í•´ Rate Limiterê°€ íŒë‹¨ í›„  ì‹¤ì œ ì„œë¹„ìŠ¤ë¡œ ìš”ì²­ì´ ê°ˆ ìˆ˜ ìˆë„ë¡ í•œë‹¤. \n\n![](https://miro.medium.com/max/720/1*maqXnVMCWj_Z28qfmB_ZgQ.webp)\n( ref : https://towardsdatascience.com/designing-a-rate-limiter-6351bd8762c6 )\n\në„ˆë¬´ ë§ì€ ìš”ì²­ì´ ì™€ì„œ ì´ë¥¼ ë§‰ì„ ê²½ìš° [HTTP status 429 Too Many Requests](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429)ë¥¼ ë°˜í™˜í•œë‹¤. ì´ëŸ¬í•œ ì¤‘ê°„ ì—­í• ì„ í•˜ëŠ” ì¥ì¹˜ë¥¼ ì£¼ë¡œ API Gatewayë¼ê³  ë¶€ë¥´ëŠ”ë°, ì²˜ë¦¬ìœ¨ ì œí•œ ë¿ë§Œ ì•„ë‹ˆë¼ SSL ì¢…ë‹¨(termination), ì¸ì¦(Autherntication), IP ì°¨ë‹¨/í—ˆìš©(deny/allow list) ë“±ì„ ì§€ì›í•˜ëŠ”ë°, í´ë¼ìš°ë“œ í”„ë¡œë°”ì´ë”ë“¤ì´ ì œê³µí•˜ëŠ” managedë¥¼ ì‚¬ìš©í• ìˆ˜ë„ ìˆê³ , ì§ì ‘ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤. \n\n## ì²˜ë¦¬ìœ¨ ì œí•œ ì•Œê³ ë¦¬ì¦˜\n### í† í° ë²„í‚· ì•Œê³ ë¦¬ì¦˜ \n\n### ëˆ„ì¶œ ë²„í‚· \n\n### ê³ ì • ìœˆë„ ì¹´ìš´í„°\n\n### ì´ë™ ìœˆë„ ë¡œê·¸\n\n### ì´ë™ ìœˆë„ ì¹´ìš´í„°\n\n## ì²˜ë¦¬ìœ¨ ì œí•œ ê·œì¹™\n\n### 1) ì‹œê°„ë‹¹ ì²˜ë¦¬ìœ¨ \n- RPS, PRM ë“± ì‹œê°„ ë‚´ ìš”ì²­ ìˆ˜ ì œí•œ\n\n\n### 2) Compute Unit \n- API endpoint ë§ˆë‹¤ ì •ë³´ë¥¼ ì¿¼ë¦¬í•˜ëŠ”ë° í•„ìš”í•œ ê³„ì‚°ì— ë”°ë¼, ê° API ìš”ì²­ì— ëŒ€í•œ ê°€ì¤‘ì¹˜ë¥¼ ë¶€ì—¬í•˜ëŠ” ë°©ë²•. ì´ ë‹¨ìœ„ë¥¼ Compute Unit ì¤„ì—¬ CUë¼ê³  ë¶€ë¥¸ë‹¤. \n- CUPS (Compute Unit Per Second) \n\n## Response\n- API ìš”ì²­ ì…ì¥ì—ì„œë„ ì–¼ë§ˆë‚˜ ë‚˜ì˜ limitì´ ë‚¨ì•˜ëŠ”ì§€, ê·¸ë¦¬ê³  ì´ˆê³¼ë˜ì—ˆë‹¤ë©´ ì–¸ì œ ë¶€í„° ë‹¤ì‹œ ìš”ì²­ì´ ê°€ëŠ¥í•œì§€ ì•Œìˆ˜ ìˆìœ¼ë©´ ë” íš¨ìœ¨ì ìœ¼ë¡œ API ìš”ì²­ì„ í•  ìˆ˜ ìˆë‹¤. \n- `x-ratelimit-limit` : ìœˆë„ìš° ë§ˆë‹¤ì˜ ì œí•œ ìˆ˜ \n- `x-ratelimit-remaining` : í˜„ì¬ ìœˆë„ìš° ë‚´ ë‚¨ì€ ìš”ì²­ ì œí•œ ìˆ˜ \n- `x-ratelimit-retry-after` : ìš”ì²­ ì œí•œì´ ë„˜ì–´ê°„ ê²½ìš°, ì–¼ë§ˆ ë’¤(ëŒ€ë¶€ë¶„ \"ì´ˆ\") ë‹¤ì‹œ ìš”ì²­ì„ ë³´ë‚´ì•¼í•˜ëŠ” ì§€\n\n## References\n- [Designing a rate limiter](https://towardsdatascience.com/designing-a-rate-limiter-6351bd8762c6)\n- [ê°€ìƒ ë©´ì ‘ ì‚¬ë¡€ë¡œ ë°°ìš°ëŠ” ëŒ€ê·œëª¨ ì‹œìŠ¤í…œ ì„¤ê³„ ê¸°ì´ˆ](http://www.yes24.com/Product/Goods/102819435)\n- [Examples of HTTP Rate Limiting Response headers](https://stackoverflow.com/questions/16022624/examples-of-http-api-rate-limiting-http-response-headers)\n- [What is a compute unit(CU)?](https://moralis.io/faq/what-is-a-compute-unit-cu/)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/Redash":{"title":"Redash","content":"\n## ì§€ì› ë°ì´í„° ì†ŒìŠ¤ \n- Amazon ê³„ì—´ : Athena, CloudWatch, DynamoDB, Redshift\n- Google ê³„ì—´ : Analytics, BigQuery, Spreadsheets\n- Microsoft Azure ê³„ì—´ : Data Warehouse / Synapse, SQL Database, SQL Server\n- Cassandra\n- Clickhouse\n- CockroachDB\n- CSV (self-hostedì—ì„œëŠ” ì§€ì›í•˜ì§€ ì•ŠìŒ)\n- MongoDB\n- PostgresQL\n- [Supported Data Sources](https://redash.io/help/data-sources/querying/supported-data-sources)\n\n## Queries\n- \n\n## Dashboards\n- \n\n## Alerts\n\n\n## References\n- [Creating and Editing Queries](https://redash.io/help/user-guide/querying/writing-queries)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/Redis-Cluster-cannot-be-connected.-Please-provide-at-least-one-reachable-node":{"title":"[redis-py Cluster] Redis Cluster cannot be connected. Please provide at least one reachable node","content":"\n[[notes/memorydb]] ë¥¼ node 2ê°œ(master + replica)ë¡œ, clientëŠ” [redis-py](https://github.com/redis/redis-py) clusterë¡œ ì—°ê²°í•˜ê³  ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤. Memory DBëŠ” Redis Clusterë¡œ êµ¬ì„±ë˜ì–´ìˆê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ nodeê°€ ë‚´ë ¤ê°€ë”ë¼ë„ ëŒ€ê¸°ì¤‘ì¸ replicaê°€ ì˜¬ë¼ê°€ê¸° ë•Œë¬¸ì— ë‚´êµ¬ì„±ì´ ë›°ì–´ë‚˜ê³ , ëª¨ë“  ë…¸ë“œì— ë˜‘ê°™ì´ ë³µì‚¬ê°€ ë˜ê¸° ë•Œë¬¸ì— ë°ì´í„°ì˜ ìœ ì‹¤ë„ ì—†ë‹¤.  \n\nredis-py ëŠ” ì•„ë˜ì™€ ê°™ì´ client ì„¤ì •ì„ í•´ì£¼ì—ˆë‹¤. \n```py\nfrom redis.asyncio.cluster import RedisCluster as AsyncRedisCluster\n\n...\n\nREDIS_CONNECTION_PARAMS = {\n\t\"password\": app_settings.redis_password,\n\t\"username\": app_settings.redis_user,\n\t\"host\": app_settings.redis_endpoint,\n\t\"port\": app_settings.redis_port,\n\t\"encoding\": \"utf-8\",\n\t\"ssl\": True,\n\t\"decode_responses\": True,\n\t\"require_full_coverage\": False,\n}\n\nself._redis_cluster = AsyncRedisCluster(**REDIS_CONNECTION_PARAMS)\n...\n```\n\nê·¸ëŸ¬ë˜ ì–´ëŠë‚ , Clientìª½ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë–¨ì–´ì¡Œë‹¤. \n```\nRedis Cluster cannot be connected. Please provide at least one reachable node: None\n```\nì¦‰, ë¶™ì„ ìˆ˜ ìˆëŠ” nodeê°€ ì—†ë‹¤ëŠ” ì—ëŸ¬ë‹¤. í™•ì¸í•œ ê²°ê³¼ ë¶„ëª… Momory DBëŠ” ë–  ìˆëŠ” ìƒíƒœì˜€ë‹¤. ë‹¤ë§Œ ì´ë²¤íŠ¸ë¥¼ í™•ì¸í•´ ë³´ì•˜ì„ ë•Œ, ì–´ë– í•œ ì´ìœ ë¡œ master nodeê°€ ë‚´ë ¤ê°„ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. \n\n![unnamed__3_](https://user-images.githubusercontent.com/2231510/218296467-ab03ff37-b8c3-4108-a684-27c882de628e.png)\n- master node ì˜€ê±´ `*-0001-002` ê°€ ì–´ë– í•œ ì´ìœ ë¡œ Failoverë˜ì–´ replica node ì˜€ë˜ `*-0001-001` ê°€ masterë¡œ ìŠ¹ê²©ë˜ì—ˆê³ ,\n- ë°”ë¡œ ì´ì–´ì„œ ë‹¤ì‹œ `*-0001-001`ì— Failover ë˜ë©° ë‹¤ì‹œ `*-0001-002`  ê°€ masterë¡œ ìŠ¹ê²©ë˜ì—ˆë‹¤. \n\nì´í›„, ìœ„ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ë‹¤. ë¶„ëª… nodeê°€ ë‚´ë ¤ê°€ë”ë¼ë„ ì„œë¹„ìŠ¤ ì¥ì•  ì—†ì´ ì˜ ë˜ì–´ì•¼ í•  ê²ƒ ê°™ì€ë° nodeë¥¼ ì°¾ì§€ ëª»í–ˆë‹¤. \n\n## MemoryDB Failover í…ŒìŠ¤íŠ¸í•˜ê¸° \n\nìš°ì„  í˜„ìƒì„ ì¬í˜„í•´ë³´ê¸° ìœ„í•´ Memory DBì˜ master nodeë¥¼ ì¼ë¶€ëŸ¬ ë‚´ë¦¬ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì•˜ë‹¤. ë‘ê°€ì§€ ë°©ë²•ìœ¼ë¡œ master nodeë¥¼ ë‚´ë ¤ë³¼ ìˆ˜ ìˆë‹¤. \n\n### 1) AWS Console\n![](https://user-images.githubusercontent.com/2231510/218296636-63f167a0-a7d6-4024-b4b4-ae147f0407d7.png)\n- AWS MomoryDB Console -\u003e í…ŒìŠ¤íŠ¸í•  í´ëŸ¬ìŠ¤í„° ì„ íƒ \u003e ìƒë‹¨ \"í”„ë¼ì´ë¨¸ë¦¬ ì¥ì•  ì¡°ì¹˜\"  \n- ì œëŒ€ë¡œ ì‹¤í–‰ ë˜ë©´ ì™¼ìª½ \"Events\" íƒ­ì— ì¥ì•  ì¡°ì¹˜ ì‹œì‘ì¸ \"FailoverSharedAPI Called\" ì™€ ì™„ë£Œ \"Recovery completed\" ë˜ëŠ” ì´ë²¤íŠ¸ë“¤ì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. \n\n### 2) AWS CLI\n```\n# Linux, macOS, Unix\naws memorydb failover-shard \\  \n Â  --cluster-nameÂ my-cluster \\  \n Â  --shard-nameÂ 0001\n\n# Windows\naws memorydb failover-shard ^  \n Â  --cluster-nameÂ my-cluster ^  \n Â  --shard-nameÂ 0001\n```\nìœ„ì™€ ê°™ì´ ìš”ì²­í•˜ë©´, ë‹¤ìŒê³¼ ê°™ì€ ì‘ë‹µê°’ì´ ì˜¨ë‹¤. \n```\n\n{  \n Â  Â Â \"Events\": [  \n Â  Â  Â  Â {  \n Â  Â  Â  Â  Â  Â Â \"SourceName\":Â \"my-cluster\",  \n Â  Â  Â  Â  Â  Â  \"SourceType\":Â \"cluster\",  \n Â  Â  Â  Â  Â  Â  \"Message\":Â \"Failover to replica node my-cluster-0001-002 completed\",  \n Â  Â  Â  Â  Â  Â  \"Date\":Â \"2021-08-22T12:39:37.568000-07:00\"  \n Â  Â  Â  Â  },  \n Â  Â  Â  Â  {  \n Â  Â  Â  Â  Â  Â Â \"SourceName\":Â \"my-cluster\",  \n Â  Â  Â  Â  Â  Â  \"SourceType\":Â \"cluster\",  \n Â  Â  Â  Â  Â  Â  \"Message\":Â \"Starting failover for shard 0001\",  \n  Â  Â  Â  Â  Â  Â \"Date\":Â \"2021-08-22T12:39:10.173000-07:00\"  \n Â  Â  Â  Â  }  \n Â  Â ]  \n }\n```\n\n### ìœ ì˜ ì‚¬í•­ \n- í´ëŸ¬ìŠ¤í„°ë‹¹ 24ì‹œê°„ì— ìµœëŒ€ 5ë²ˆ ì‚¬ìš© ê°€ëŠ¥\n- ë‹¤ë¥¸ í´ëŸ¬ìŠ¤í„°ì˜ ìƒ¤ë“œì—ì„œ ì‘ì—…ì„ ë™ì‹œì— í˜¸ì¶œ í•  ìˆ˜ ìˆë‹¤. \n- ì—°ì† í˜¸ì¶œë˜ëŠ” ê²½ìš° ì²« ë²ˆì§¸ ë…¸ë“œ êµì²´ê°€ ì™„ë£Œë˜ì–´ì•¼ ê·¸ ë‹¤ìŒ ìš”ì²­ í˜¸ì¶œ ê°€ëŠ¥í•˜ë‹¤. \n- ì´ ê¸°ëŠ¥ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë™ì‘ì„ í…ŒìŠ¤íŠ¸ í•˜ê¸° ìœ„í•œ ê²ƒì´ë©° ìš´ì˜ì„ ìœ„í•œ ê¸°ëŠ¥ì´ ì•„ë‹ˆë‹¤. ë”°ë¼ì„œ ëŒ€ê·œëª¨ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” AWS ìì²´ì ìœ¼ë¡œ í•´ë‹¹ ìš”ì²­ì„ ì°¨ë‹¨ í•  ìˆ˜ë„ ìˆë‹¤. \n\n## redis-py í™•ì¸í•˜ê¸°\n\nìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ëª‡ë²ˆ í•´ ë³¸ ê²°ê³¼, ì²«ë²ˆì§¸ ì¥ì•  ì´í›„ì—ëŠ” ë¬¸ì œì—†ì´ ì˜ ë™ì‘í•œë‹¤. í•˜ì§€ë§Œ ë‘ë²ˆì§¸ ì¥ì• ê°€ ë‚œ í›„ì—ëŠ” ê³„ì†í•˜ì—¬ ë…¸ë“œë¥¼ ì°¾ì§€ ëª»í•œë‹¤. \n\n### 1)  `reinitialize_steps` ì„¤ì • \nRedis Client ì„¤ì •ê°’ ì¤‘ `reinitialize_steps` ë¼ëŠ” ë…€ì„ì´ ìˆë‹¤.  ([redis-py/redis/cluster.py](https://github.com/redis/redis-py/blob/428d60940f386d3680a413aa327889308f82c5de/redis/cluster.py#L506-L515))\n\n\u003e reinitialize_steps (int, default: 5) â€“\n\u003e Specifies the number of MOVED errors that need to occur before reinitializing the whole cluster topology. If a MOVED error occurs and the cluster does not need to be reinitialized on this current error handling, only the MOVED slot will be patched with the redirected node. To reinitialize the cluster on every MOVED error, set reinitialize_steps to 1. To avoid reinitializing the cluster on moved errors, set reinitialize_steps to 0.\n\nì¦‰, `MOVED error`ê°€ ë‚œ slotì— ëŒ€í•´ì„œ redirected nodeë¡œ íŒ¨ì¹˜ë¥¼ í•´ì¤€ë‹¤ëŠ” ê²ƒì¸ë°. \n`MOVEDError`([redis-py/redis/exceptions.py](https://github.com/redis/redis-py/blob/master/redis/exceptions.py#L173-L180))ë€ clusterì—ì„œ í•´ë‹¹ í‚¤ê°€ ì—†ëŠ” ë…¸ë“œì—ë‹¤ê°€ ìš”ì²­í•˜ë©´ Cluster ì—ì„œ ì˜¬ë°”ë¥¸ ë…¸ë“œë¥¼ ì•Œë ¤ì£¼ëŠ” Errorë‹¤. \n```py \nclass MovedError(AskError):\n    \"\"\"\n    Error indicated MOVED error received from cluster.\n    A request sent to a node that doesn't serve this key will be replayed with\n    a MOVED error that points to the correct node.\n    \"\"\"\n\n    pass\n```\n\nRedis clientë¥¼ í†µí•´ commandë¥¼ ì‹¤í–‰í•˜ì˜€ì„ ë•Œ MOVED errorê°€ ë°œìƒí•˜ê²Œ ë˜ë©´ ë‚´ë¶€ì—ì„œ `_should_reinitialized` í•¨ìˆ˜ê°€ ë¶ˆë¦¬ìš°ê²Œ ëœë‹¤. ([redis-py//redis/cluster.py](https://github.com/redis/redis-py/blob/master/redis/cluster.py#L1134-L1147)) \n```py\n...\n\texcept MovedError as e:\n\t\t# First, we will try to patch the slots/nodes cache with the\n\t\t# redirected node output and try again. If MovedError exceeds\n\t\t# 'reinitialize_steps' number of times, we will force\n\t\t# reinitializing the tables, and then try again.\n\t\t# 'reinitialize_steps' counter will increase faster when\n\t\t# the same client object is shared between multiple threads. To\n\t\t# reduce the frequency you can set this variable in the\n\t\t# RedisCluster constructor.\n\t\tself.reinitialize_counter += 1\n\t\tif self._should_reinitialized():\n\t\t\tself.nodes_manager.initialize()\n\t\t\t# Reset the counter\n\t\t\tself.reinitialize_counter = 0\n\t\telse:\n\t\t\tself.nodes_manager.update_moved_exception(e)\n\n\t\tmoved = True\n...\n```\n\nì´ í•¨ìˆ˜ ë‚´ì—ì„œ Redis Client ì„¤ì •ì‹œ ë„˜ê²¨ì£¼ì—ˆë˜ `reinitialized_steps` ê°€ ì‚¬ìš©ëœë‹¤. \n```py\ndef _should_reinitialized(self):\n\t# To reinitialize the cluster on every MOVED error,\n\t# set reinitialize_steps to 1.\n\t# To avoid reinitializing the cluster on moved errors, set\n\t# reinitialize_steps to 0.\n\n\tif self.reinitialize_steps == 0:\n\t\treturn False\n\telse:\n\t\treturn self.reinitialize_counter % self.reinitialize_steps == 0\n```\n\u0008ë”°ë¼ì„œ, ë„˜ê²¨ì¤€ në²ˆì˜ MOVED errorê°€ ë°œìƒí•˜ì˜€ì„ ë•Œ, ê·¸ ë•Œ reinitialize í•´ì£¼ëŠ” ë¡œì§ì´ë‹¤. MOVEDê°€ ì¼ì–´ë‚  ë•Œ ë§ˆë‹¤ reinitialize í•´ì£¼ë ¤ë©´ `1`ë¡œ, ì¼ì–´ë‚˜ì§€ ì•Šê²Œ í•˜ë ¤ë©´ `0`ìœ¼ë¡œ ì„¸íŒ…í•˜ë©´ ëœë‹¤. (ê¸°ë³¸ ê°’ì€ `5`ì´ë‹¤)\n\nìœ„ ìƒí™©ì„ ë¯¸ë¤„ ë³´ì•˜ì„ ë•Œ, ë³€ê²½ëœ nodeë¥¼ ì•Œì•„ì±„ì§€ ëª»í•˜ì—¬ reachable nodeë¥¼ ëª»ì°¾ì€ ê±´ê°€ ì‹¶ì–´ `1`ë¡œ ì„¤ì •í•˜ê³  ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì•˜ë‹¤. í•˜ì§€ë§Œ ì—¬ì „íˆ í•´ê²°ë˜ì§€ ëª»í–ˆë‹¤. \n\n### 2) `NodeManager` ì´ìŠˆ\n\nì •í™•í•˜ê²Œ ì € ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ì¼ì–´ë‚˜ëŠ” ë¶€ë¶„ë¶€í„° ë‹¤ì‹œ í™•ì¸ì„ í•˜ì˜€ë‹¤. \nì—ëŸ¬ê°€ ë‚œ ë¶€ë¶„ì€ ì•„ë˜ ì½”ë“œì´ë‹¤. ([redis-py/redis/cluster.py](https://github.com/redis/redis-py/blob/master/redis/cluster.py#L1551-L1555))\n```py\nclass NodesManager:\n...\n\tdef initialize(self):\n\t...\n\tstartup_nodes_reachable = False\n\t\n\tfor startup_node in self.startup_nodes.values():\n\t\tstartup_nodes_reachable = True\n\t\n\t...\n\tif not startup_nodes_reachable:\n\t\traise RedisClusterException(\n\t\t\tf\"Redis Cluster cannot be connected. Please provide at least \"\n\t\t\tf\"one reachable node: {str(exception)}\"\n\t\t) from exception\n```\n\n`NodeManager` ì—ì„œ initialize ì‹œì— reachableí•œ nodeê°€ ì—†ëŠ” ê²½ìš° ìƒê¸°ëŠ” ì´ìŠˆë‹¤. ì—¬ê¸°ì„œ `startup_nodes_reachable`ëŠ” `NodeManager` ìƒì„±ì‹œ ë„˜ì–´ì˜¨ startup_nodesë¥¼ ë£¨í”„ë¥¼ ëŒë©° ì„¤ì •ì´ ë˜ëŠ”ë° ì´ë•Œ, ëª¨ë“  nodeê°€ reachable í•˜ì§€ ëª»í–ˆë˜ ê²ƒì´ì˜€ë‹¤. \n\nì—¬ê¸°ì„œ ì‚¬ìš©í•œ `self.startup_nodes`ëŠ” `RedisCluster` ì²˜ìŒ ìƒì„±ë  ë•Œ url í˜¹ì€ host, port ì •ë³´ë¥¼ í†µí•´ Clusterì— ë“±ë¡ëœ nodeë“¤ì„ í•œë²ˆì— ê°€ì ¸ì™€ ë“±ë¡ì„ í•´ì¤€ë‹¤. ([redis-py/redis/cluster.py](https://github.com/redis/redis-py/blob/master/redis/cluster.py#L534-L554)) \n\n```py\nclass RedisCluster(AbstractRedisCluster, RedisClusterCommands):\n...\ndef __init__(\n\tself,\n\thost: Optional[str] = None,\n\tport: int = 6379,\n\tstartup_nodes: Optional[List[\"ClusterNode\"]] = None,\n\tcluster_error_retry_attempts: int = 3,\n\tretry: Optional[\"Retry\"] = None,\n\trequire_full_coverage: bool = False,\n\treinitialize_steps: int = 5,\n\tread_from_replicas: bool = False,\n\tdynamic_startup_nodes: bool = True,\n\turl: Optional[str] = None,\n\t**kwargs,\n\t):\n\t...\n\tif url is not None:\n\t\turl_options = parse_url(url)\n\t\t...\n\t\tkwargs.update(url_options)\n\t\thost = kwargs.get(\"host\")\n\t\tport = kwargs.get(\"port\", port)\n\t\tstartup_nodes.append(ClusterNode(host, port))\n\telif host is not None and port is not None:\n\t\tstartup_nodes.append(ClusterNode(host, port))\n\t...\n\tself.nodes_manager = NodesManager(\n\t\tstartup_nodes=startup_nodes, # ì—¬ê¸°! \n\t\tfrom_url=from_url,\n\t\trequire_full_coverage=require_full_coverage,\n\t\tdynamic_startup_nodes=dynamic_startup_nodes,\n\t\t**kwargs,\n\t)\n```\n\nì´ ê³¼ì •ì€ RedisClientê°€ ì²˜ìŒ init ë ë•Œ ìƒì„±í•œ  `startup_nodes` ë¡œ `__init__` ì´í›„ì—ëŠ” ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ì²˜ìŒ RedisClient ê°ì²´ê°€ ìƒì„±í•  ë•Œ ê°€ì§€ê³  ì˜¨ nodeë¡œ ê³„ì†í•˜ì—¬ initializeë¥¼ í•˜ëŠ” ê²ƒì´ë‹¤. `NodeManager`ì—ì„œëŠ” nodeì˜ IP addrë¥¼ ë³´ê³  ìˆê¸° ë•Œë¬¸ì—, nodeê°€ ë‚´ë ¤ê°”ë‹¤ ë‹¤ì‹œ ëœ¨ë©´ì„œ IPê°€ ë³€ê²½ë˜ë©´ì„œ `NodeManager`ì—ì„œëŠ” í•´ë‹¹ nodeë¥¼ ì°¾ì„ ìˆ˜ ì—†ë‹¤.\n\në‚´ ìƒí™©ì˜ ê²½ìš° clusterì— ìœ íš¨í•œ nodeê°€ ì²˜ìŒ ëœ° ë•Œ `startup_node` ë¡œ ë“±ë¡ë˜ì—ˆê³  2ë²ˆ failoverë¥¼ í•˜ê²Œë˜ë©´ ë” ì´ìƒ ì´ Cluster Clientê°€ ì•Œ ìˆ˜ ìˆëŠ” nodeë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— ë” ì´ìƒ reachable nodeê°€ ì—†ëŠ” ê²ƒì´ì˜€ë‹¤.ì°¾ì•„ë³´ë‹ˆ [ì´ë¯¸ 2022ë…„ 11ì›”ì— redis-py issue](https://github.com/redis/redis-py/issues/2472)ë¡œ ì˜¬ë¼ì™€ìˆëŠ” ìƒíƒœì˜€ê³ , 2023ë…„ 2ì›” í˜„ì¬ ì•„ì§ fixê°€ ë˜ì§€ ì•Šì€ ìƒíƒœì´ë‹¤. ì´ìƒì ì¸ ë°©ë²•ì€ Clientê°€ reinitialize ë ë•Œ, \në¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì—…ë°ì´íŠ¸ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì„ ìˆ˜ë§Œì€ ì—†ì–´ exception ë°œìƒì‹œ ë‹¤ì‹œ Client ìì²´ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ì—¬ `__init__`ì„ ë‹¤ì‹œ í•˜ì—¬ nodeë¥¼ ì°¾ì„ ìˆ˜ ìˆê²Œ ì„ì‹œë°©í¸ì„ ì¶”ê°€í–ˆë‹¤. ","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/Redis-OM-Python":{"title":"Redis OM Python","content":"- [Object Mapper for Redis and Python](https://github.com/redis/redis-om-python)\n- high-level ì¶”ìƒí™”ë¡œ ë°ì´í„° ëª¨ë¸ê³¼ ì¿¼ë¦¬ë¥¼ ì½”ë“œë¡œ í¸í•˜ê²Œ í• ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬\n- ì¸ë©”ëª¨ë¦¬ DBì¸ Redisì—ì„œë„ ê¸°ì¡´ RDB ë¼ì´ë¸ŒëŸ¬ë¦¬(SQLAlchemy, Peewee, Django ORM ë“±)ì—ì„œì™€ ê°™ì´ **declarative model**ë¡œ ë°ì´í„°ë¥¼ ë‹¤ë£° ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. \n- **Pydantic** ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ ê¸°ëŠ¥ ì—­ì‹œ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. \n- Queryë¬¸ê³¼ Secondary indexes  ì œê³µ. \n- ë™ê¸°, ë¹„ë™ê¸°(asyncio) ëª¨ë‘ ì œê³µ.\n- Python ë¿ë§Œ ì•„ë‹ˆë¼ [.NET](https://github.com/redis/redis-om-dotnet), [Node.js](https://github.com/redis/redis-om-node), [Spring/Java](https://github.com/redis/redis-om-spring) ë“± ë‹¤ì–‘í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì œê³µí•˜ê³  ìˆë‹¤. \n\n## ì„¤ì¹˜í•˜ê¸° \n```sh\n# With pip\n$ pip install redis-om\n\n# Or, using Poetry\n$ poetry add redis-om\n```\n\n## Redis ì—°ê²°\n```py\n# Modelë§ˆë‹¤ redis connectionì„ ì—°ê²°í•˜ëŠ” ê²½ìš°\nCustomer.Meta.database = get_redis_connection(url=\"redis://localhost:6379\",\n                          decode_responses=True))\n\n# ì „ì²´ ê°™ì€ redis connectionì¸ ê²½ìš° \nredis = get_redis_connection()\nMigrator(redis).run()\n```\n\n## Base models ë§Œë“¤ê¸°\n- `HashModel` : Hash í˜•ì‹ìœ¼ë¡œ redisì— ê°’ì„ ì €ì¥.\n- `JsonModel` : Json object í˜•ì‹ìœ¼ë¡œ redisì— ê°’ì„ ì €ì¥.\n\n```py\nimport datetime\nfrom typing import Optional\nfrom pydantic import EmailStr\nfrom redis_om import HashModel\n\nclass Customer(HashModel):\n\tfirst_name: str\n\tlast_name: str\n\temail: EmailStr\n\tjoin_date: datetime.date\n\tage: int\n\tbio: Optional[str]\n\nandrew = Customer( # andrewë¼ëŠ” Customer ê°ì²´ ìƒì„±\n\tfirst_name=\"Andrew\",\n\tlast_name=\"Brookins\",\n\temail=\"andrew.brookins@example.com\",\n\tjoin_date=datetime.date.today(),\n\tage=38,\n\tbio=\"Python developer, works at Redis, Inc.\"\n)\n\n# ëª¨ë¸ì€ unique PKë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•œë‹¤.\nprint(andrew.pk) # (Redis í†µì‹  ë”°ë¡œ í•„ìš” ì—†ìŒ.)\n# \u003e '01FJM6PH661HCNNRC884H6K30C'\n\n# `save()` í˜¸ì¶œë¡œ Redisì— ëª¨ë¸ ì €ì¥ \nandrew.save()\n\n# pkë¡œ Customer ì—ì„œ ê°ì²´ë¥¼ ì°¾ì„ ìˆ˜ë„ ìˆë‹¤.\nassert Customer.get(andrew.pk) == andrew\n```\n- ìë™ìœ¼ë¡œ ìƒì„±ë˜ëŠ”  PKëŠ” unique í•˜ë©° ì •ë ¬ ê°€ëŠ¥í•˜ë‹¤. (sortable)\n- ì €ì¥í•˜ê²Œ ë˜ë©´ defaultëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì €ì¥ëœë‹¤. \n\t- Key :  `:{package}:{class_name}:{pk}`\n\t- Value : pk, ì •ì˜ëœ fieldë“¤\n![](https://user-images.githubusercontent.com/2231510/209757427-59aab035-d09c-4332-ae86-32375257108f.png)\nì§ì ‘ ì›í•˜ëŠ” ë‚´ë¶€ ê°’ìœ¼ë¡œ `pk`ê°’ ì§€ì •í•´ ì¤„ ìˆ˜ ìˆë‹¤. ì´ ê²½ìš°,  ë”°ë¡œ PK fieldê°€ ìƒì„±ë˜ì§€ ì•ŠëŠ”ë‹¤.\n```py\nclass Customer(HashModel):\n\t#  `:{package}:{class_name}:{first_name}` ìœ¼ë¡œ í‚¤ê°€ ìƒì„±ëœë‹¤.\n\tfirst_name: str = Field(primary_key=True) \n\tlast_name: str\n\temail: EmailStr\n\tjoin_date: datetime.date\n\tage: int\n\tbio: Optional[str]\n\n...\nCustomer.get(f\"{first_name}\") # PKë¡œ ì¿¼ë¦¬ì‹œ ì§€ì • PKë¡œ ì°¾ì„ ìˆ˜ ìˆë‹¤. \n```\n![](https://user-images.githubusercontent.com/2231510/209892848-aecf280a-f42a-4c35-8fda-736b27aa5f01.png)\n\n### Globally unique primary keys\n- Redis OMì€ ìë™ìœ¼ë¡œ ìœ ë‹ˆí¬ í‚¤ê°’ì„ ìƒì„±í•˜ë©° ì´ ê°’ìœ¼ë¡œ ê°ì²´ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ê²€ìƒ‰ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. \n- ê°ì²´ ìƒì„±ì‹œ ë°”ë¡œ ë°˜í™˜ë˜ë©° Redisì™€ì˜ í†µì‹ ì€ ë”°ë¡œ í•„ìš”í•˜ì§€ ì•Šë‹¤. \n- ì´ë ‡ê²Œ í•  ìˆ˜ ìˆëŠ” ê²ƒì€ [[notes/ULID]] ìŠ¤í™ì„ ë”°ë¥´ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤. \n\n### BaseModel `Meta` class\nê¸°ë³¸ì ìœ¼ë¡œ `:{package}:{class_name}:{pk}` ì˜ í‚¤ êµ¬ì¡°ë¥¼ ê°–ê³  ìˆê¸° ë•Œë¬¸ì—, ë‚˜ì¤‘ì— ë¦¬íŒ©í† ë§ìœ¼ë¡œ ì¸í•˜ì—¬ íŒŒì¼ì˜ ìœ„ì¹˜ê°€ ë³€ê²½ë˜ê±°ë‚˜ classì˜ ì´ë¦„ì´ ë³€í•˜ê²Œ ë˜ë©´ ë°ì´í„°ë¥¼ ì°¾ì„ë•Œ ì°¾ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤. ì´ë¥¼ ëŒ€ë¹„í•˜ì—¬, ë‚˜ì—ê²Œ ë§ëŠ” key ë„¤ì´ë°ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.  Base Modelì˜ ê¸°ë³¸ Meta classë¦´ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ëª¨ì–‘ìœ¼ë¡œ ë˜ì–´ìˆìœ¼ë©° í•„ìš”ì— ë”°ë¼ ì„¸íŒ…í•´ì£¼ë©´ ëœë‹¤. \n```py\n@dataclasses.dataclass\nclass DefaultMeta:\n\tglobal_key_prefix: Optional[str] = None\n\tmodel_key_prefix: Optional[str] = None\n\tprimary_key_pattern: Optional[str] = None\n\tdatabase: Optional[redis.Redis] = None\n\tprimary_key: Optional[PrimaryKey] = None\n\tprimary_key_creator_cls: Optional[Type[PrimaryKeyCreator]] = None\n\tindex_name: Optional[str] = None\n\tembedded: Optional[bool] = False\n\tencoding: str = \"utf-8\"\n\nclass Customer(HashModel):\n\tfirst_name: str\n\tlast_name: str\n\t...\n\n\tClass Meta:\n\t\tglobal_key_prefix = \"cheese_project\"\n\t\tmodel_key_prefix = \"helloworld\" \n\t\tprimary_key_pattern = \"customer:{pk}\" \n```\n- `global_key_prefix` : ê°€ì¥ ì• `{global_key}:` prefix (default : `None`) (ex. `cheeseproject:{package}:{pk}` )\n- `model_key_prefix` : `{package}` ìª½ (ex. `cheeseproject:helloworld:{pk}` )\n- `primary_key_pattern` : `{pk}` ìª½ (ex. `cheeseproject:helloworld:customer:{pk}`)\n\n## Data validation with Pydantic\n- ê¸°ì¡´ ë ˆë””ìŠ¤ì—ì„œëŠ” ë°ì´í„° ìŠ¤í‚¤ë§ˆë¥¼ ê°•ì œí•˜ì§€ ì•Šê³  ìˆì§€ë§Œ Redis OMì˜ Pydantic modelì„ ì´ìš©í•˜ë©´ ë‹¤ë¥¸ RDBì—ì„œì™€ ê°™ì´ validationì„ ì²´í¬ í•  ìˆ˜ ìˆë‹¤. \n\n```py\ntry:\n\tCustomer(\n\t\tfirst_name=\"Andrew\",\n\t\tlast_name=\"Brookins\",\n\t\temail=\"Not an email address!\",\n\t\tjoin_date=datetime.date.today(),\n\t\tage=38,\n\t\tbio=\"Python developer, works at Redis, Inc.\"\n\t)\nexcept ValidationError as e:\n\tprint(e)\n\t\"\"\"\n\tpydantic.error_wrappers.ValidationError: 1 validation error for Customer\n\temail\n\tvalue is not a valid email address (type=value_error.email)\n\t\"\"\"\n```\n\n## Query expressions\n- ORMì˜ ë˜ë‹¤ë¥¸ ê°•ë ¥í•œ ë¬´ê¸°ëŠ” APIë¥¼ ì´ìš©í•œ ì¿¼ë¦¬ì´ë‹¤. Redis OM ì—­ì‹œ [RediSearch](https://redis.com/modules/redis-search/) ë¥¼ ì´ìš©í•˜ì—¬ Redisì—ì„œë„ DBì²˜ëŸ¼ ì¿¼ë¦¬ ë° ì¸ë±ì‹±ì„ í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤. \n- AWS memoryDBëŠ” RediSearchê°€ ì„¤ì¹˜ê°€ ì•ˆë˜ì–´ìˆì–´ ì•„ë˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.  \n\t- AWSì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ Redisì—ì„œ ì§ì ‘ ì œê³µí•˜ê³  ìˆëŠ” [Redis Enterprise Cloud](https://aws.amazon.com/marketplace/pp/prodview-mwscixe4ujhkq) ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.\n```py\nfrom redis_om import get_redis_connection\n\nclass Customer(HashModel):\n\tfirst_name: str\n\tlast_name: str = Field(index=True) # ì¸ë±ì‹±í•  í‚¤ë¥¼ ì •í•´ì£¼ê³  \n\temail: EmailStr\n\tjoin_date: datetime.date\n\tage: int = Field(index=True)\n\tbio: Optional[str]\n\n# last nameì´ \"Brookins\" ì¸ ëª¨ë“  customers\nCustomer.find(Customer.last_name == \"Brookins\").all()\n```\n\n### Embedded model\n- `HashModel`ì—ì„œëŠ” List, Set, Hashì™€ ê°™ì€ ë‹¤ë¥¸ íƒ€ì…ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤\n- `JsonModel` ì—ì„œëŠ” ê°€ëŠ¥í•˜ë‹¤. \n```py\nfrom redis_om import EmbeddedJsonModel, JsonModel, Field\n\nclass Address(EmbeddedJsonModel):\n\taddress_line_1: str\n\taddress_line_2: Optional[str]\n\tcity: str = Field(index=True)\n\tstate: str = Field(index=True)\n\tcountry: str\n\tpostal_code: str = Field(index=True)\n\nclass Customer(JsonModel):\n\tfirst_name: str = Field(index=True)\n\tlast_name: str = Field(index=True)\n\temail: str = Field(index=True)\n\tjoin_date: datetime.date\n\tage: int = Field(index=True)\n\tbio: Optional[str] = Field(index=True, full_text_search=True, default=\"\")\n\taddress: Address\n\n# \"San Antonio, TX\"ì— ì‚¬ëŠ” ëª¨ë“  customers êµ¬í•˜ê¸° \nCustomer.find(Customer.address.city == \"San Antonio\",\n\t\t\t\tCustomer.address.state == \"TX\")\n```\n\n### ë‹¤ë¥¸ Redis ëª…ë ¹ì–´ ì‚¬ìš©í•˜ê¸° \n```py\nfrom redis_om import HashModel\n\nclass Demo(HashModel):\n    some_field: str\n\nredis_conn = Demo.db()\nredis_conn.sadd(\"myset\", \"a\", \"b\", \"c\", \"d\")\n\nprint(redis_conn.sismember(\"myset\", \"e\")) # False\nprint(redis_conn.sismember(\"myset\", \"b\")) # True\n```\n\n## Asynchronous í•˜ê²Œ ì‚¬ìš©í•˜ê¸°\nRedis OMì€ Asyncioë„ ëª¨ë‘ ì§€ì›í•˜ê³  ìˆë‹¤. \n- `aredis` moduleì—ì„œ import ë°›ì•„ì•¼ í•œë‹¤. \n```py\n# asynchronously\nfrom aredis_om import HashModel, NotFoundError  \nfrom aredis_om import get_redis_connection\n```\n- Query ë°©ë²•\n```py\nfrom aredis_om import HashModel\n\nclass Customer(HashModel):\n\tfirst_name: str\n\t...\n\nawait Customer.all_pks()\n```\n\n## Redis Clusterì—ì„œ ì‚¬ìš©í•˜ê¸° \n\nAWS MemoryDB ì™€ ê°™ì€ ìƒìš© ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ê²½ìš°, í˜¹ì€ ê°€ìš©ì„±ì„ ìœ„í•˜ì—¬ Redis cluster êµ¬ì„±í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ì•„ë˜ì™€ ê°™ì´ Redis Clientë¥¼ ì§ì ‘ ì£¼ì…í•´ì£¼ë©´ ëœë‹¤. \n\n```py\nfrom redis.asyncio.cluster import RedisCluster as AsyncRedisCluster\n\n\nREDIS_DATA_URL = f\"rediss://{app_settings.redis_user}:{app_settings.redis_password}@{app_settings.redis_endpoint}:{app_settings.redis_port}\"\nself._redis_cluster = AsyncRedisCluster.from_url(REDIS_DATA_URL,\n\t\t\t\t\t\t\t\t\t\t\t\tdecode_responses=True,\n\t\t\t\t\t\t\t\t\t\t\t\trequire_full_coverage=False)\n\nCustomer.Meta.database = self._redis_cluster\n```\n\n## References\n- [Introducing Redis OM for python](https://redis.com/blog/introducing-redis-om-for-python/)\n- [Introducing the Redis OM Client Libraries](https://redis.com/blog/introducing-redis-om-client-libraries/)\n- [Redis OM Python](https://redis.io/docs/stack/get-started/tutorials/stack-python/)\n- [FastAPI Integration](https://github.com/redis/redis-om-python/blob/main/docs/fastapi_integration.md) - asynchronous example code\n- [Flask Integration](https://github.com/redis-developer/redis-om-python-flask-skeleton-app) - synchronous example code","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/Redis-troubleshooting":{"title":"Redis íŠ¸ëŸ¬ë¸”ìŠˆíŒ…","content":"\n## \"WRONGTYPE Operation against a key holding the wrong kind of value\"\n- RedisëŠ” [ì—¬ëŸ¬ ë°ì´í„° íƒ€ì…](https://redis.io/docs/data-types/)ì„ ì œê³µí•œë‹¤. ê°ê°ì— ë§ëŠ” ëª…ë ¹ì–´ë¥¼ ì¨ ì£¼ì–´ì•¼ í•˜ëŠ”ë° ì‹¤ì œ í‚¤ ê°’ì˜ íƒ€ì…ê³¼ ëª…ë ¹ì–´ê°€ ë§ì§€ ì•Šìœ¼ë©´ ì´ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë‚œë‹¤. \n- ì‹¤ì œ valueì˜ íƒ€ì…ê³¼ ëª…ë ¹ì–´ê°€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸ í•„ìš”\n\t- value íƒ€ì… í™•ì¸ ëª…ë ¹ì–´ : `type \u003ckey\u003e`\n\n### íƒ€ì…ë³„ ê°’ ê°€ì ¸ì˜¤ëŠ” ëª…ë ¹ì–´ \n- type `string` -\u003e `GET \u003ckey\u003e`, `MGET \u003ckey\u003e`\n\t- [INCR](https://redis.io/commands/incr/) ì€ string ê°’ë„ integerë¡œ íŒŒì‹±í•˜ì—¬ +1 í•´ì¤€ë‹¤. \n- type `hash` -\u003e `HGET \u003ckey\u003e` , `HMGET \u003ckey\u003e`\n- type `list` -\u003e `Irange \u003ckey\u003e \u003cstart\u003e \u003cend\u003e`\n- type `sets` -\u003e `smembers \u003ckey\u003e`\n- type `sorted sets` -\u003e `ZRANGEBYSCORE \u003ckey\u003e \u003cmin\u003e \u003cmax`\n\n### References\n- [WRONGTYPE Operation against a key holding the wrong kind of value php](https://stackoverflow.com/questions/37953019/wrongtype-operation-against-a-key-holding-the-wrong-kind-of-value-php)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/Reverse-proxy-server-with-FastAPI":{"title":"FastAPIë¡œ reverse proxy server ë§Œë“¤ê¸°","content":"[[notes/Rate Limiter]] ì™€ ê°™ì´ ì¤‘ê°„ì— Auth, Rate Limit, IP Ban ë“± ê¸°ëŠ¥ì„ í•˜ëŠ” ì¤‘ê°„ Gateway ì„œë²„ë¡œ ì‚¬ìš©ì‹œ ì•„ë˜ì™€ ê°™ì´ ë§Œë“¤ ìˆ˜ ìˆë‹¤.\n\n```python\nimport httpx\nfrom fastapi import FastAPI, Request\n\nfrom starlette.requests import Request\nfrom starlette.responses import StreamingResponse\nfrom starlette.background import BackgroundTask\n\napp = FastAPI(docs_url=None, redoc_url=None, openapi_url=None)\n\nproxy_base_host = \"localhost\"\nproxy_base_port = 8000\nclient = httpx.AsyncClient(base_url=f\"http://{proxy_base_host}:{proxy_base_port}\")\n\nasync def _reverse_proxy(request: Request):\n    url = httpx.URL(path=request.url.path,\n                    query=request.url.query.encode(\"utf-8\"))\n\t_headers = {\n\t\t**request.headers,\n\t\t\"host\" : proxy_base_host\n\t}\n    rp_req = client.build_request(request.method, url,\n                                  headers=_headers,\n                                  content=await request.body())  \n    rp_resp = await client.send(rp_req, stream=True) \n    return StreamingResponse(\n        rp_resp.aiter_raw(),\n        status_code=rp_resp.status_code,\n        headers=rp_resp.headers,\n        background=BackgroundTask(rp_resp.aclose),\n    )\n\napp.add_route(\"/{path:path}\",\n              _reverse_proxy, [\"GET\", \"POST\"])\n```\n\n## References\n- [Can fastapi proxy another site as a response to the request?](https://github.com/tiangolo/fastapi/issues/1788)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/SQL-Injection":{"title":"SQL Injection","content":"\n## References \n- https://owasp.org/www-community/attacks/SQL_Injection","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/TimescaleDB-Operational-Query":{"title":"TimescaleDB ìš´ì˜ ì¿¼ë¦¬","content":"---\n## Timescale DB Version í™•ì¸\n```sql\nSELECT extversion FROM pg_extension where extname = 'timescaledb';\n```\n\n## Hypertable ë§Œë“¤ê¸°\n```sql\nSELECT create_hypertable('public.cheese_table_name', 'time');\n```\n\n## Hypertable interval ì„¤ì •í•˜ê¸°\n```sql\nSELECT set_chunk_time_interval('public.cheese_table_name', INTERVAL '24 hours');\nSELECT set_chunk_time_interval('public.cheese_table_name', INTERVAL '3 days');\n```\n- doc : [Change hypertable chunk intervals](https://docs.timescale.com/timescaledb/latest/how-to-guides/hypertables/change-chunk-intervals/#change-the-chunk-interval-length-on-an-existing-hypertable)\n\n## í…Œì´ë¸” ì‚¬ì´ì¦ˆ í™•ì¸í•˜ê¸° \n```sql\nSELECT table_name, pg_size_pretty(pg_relation_size(quote_ident(table_name))) , pg_relation_size(quote_ident(table_name)) \nFROM information_schema.tables \nWHERE table_schema = 'public' \nORDER BY 3 \n```\n\n## Internal Table ê¹Œì§€ ëª¨ë‘ ì‚¬ì´ì¦ˆ í™•ì¸í•˜ê¸° (hypertable, compressed ëª¨ë‘ í¬í•¨ )\n```sql\n\n\nSELECT table_schema, table_name, pg_size_pretty(pg_relation_size('\"'||table_schema||'\".\"'||table_name||'\"')) , pg_relation_size('\"'||table_schema||'\".\"'||table_name||'\"') \nFROM information_schema.tables \nORDER BY 4\n```\n\n## Compression í•˜ê¸°\n```sql\n\n-- 5ì¼ë³´ë‹¤ ì˜¤ë˜ëœ chunk ì°¾ê¸° \nSELECT show_chunks('cheese_table_name', older_than =\u003e INTERVAL '5 days');\n\n-- íŠ¹ì • chunk compression í•˜ê¸° \nSELECT compress_chunk( '\u003cchunk_name\u003e');\nSELECT compress_chunk('_timescaledb_internal._hyper_5_53187_chunk');\n\n-- compression ê²°ê³¼ í™•ì¸ \nSELECT * FROM chunk_compression_stats('example');\n\n-- ê¸°ê°„ ë‚´ compression ì•ˆëœê²Œ ìˆëŠ” ê²½ìš° ìˆ˜ë™ compression \nSELECT compress_chunk(i, if_not_compressed =\u003e true)\n    FROM show_chunks(\n        'example',\n        now()::timestamp - INTERVAL '1 week',\n        now()::timestamp - INTERVAL '3 weeks'\n    ) i;\n\n```\n\ndoc : [Manual compression](https://docs.timescale.com/timescaledb/latest/how-to-guides/compression/manually-compress-chunks/)\n\n## Decompression í•˜ê¸°\n```sql\nSELECT decompress_chunk('_timescaledb_internal.\u003cchunk_name\u003e');\n```\n\ndoc : [Decompression](https://docs.timescale.com/timescaledb/latest/how-to-guides/compression/decompress-chunks/)[](https://docs.timescale.com/timescaledb/latest/how-to-guides/compression/decompress-chunks/)\n\n## Compressionëœ Hypertableì— ë°ì´í„° ë‹¤ì‹œ ë„£ê¸° (Backfill)\n```sql\n-- chunk í™•ì¸í•˜ê¸° \nSELECT show_chunks('public.cheese_table_name'); \n\n-- policy ë¨¼ì € í™•ì¸í•˜ê¸° \nSELECT j.job_id\n    FROM timescaledb_information.jobs j\n    WHERE j.proc_name = 'policy_compression'\n        AND j.hypertable_name = 'public.cheese_table_name'; -- 1006\n\n-- policy ë©ˆì¶°ì£¼ê¸° \nSELECT alter_job(\u003cjob_id\u003e, scheduled =\u003e false);\nSELECT alter_job(1006, scheduled =\u003e false);\n\n-- chunk decompression í•˜ê¸° \nSELECT decompress_chunk('_timescaledb_internal.\u003cchunk_name\u003e');\n\n-- policy ë‹¤ì‹œ í™œì„±í™” ì‹œì¼œì£¼ê¸°\nSELECT alter_job(\u003cjob_id\u003e, scheduled =\u003e true);\nSELECT alter_job(1006, scheduled =\u003e true);\n```\n\n## ë“±ë¡ëœ ëª¨ë“  job í™•ì¸í•˜ê¸° \n- refresh continous aggregate policy\n- compression policy \n```sql\nSELECT * FROM timescaledb_information.jobs;\n```\n\n## Replication lag ì²´í¬í•˜ê¸° \n```sql\nSELECT \n  CASE \n    WHEN pg_last_wal_receive_lsn() = pg_last_wal_replay_lsn() THEN 0\n    ELSE EXTRACT (EPOCH FROM now() - pg_last_xact_replay_timestamp()) \n  END AS log_delay;\n```\n\n## Job \n- retention, continuous aggregate ë“± ì£¼ê¸°ì ìœ¼ë¡œ ì‘ì—…ë˜ëŠ” policyë“¤ì€ ëª¨ë‘ jobìœ¼ë¡œ ë“±ë¡ë˜ì–´ìˆë‹¤. \n- doc : [Actions and automation](https://docs.timescale.com/api/latest/actions/)\n\n### ë“±ë¡ëœ job í™•ì¸\n```sql\nSELECT *\nFROM timescaledb_information.jobs j\n```\n\n```markdown\n|job_id|application_name|schedule_interval|max_runtime|max_retries|retry_period|proc_schema|proc_name|owner|scheduled|config|next_start|hypertable_schema|hypertable_name|check_schema|check_name|\n\n|------|----------------|-----------------|-----------|-----------|------------|-----------|---------|-----|---------|------|----------|-----------------|---------------|------------|----------|\n\n|1|Telemetry Reporter [1]|24:00:00|00:01:40|-1|01:00:00|_timescaledb_internal|policy_telemetry|postgres|true||2022-12-18 08:02:08.220 +0900|||||\n\n|1001|Refresh Continuous Aggregate Policy [1001]|01:00:00|00:00:00|-1|01:00:00|_timescaledb_internal|policy_refresh_continuous_aggregate|nftbankci|true|{\"end_offset\": \"01:00:00\", \"start_offset\": \"3 days\", \"mat_hypertable_id\": 7}|2022-12-17 12:48:56.433 +0900|_timescaledb_internal|_materialized_hypertable_7|_timescaledb_internal|policy_refresh_continuous_aggregate_check|\n\n|1003|Compression Policy [1003]|35 days|00:00:00|-1|01:00:00|_timescaledb_internal|policy_compression|nftbankci|true|{\"hypertable_id\": 7, \"compress_after\": \"5 days\"}|2023-01-05 20:39:47.486 +0900|_timescaledb_internal|_materialized_hypertable_7|_timescaledb_internal|policy_compression_check|\n\n|1011|Retention Policy [1011]|1 day|00:05:00|-1|00:05:00|_timescaledb_internal|policy_retention|nftbankci|true|{\"drop_after\": \"90 days\", \"hypertable_id\": 20}|2022-12-17 16:55:15.014 +0900|_timescaledb_internal|_materialized_hypertable_20|_timescaledb_internal|policy_retention_check|\n\n```\n\n- `Refresh Continuous Aggregate Policy`\n\t- continuous aggregate ë‚´ê°€ ì§€ì •í•œ í…Œì´ë¸” ì´ë¦„ìœ¼ë¡œ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤. ë‚´ë¶€ì ìœ¼ë¡œëŠ” internal tableë¡œ ë˜ì–´ìˆë‹¤. \n\t```sql\n\t  Â select * from _timescaledb_internal._materialized_hypertable_20\n\t```\n\t\n- `Compression Policy`\n\t- ì¼ì • ê¸°ê°„ì´ ì§€ë‚œ ë°ì´í„°ëŠ” ì••ì¶•í•œë‹¤. \n\t- readë§Œ ê°€ëŠ¥ update, deleteë¥¼ ìœ„í•´ì„œëŠ” uncompressionì„ ë”°ë¡œ í•´ì£¼ì–´ì•¼ í•œë‹¤.\n\t- doc : [Compression](https://docs.timescale.com/api/latest/compression/)\n- `Retention Policy`\n\t- ì¼ì • ê¸°ê°„ì´ ì§€ë‚œ í›„ì—ëŠ” ìë™ ì‚­ì œí•œë‹¤. \n\t- doc : [Data Retention](https://docs.timescale.com/api/latest/data-retention/)\n\n\n### job ì‚­ì œ\n```sql\nSELECT delete_job(\u003cjob id\u003e);\nSELECT delete_job(1000);\n```","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/Tree-%EB%AA%85%EB%A0%B9%EC%96%B4":{"title":"Tree ëª…ë ¹ì–´","content":"- í´ë” êµ¬ì¡°ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë³´ê¸° ì‰½ë„ë¡ íŠ¸ë¦¬ í˜•íƒœë¡œ ë³´ì—¬ì£¼ëŠ” ëª…ë ¹ì–´\n\n## Install\n\n### MacOS (Homebrew)\n```\nbrew install tree\n```\n\n### Linux (RHEL / CentOS / Fedora / Rocky / Alma Linux)\n```\nyum install tree  \n## CentOS/RHEL 8.x and Fedora user try the dnf command ##  \ndnf install tree\n```\n\n### Linux (Debian / Mint / Ubuntu Linux)\n```\nsudo apt-get install tree\n```\n\n## How to use\n```\ntree .\n\nâœ  new-poetry-repository tree\n.\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ new_poetry_repository\nâ”‚Â Â  â””â”€â”€ __init__.py\nâ”œâ”€â”€ pyproject.toml\nâ””â”€â”€ tests\n    â””â”€â”€ __init__.py\n\n```\n\n## References\n- [Linux see directory tree structure using tree command](https://www.cyberciti.biz/faq/linux-show-directory-structure-command-line/)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/ULID":{"title":"ULID","content":"- Universally Unique Lexicographically Sortable Identifiers\n- 128 bits ì´ë©° UUIDì™€ í˜¸í™˜ ê°€ëŠ¥\n- ë§¤ ë°€ë¦¬ì„¸ì»¨ë“œë§ˆë‹¤ 1.21e+24 ìœ ë‹ˆí¬ê°’ ìƒì„± ê°€ëŠ¥\n- ì‹œê°„ì„ ë‚˜íƒ€ë‚´ëŠ” ì• 48bitsì™€ ì„ì˜ê°’ 80bitsë¡œ êµ¬ì„±ëœ ê°’. \n```\n 01AN4Z07BY      79KA1307SR9X4MV3\n\n|----------|    |----------------|\n Timestamp          Randomness\n   48bits             80bits\n```\n- Timestamp\n\t- timestampì—ì„œ ë°€ë¦¬ì„¸ì»¨ë“œ ë‹¨ìœ„ë¡œ ê¸°ë¡í•˜ì—¬ ìƒì„± ìˆœì„œëŒ€ë¡œ ì •ë ¬í•  ìˆ˜ ìˆë‹¤.\n\t- 10889ë…„ê¹Œì§€ ë§Œë“¤ìˆ˜ ìˆìŒ. \n- ëŒ€ì†Œë¬¸ì êµ¬ë³„í•˜ì§€ ì•ŠìŒ \n- Crockford's Base32 ì¸ì½”ë”© (I, L, O, U ì œì™¸) - UUID ë³´ë‹¤ ë” ë‚˜ì€ ì„±ëŠ¥ \n- [monotonicity](https://github.com/ulid/spec#monotonicity) ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ëœë¤ ìˆ«ìì— 1ì”© ì¦ê°€í•˜ì—¬ ì¶©ëŒì„ í”¼í•  ìˆ˜ë„ ìˆë‹¤. \n\n## UUIDì˜ í•œê³„ì \n- [Universally Unique Identifier(UUID)](https://datatracker.ietf.org/doc/html/rfc4122.html)ëŠ” ì¤‘ì•™ ê´€ë¦¬ì‹ì´ ì•„ë‹ˆë©´ì„œë„ ìœ ì¼ì„±ì„ ë³´ì¥í•´ì£¼ëŠ” ë°©ì‹\n- 32ê°œì˜ 16ì§„ìˆ˜ë¡œ í‘œì‹œë˜ë©° ì´ 5ê°œì˜ versionì´ ìˆë‹¤. \n\t- v1/v2 : ê³ ìœ í•œ MACì£¼ì†Œì— ëŒ€í•œ ì ‘ê·¼ í•„ìš”. ë‹¤ì–‘í•œ í™˜ê²½ì— ì‚¬ìš©ë˜ê¸° ì–´ë ¤ì›€\n\t- v3/v5 : ê³ ìœ í•œ ì‹œë“œê°€ í•„ìš”í•˜ê³  ë¬´ì‘ìœ„ ID ìƒì„±ìœ¼ë¡œ ì—¬ëŸ¬ ë°ì´í„° êµ¬ì¡°ì—ì„œ ì¡°ê°í™”ê°€ ë  ìˆ˜ ìˆë‹¤. \n\t- v4 : ì™„ì „ ëœë¤ìœ¼ë¡œ ì¡°ê°í™” ë  ê°€ëŠ¥ì„±ì´ ìˆë‹¤. \n\n## References\n- [ulid spec](https://github.com/ulid/spec)\n- [UUID vs ULID](https://velog.io/@injoon2019/UUID-vs-ULID)\n- [How probable are collisions with ULIDâ€™s monotonic option?](https://zendesk.engineering/how-probable-are-collisions-with-ulids-monotonic-option-d604d3ed2de)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/Uncle-Block":{"title":"Uncle Block","content":"\n## References \nhttps://docs.alchemy.com/docs/what-are-uncle-blocks","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/arweave.org":{"title":"arweave.org","content":"\n- [www.arweave.org](https://www.arweave.org/)\n- ","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/atomic-swap":{"title":"Atomic swap","content":"\n- ì¤‘ì•™í™”ëœ ê±°ë˜ì†Œë¥¼ ê±°ì¹˜ì§€ì•Šê³  ì„œë¡œ ë‹¤ë¥¸ ì½”ì¸ì„ ì§ì ‘ êµí™˜í•˜ëŠ” ê²ƒ\n- full name : atomic cross chain trading\n- ì½”ì¸ ìŠ¤ì™‘(coin swap) í˜¹ì€ ì—ì–´ìŠ¤ì™‘(airswap)ì´ë¼ê³ ë„ í•œë‹¤. ","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/backend-communication-design-patterns":{"title":"ë°±ì—”ë“œ í†µì‹  íŒ¨í„´","content":"\n# ë°±ì—”ë“œ í†µì‹  íŒ¨í„´\n\në°±ì—”ë“œ ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ í†µì‹ (ì¼ëª… server-to-server í†µì‹ ) ë°©ë²•ì— ë”°ë¼ ì„±ëŠ¥ì°¨ì´ í˜¹ì€ fallback ì— ëŒ€í•œ ì²˜ë¦¬ ì‹œë‚˜ë¦¬ì˜¤ ë“± ë³€ê²½ë  ìˆ˜ ìˆë‹¤. \n\n## Pattern 1. ìš”ì²­-ì‘ë‹µ íŒ¨í„´ \n- ë§ˆì¹˜ í´ë¼ì´ì–¸íŠ¸-ë°±ì—”ë“œì²˜ëŸ¼ í•‘í ë™ê¸° í†µì‹  \n\n![Untitled-2023-08-13-1619](https://github.com/jiyeonseo/digital-garden/assets/2231510/66bd6349-55c8-4549-bb7a-d6b589ff1ee7)\n\n- ìš”ì²­í•˜ê³  ê¸°ë‹¤ë ¸ë‹¤ê°€ ì‘ë‹µì´ ì˜¤ë©´ ê·¸ ë‹¤ìŒ ìˆ˜í–‰ \n- ì˜ˆ) RESTful API : íŠ¹ì • endpoint(URL)ë¡œ GET, POST, PUT, DELETE ì™€ ê°™ì€ http ìš”ì²­ì„ í•˜ì—¬ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì‘ë‹µê°’ìœ¼ë¡œ ë°›ì•„ ì²˜ë¦¬ \n### ìš”ì²­-ì‘ë‹µ íŒ¨í„´ ì¥ì \n- ë‹¨ìˆœí•˜ê³  êµ¬í˜„ì´ ìš©ì´í•˜ì—¬ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” íŒ¨í„´\n- ì—¬ëŸ¬ ìƒí™©ì— ëŒ€ë¶€ë¶„ ë‹¤ ì í•©í•œ í¸\n- í™•ì¥ì„± : ê° ìš”ì²­ì´ ê°œë³„ì ì´ê¸° ë•Œë¬¸ì— ë‹¨ìˆœí•˜ê²Œ ì—¬ëŸ¬ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ì‰¬ì›€ \n- ì‹ ë¢°ì„± : í•­ìƒ ìš”ì²­ì€ ì‘ë‹µì„ ë³´ë‚´ì•¼ í•¨ìœ¼ë¡œ, ì œëŒ€ë¡œ ì´ë£¨ì–´ ì§€ì§€ ì•Šì€ ê²½ìš° ì´ë¥¼ ëª¨ë‹ˆí„°ë§ í•˜ê¸° ìš©ì´í•¨. \n- ë””ë²„ê¹… ìš©ì´ì„± : ì‘ë‹´ì—ëŠ” í•­ìƒ ìƒíƒœ ì½”ë“œì™€ ë©”ì„¸ì§€ê°€ ë‚´ë ¤ê°€ê¸° ë•Œë¬¸ì— ë°›ëŠ” ìª½ì—ì„œ ì—ëŸ¬ ì²˜ë¦¬ê°€ ìš©ì´í•¨. \n\n### ìš”ì²­-ì‘ë‹µ íŒ¨í„´ ë‹¨ì \n- latency ë¬¸ì œ : ìš”ì²­ì— ëŒ€í•´ ì‘ë‹µì´ ì˜¬ ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦¬ê¸° ë•Œë¬¸ì—, ìš”ì²­ì´ ë„ˆë¬´ ë§ì´ ëª°ë¦¬ëŠ” ìƒí™©ì—ì„œëŠ” latencyê°€ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆìŒ. \n- ì¥ì•  ë°œìƒì‹œ ë°ì´í„° ë¶ˆì¼ì¹˜ : ìš”ì²­ ì²˜ë¦¬í•œ í›„ ì‘ë‹µ ì¤‘ê°„ì— ë„¤íŠ¸ì›Œí¬ ì´ìŠˆê°€ ìƒê¸°ë©´ ë°ì´í„° ë¶ˆì¼ì¹˜ê°€ ìƒê¸¸ ìˆ˜ ìˆìŒ.\n- Broadcasting ë¹„íš¨ìœ¨ : ë™ì¼ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ì— ì „ì†¡ì‹œ íš¨ìœ¨ì´ ë–¨ì–´ì§„ë‹¤. \n\n\n## Pattern 2. publish-subscribe íŒ¨í„´ (PubSub)\n- ì»´í¬ë„ŒíŠ¸ ê°„ì˜ ë¹„ë™ê¸° í†µì‹ ì„ ìœ„í•´ ì‚¬ìš©. \n- í•¨ê»˜ ì‘ë™í•´ì•¼í•˜ì§€ë§Œ ë””íŒ¬ë˜ì‹œë¥¼ ë¶„ë¦¬ì‹œí‚¤ê³ ì í• ë•Œ ì í•©\n\n![Untitled-2023-08-13-1619-9](https://github.com/jiyeonseo/digital-garden/assets/2231510/ca878a2c-20c2-40d3-9d41-99b90d075dfe)\n\n- publisherì™€ subscriber ì¤‘ê°„ì— ë©”ì„¸ì§€ í(ë©”ì„¸ì§€ ë¸Œë¡œì»¤)ë¥¼ ì‚¬ìš© \n- ë©”ì„¸ì§€ë¥¼ ì±„ë„(í˜¹ì€ í† í”½)ë¡œ ê·¸ë£¹í™” \n- publisher : ë©”ì„¸ì§€ë¥¼ ë§Œë“¤ì–´ ë³´ë‚´ëŠ” ìª½. ë©”ì„¸ì§€ë¥¼ ë§Œë“¤ì–´ ì±„ë„/í† í”½ì— ë˜ì§€ê¸°ë§Œí•¨  \n- subscriber : ë©”ì„¸ì§€ë¥¼ ì†Œë¹„í•˜ëŠ” ìª½ . êµ¬ë…í•˜ê³ ì í•˜ëŠ” ì±„ë„/í† í”½ì—ì„œ ë©”ì„¸ì§€ê°€ ì˜¬ë•Œë§ˆë‹¤ copyë¥¼ ë°›ìŒ\n- ì˜ˆ ) Apache Kafka, MQTT \n\n### publish-subscribe íŒ¨í„´ ì¥ì \n- ë¹„ë™ê¸° í†µì‹  : latency ë³‘ëª©ì„ ì¤„ì—¬ ì‹¤ì‹œê°„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì í•©\n- ëŠìŠ¨í•œ ê²°í•©(Loose Coupling) : ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ê°€ ë¬¶ì—¬ìˆì§€ ì•ŠìŒ \n- í™•ì¥ì„± : subscriber ì œí•œì´ ë”°ë¡œ ì—†ê³ , subscriberê°€ êµ¬ë…í•  ìˆ˜ ìˆëŠ” publisherì˜ ìˆ˜ê°€ ì •í•´ì ¸ ìˆì§€ ì•ŠìŒ. ê³„ì† í™•ì¥ ê°€ëŠ¥ \n- ì–¸ì–´ì™€ í”„ë¡œí† ì½œì´ ë…ë¦½ì  : ì–¸ì–´ë‚˜ í™˜ê²½, í”Œë«í¼ì— ì¢…ì†ì ì´ì§€ ì•Šê¸° ë•Œë¬¸ì— í¬ë¡œìŠ¤ í”Œë«í¼ í˜¸í™˜ì„±ì´ ë›°ì–´ë‚¨ \n- ë¡œë“œ ë°¸ëŸ°ì‹± ; ì—¬ëŸ¬ subscriberê°€ íŠ¹ì • ì´ë²¤íŠ¸ë¥¼ êµ¬ë…í•˜ëŠ” ê²½ìš°, subscriber ê°„ì— ì´ë²¤íŠ¸ë¥¼ ê· ë“±í•˜ê²Œ ë°°ë¶„í•¨ìœ¼ë¡œì¨ ë¡œê·¸ ë°¸ëŸ°ì‹± ê¸°ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆë‹¤.\n\n### publish-subscribe íŒ¨í„´ ë‹¨ì \n- ì‹œìŠ¤í…œ ì˜¤ë²„í—¤ë“œ : ë‹¨ìˆœíˆ pub/sub ë¿ë§Œ ì•„ë‹ˆë¼ ë©”ì„¸ì§€ ë¸Œë¡œì»¤, ì±„ë„ê³¼ subscribe ë“± ê´€ë¦¬ í¬ì¸íŠ¸ë“¤ì´ ëŠ˜ì–´ë‚œë‹¤.\n- ë©”ì„¸ì§€ ë³µì‚¬ : êµ¬ì„± í˜¹ì€ ë„¤íŠ¸ì›Œí¬ ìƒí™©ì— ë”°ë¼ ë©”ì„¸ì§€ê°€ ì¤‘ë³µ ë  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì¤‘ë³µ ë° ì¶”ê°€ ì²˜ë¦¬ ì‘ì—…ì„ í•´ì•¼í•  ìˆ˜ë„ ìˆë‹¤.\n- í™•ì¥ì„±ì´ ë” ë¬¸ì œì¼ì§€ë„ : ë§ì€ ì–‘ì˜ ë©”ì„¸ì§€ì™€ subscriberê°€ ìƒê¸°ë©´ ê·¸ ì—­ì‹œ ê´€ë¦¬ ëŒ€ìƒì´ ë¨\n- ë³µì¡í•œ ì—ëŸ¬ ì²˜ë¦¬ : ë©”ì„¸ì§€ ì „ì†¡ ì‹¤íŒ¨, subscribe ì‹¤íŒ¨ ë“± ì´ìŠˆ ìƒí™©ì— ëŒ€í•œ ì²˜ë¦¬ê°€ ë” ë³µì¡ í•  ìˆ˜ ìˆìŒ. \n### ì¢‹ì€ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤\n- ì‹¤ì‹œê°„ ì±„íŒ…ì´ë‚˜ ì—¬ëŸ¬ í”Œë ˆì´ì–´ë¥¼ ìœ„í•œ ê²Œì„ì—ì„œ ì§€ì—° ì‹œê°„ì€ ì§§ê³  ì‹¤ì‹œê°„ìœ¼ë¡œ ì‘ë‹µì„ í•˜ëŠ” ê¸°ëŠ¥\n- ì´ë²¤íŠ¸ ì•Œë¦¼ ì‹œìŠ¤í…œ\n- ë¡œê¹… ë° ìºì‹±ì— ì˜ì¡´í•˜ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ \n\n\n## Pattern 3. Short Polling íŒ¨í„´\n-  pull-based í†µì‹  ë°©ë²•ìœ¼ë¡œ ì„œë²„ì— ìƒˆë¡œìš´ ì—…ë°ì´íŠ¸ê°€ ìˆëŠ”ì§€ ì§€ì†ì ìœ¼ë¡œ ë•¡ê²¨(polling)ê°€ëŠ” \u001dì‹ \n- ì˜ˆë¥¼ ë“¤ì–´, ì¹œêµ¬í•œí…Œ \"ë‚˜í•œí…Œ ë©”ì„¸ì§€ ì™”ì–´?\" \"ì•„ë‹ˆ\" (ì¢€ ìˆë‹¤ê°€...) \"ë‚˜í•œí…Œ ë©”ì„¸ì§€ ì™”ì–´?\" \"ì•„ë‹ˆ\" (ì¢€ ìˆë‹¤ê°€...) \"ë‚˜í•œí…Œ ë©”ì„¸ì§€ ì™”ì–´?\" \"ã…‡ã…‡ ì—¬ê¸°\"  \n- `ìš”ì²­-ì‘ë‹µ íŒ¨í„´` ê³¼ ë‹¤ë¥¸ì ì€ ë°ì´í„° ì‚¬ìš© ì—¬ë¶€ì™€ ìƒê´€ ì—†ì´ ì •ê¸°ì ìœ¼ë¡œ ë¯¸ë¦¬ ì •í•´ë†“ì€ ì‹œê°„ì— ê³„ì† í†µì‹  \n\n### Short Polling íŒ¨í„´ ì¥ì \n- ë‹¨ìˆœì„± : êµ¬í˜„ì´ ì‰¬ìš°ë©° ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ê°„ì— ìƒíƒœë¥¼ ë”°ë¡œ ì‹ ê²½ì“¸ í•„ìš”ê°€ ì—†ì–´, ë³µì¡ì„±ì„ ìµœì†Œí™” í•´ì•¼í•˜ëŠ” ê²½ìš°ì— ì í•©\n- í˜¸í™˜ì„± : í”Œë«í¼ê³¼ í™˜ê²½ì— ì¢…ì†ì„±ì´ ì—†ì–´ í¬ë¡œìŠ¤ í”Œë«í¼ ê°€ëŠ¥\n- ì£¼ê¸°ì ì¸ ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•œ ì‹œë‚˜ë¦¬ì˜¤ì— ì í•© : ëŒ€ì‹œë³´ë“œ, ë‚ ì”¨ ì•±, ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§ ë“± \n\n### Short Polling íŒ¨í„´ ë‹¨ì \n- latency : ë¯¸ë¦¬ ì •í•´ì§„ ê°„ê²©ì´ ìˆê¸° ë•Œë¬¸ì— ê·¸ ì‹œê°„ ë§Œí¼ ì§€ì—° ì‹œê°„ ë°œìƒ. ì‹¤ì‹œê°„ í†µì‹ ì´ ë¶ˆê°€ëŠ¥ \n- ë¹„íš¨ìœ¨ì„± : ë°ì´í„° ë³€í™”ê°€ ì—†ìŒì—ë„ ê³„ì† í´ë§í•˜ê¸°ì— ë¹„íš¨ìœ¨ì ì´ê³  ë¶ˆí•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ ë° ì„œë²„ ì˜¤ë²„í—¤ë“œë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìŒ\n- ìŠ¤ì¼€ì¼ë§ : ë„ˆë¬´ ë§ì€ í´ë¼ì´ì–¸íŠ¸ê°€ ë™ì‹œì— í´ë§í•˜ëŠ” ê²½ìš° ì„œë²„ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ê³¼ë‹¤í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ. \n\n## Pattern 4. Long Polling íŒ¨í„´\n- Short pollingê³¼ ë™ì¼í•˜ê²Œ polling ì´ì§€ë§Œ push-based í†µì‹  ë°©ë²•ìœ¼ë¡œ, ì—°ê²°ì„ ê³„ì† í•˜ê³  ìˆë‹¤ê°€ ì„œë²„ì—ì„œ ì—…ë°ì´íŠ¸ê°€ ìˆëŠ” ê²½ìš° ì„œë²„ì—ì„œ ë³´ë‚´ì£¼ëŠ” ë°©ì‹ \n- ì˜ˆë¥¼ ë“¤ì–´, ì¹œêµ¬ë‘ ì „í™”ë¥¼ ì—°ê²°í•˜ê³  \"ì—…ëƒ ìˆìœ¼ë©´ ì•Œë ¤ì¤˜\" (ê³„ì† ì „í™” ì—°ê²°ì¤‘) \"ì˜›ë‹¤ ì—…ëƒ.\" \n- í´ë¼ì´ì–¸íŠ¸/ì„œë²„ê°„ì— ì‹¤ì‹œê°„ í˜¹ì€ ì‹¤ì‹œê°„ì— ê°€ê¹Œìš´ ì—…ë°ì´íŠ¸ ì‹¤í–‰ì„ ìœ„í•´ ì‚¬ìš©\n\n### Long Polling íŒ¨í„´ ì¥ì \n- ì§§ì€ latency : ì—…ë°ì´íŠ¸ê°€ ìˆëŠ” ê²½ìš° í´ë¼ì´ì–¸íŠ¸ì— ì¦‰ì‹œ ì „ì†¡ë˜ê¸° ë•Œë¬¸ì— ê¸°ì¡´ polling ë°©ì‹ë³´ë‹¤ ì§€ì—° ì‹œê°„ì´ ë”»ë‹¤.\n- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ : ì´ë¯¸ í´ë¼ì´ì–¸íŠ¸/ì„œë²„ ì—°ê²°ì´ ëœ ìƒíƒœì´ê¸° ë•Œë¬¸ì— ë‹¤ìŒ í´ë§ê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë°”ë¡œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ê°€ëŠ¥ \n\n### Long Polling íŒ¨í„´ ë‹¨ì \n- ë¦¬ì†ŒìŠ¤ ì†Œëª¨ : polling ì‹œê°„ë™ì•ˆ í´ë¼ì´ì–¸íŠ¸ ìˆ˜ë§Œí¼ ì—°ê²°ì„ ì—´ì–´ ë‘ì–´ì•¼ í•œë‹¤. ê·¸ëŸ¬ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸/ì„œë²„ ëª¨ë‘ ë¦¬ì†ŒìŠ¤ ì†Œëª¨ê°€ ë§ë‹¤.\n- ì—¬ì „íˆ ì¡´ì¬í•˜ëŠ” latency : short polling ë³´ë‹¤ëŠ” ì§§ì§€ë§Œ ì—¬ì „íˆ ì›¹ì†Œì¼“ê³¼ ê°™ì€ ë‹¤ë¥¸ ì‹¤ì‹œê°„ í†µì‹ ë³´ë‹¤ëŠ” latencyê°€ ì¡´ì¬\n- í™•ì¥ ì–´ë ¤ì›€ : ë™ì‹œì— ë§ì€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì²˜ë¦¬í•´ì•¼í•˜ëŠ” ì„œë²„ ì…ì¥ì—ì„œëŠ” ë¦¬ì†ŒìŠ¤ê°€ ë§ì´ ë“œëŠ” ë¶€ë‹´. í´ë¼ì´ì–¸íŠ¸ê°€ ë§ì•„ì§ˆìˆ˜ë¡ íš¨ìœ¨ì  ê´€ë¦¬ ì–´ë ¤ì›€ \n\n### ì¢‹ì€ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤\n- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸, ì´ë²¤íŠ¸ ì¤‘ì‹¬ ì–´í”Œë¦¬ì¼€ì´ì…˜, ì´ë²¤íŠ¸ ì•Œë¦¼ ì‹œìŠ¤í…œ ë“± \n \n## Pattern 5. Push íŒ¨í„´\n- ì—°ê²°ëœ í´ë¼ì´ì–¸íŠ¸ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¥¼ ì „ë‹¬.\n- í´ë¼ì´ì–¸íŠ¸ê°€ ë¬¼ì–´ë³´ëŠ” ê²ƒì´ ì•„ë‹Œ ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µì„ push \n- ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” í”„ë¡œí† ì½œì€ \"web Socket\"\n\n### Push íŒ¨í„´ ì¥ì \n- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ : ì„œë²„ê°€ ì—…ë°ì´íŠ¸ë¥¼ ë°”ë¡œ ë³´ë‚´ì¤Œ \n- latency ê°ì†Œ : ì—…ë°ì´íŠ¸ê°€ ìˆì„ ë•Œ í´ë¼ì´ì–¸íŠ¸ì— ë°”ë¡œ ì£¼ê¸° ë•Œë¬¸ì— ì§€ì—° ì‹œê°„ì´ ê°ì†Œ \n- íš¨ìœ¨ì„± : ì§€ë‚˜ì¹œ ìš”ì²­(í´ë§, í´ë¼ì´ì–¸íŠ¸ ìš”ì²­)ì´ í•„ìš”í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë„¤íŠ¸ì›Œí¬ ë¦¬ì†ŒìŠ¤ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥ \n\n### Push íŒ¨í„´ ë‹¨ì \n- í™•ì¥ì„± : í´ë¼ì´ì–¸íŠ¸ ìˆ˜ê°€ ëŠ˜ì–´ë‚˜ê²Œ ë˜ë©´, ì—°ê²°ì„ ë§ºê³  ìˆì–´ì•¼ í•˜ëŠ” ì„œë²„ ì…ì¥ì—ì„œëŠ” ë¦¬ì†ŒìŠ¤ ë¶€ë‹´\n- í´ë¼ì´ì–¸íŠ¸ ì§€ì› : ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ í”Œë«í¼ì´ push ê¸°ìˆ ì„ ì§€ì›í•˜ê³  ìˆì§€ ì•ŠìŒìœ¼ë¡œ ì´ë¡œ ì¸í•œ í•œê³„ê°€ ìˆì„ ìˆ˜ ìˆìŒ \n\n### ì¢‹ì€ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤\n- ì±„íŒ…, ë©”ì„¸ì§• ì•±, ì•Œë¦¼ ì‹œìŠ¤í…œ, IoT ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë°, ì˜¨ë¼ì¸ ê²Œì„ ë“± \n\n## References\n- [Communication Design Patterns for Backend Development](https://www.freecodecamp.org/news/communication-design-patterns-for-backend-development/)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/bitcoin":{"title":"ë¹„íŠ¸ì½”ì¸","content":"\n- ê·¸ë˜í”½ì¹´ë“œê°€ ë¹„ì‹¸ì§„ ì´ìœ ëŠ” ë¹„íŠ¸ì½”ì¸ë•Œë¬¸ì´ë¼ëŠ” ë§ì´ ë§ì§€ë§Œ, ì´ì œ ì±„êµ´ ë‚œì´ë„ê°€ ë†’ì•„ì„œ ASIC ë¹„íŠ¸ì½”ì¸ ì±„êµ´ ì „ìš© ê¸°ê³„ê°€ ì•„ë‹ˆë©´ ë¬´ìš©ì§€ë¬¼ì´ë‹¤. ","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/build-your-own-redis-with-c-cpp-1":{"title":"(Build Your Own Redis with C/C++) 1. socket í†µì‹ , Protocol Parsing","content":"\u003e [Build Your Own Redis With C/C++](https://build-your-own.org/redis) ì„ ë³´ê³  ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤. ë” ìì„¸í•œ ë‚˜ìš©ì€ ì›ë¬¸ì„ ì°¸ê³ í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì§ì ‘ ì‹¤ìŠµí•œ ì½”ë“œëŠ” [jiyeonseo/build-your-own-redis-with-c-cpp](https://github.com/jiyeonseo/build-your-own-redis-with-c-cpp) ì—ì„œ ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n`chap 1`ì€ ì±…ì— ëŒ€í•œ introductionìœ¼ë¡œ ìƒëµ. \n\n## Socket ë™ì‘ ë°©ì‹ \n- RedisëŠ” ì„œë²„-í´ë¼ì´ì–¸íŠ¸ TCP ì—°ê²°ì„ í†µí•˜ì—¬ ìš”ì²­/ì‘ë‹µ ìˆ˜ì‹ \n\n### ì„œë²„ workflow ìˆ˜ë„ì½”ë“œ\n```c\nfd = socket() \nbind(fd, address)\nlisten(fd)\nwhile True:\n    conn_fd = accept(fd)\n    do_something_with(conn_fd)\n    close(conn_fd)\n```\n\n- `fd` : ë¦¬ëˆ…ìŠ¤ ì»¤ë„ì—ì„œ TCP ì—°ê²°, ë””ìŠ¤í¬ íŒŒì¼, ìˆ˜ì‹  í¬íŠ¸ ë“±ì„ ë‚˜íƒ€ë‚´ëŠ” integer\n- `bind()` : `socket()`ì„ í†µí•´ ë°›ì€ `fd` ë¡œ `address` ì—°ê²°\n- `listen()` : í•´ë‹¹ `address` ì—°ê²°ì„ ë°›ì„ ìˆ˜ ìˆê²Œ \n- `accept()` : ìˆ˜ì‹  `fd`ë¥¼ ë°›ì•„ ì—°ê²° ì†Œì¼“ì„ ë°˜í™˜. `conn_fd` \n- `read()` : TCP ì—°ê²°ì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì‹  \n- `write()` : ë°ì´í„° ì „ì†¡\n- `close()` : `fd`ê°€ ì°¸ê³ í•˜ê³  ìˆëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•˜ê³  `fd` ìˆ«ìë¥¼ ì¬í™œìš©\n\n### í´ë¼ì´ì–¸íŠ¸ workflow ìˆ˜ë„ì½”ë“œ\n```c\nfd = socket()\nconnect(fd, address)\ndo_something_with(fd)\nclose(fd)\n```\n- `connect()` : ì†Œì¼“ `fd` ì£¼ì†Œë¥¼ ë°›ì•„ `address`ì™€ ì—°ê²°\n\n## Simple Server/Client \n\n### Server \n```cpp\n// ë¨¼ì € ì†Œì¼“ `fd` ìƒì„±\nint fd = socket(AF_INET, SOCK_STREAM, 0);\n```\n- `AF_INET` : IPv4 ìš©. IPv6 í˜¹ì€ dual-stack socketì„ ì—´ ê²½ìš° `AF_INET6` ì‚¬ìš©\n- `SOCK_STREAM` : TCP í†µì‹ ì„ ìœ„í•œ stream\n\n```cpp\n// ì†Œì¼“ ì˜µì…˜ ì„¸íŒ…\nint val = 1;\nsetsockopt(fd, SOL_SOCKET, SO_REUSEADDR, \u0026val, sizeof(val));\n```\n- `setsockopt()` : ì†Œì¼“ ì˜µì…˜ ì„¸íŒ… \n\t- `SO_REUSEADDR` : ì„œë²„ê°€ ì¬ì‹œì‘ë ë•Œ ë™ì¼í•œ ì£¼ì†Œ ë°”ì¸ë”© ê°€ëŠ¥\n\t\t- ì†Œì¼“ì´ bind() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë¡œì»¬ IP ì£¼ì†Œì™€ í¬íŠ¸ ë²ˆí˜¸ë¥¼ í• ë‹¹ ë°›ì„ ë•Œ, ì´ë¯¸ ê·¸ í¬íŠ¸ë¥¼ ì‚¬ìš© ì¤‘ì¸ ë‹¤ë¥¸ ì†Œì¼“ì´ ìˆë”ë¼ë„ í•´ë‹¹ í¬íŠ¸ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. \n\t\t- ë‹¤ì‹œ ì‹œì‘ì‹œ ë™ì¼ í¬íŠ¸ ë²ˆí˜¸ë¡œ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ë¶ˆí•„ìš”í•œ ëŒ€ê¸° ì‹œê°„ ì—†ì´ ë°”ë¡œ ë‹¤ì‹œ ì‚¬ìš© ê°€ëŠ¥.\n\t\t- ì£¼ì˜) ê°™ì€ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ë‘ ê°œì˜ ì†Œì¼“ì´ ë™ì‹œì— ë°”ì¸ë“œë˜ì–´ ìˆë‹¤ë©´, ë™ì¼í•œ IP ì£¼ì†Œì™€ í¬íŠ¸ ë²ˆí˜¸ë¡œ ë“¤ì–´ì˜¤ëŠ” íŒ¨í‚·ì´ ì–´ëŠ ì†Œì¼“ìœ¼ë¡œ ì „ë‹¬ë ì§€ ì•Œ ìˆ˜ ì—†ê²Œ ëœë‹¤.\n\n```cpp\n// bindì™€ listenìœ¼ë¡œ 0.0.0.0:1234 ë°”ì¸ë”© í•˜ê¸° \n    struct sockaddr_in addr = {};\n    addr.sin_family = AF_INET;\n    addr.sin_port = ntohs(1234);\n    addr.sin_addr.s_addr = ntohl(0);    // wildcard address 0.0.0.0\n    int rv = bind(fd, (const sockaddr *)\u0026addr, sizeof(addr));\n    if (rv) {\n        die(\"bind()\");\n    }\n\n    // listen\n    rv = listen(fd, SOMAXCONN);\n    if (rv) {\n        die(\"listen()\");\n    }\n```\n\n```cpp\n// ê°ê°ì˜ ì»¤ë„¥ì…˜ì— ëŒ€í•´ do_something í•˜ê¸°\nwhile (true) {\n        // accept\n        struct sockaddr_in client_addr = {};\n        socklen_t socklen = sizeof(client_addr);\n        int connfd = accept(fd, (struct sockaddr *)\u0026client_addr, \u0026socklen);\n        if (connfd \u003c 0) {\n            continue;   // error\n        }\n\n        do_something(connfd);\n        close(connfd);\n    }\n```\n\nìœ„ `do_something` ì€ ì•„ë˜ì™€ ê°™ì´ read/writeë¥¼ í•œë‹¤. \n```cpp\nstatic void do_something(int connfd) {\n    char rbuf[64] = {};\n    ssize_t n = read(connfd, rbuf, sizeof(rbuf) - 1);\n    if (n \u003c 0) {\n        msg(\"read() error\");\n        return;\n    }\n    printf(\"client says: %s\\n\", rbuf); // í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì˜¨ ë©”ì„¸ì§€ ì¶œë ¥\n\n    char wbuf[] = \"world\";\n    write(connfd, wbuf, strlen(wbuf)); // ì‘ë‹µìœ¼ë¡œ worldë¥¼ ë³´ë‚¸ë‹¤ \n}\n```\n- `read`ì™€ `write`ê°€ byte ìˆ˜ë¥¼ ë°˜í™˜. \n\n### Client \n```cpp\nint fd = socket(AF_INET, SOCK_STREAM, 0);\n    if (fd \u003c 0) {\n        die(\"socket()\");\n    }\n\n    struct sockaddr_in addr = {};\n    addr.sin_family = AF_INET;\n    addr.sin_port = ntohs(1234);\n    addr.sin_addr.s_addr = ntohl(INADDR_LOOPBACK);  // 127.0.0.1\n    int rv = connect(fd, (const struct sockaddr *)\u0026addr, sizeof(addr));\n    if (rv) {\n        die(\"connect\");\n    }\n\n    char msg[] = \"hello\";\n    write(fd, msg, strlen(msg)); // ì—°ê²°ë˜ë©´ hello ë¼ëŠ” ë©”ì„¸ì§€ë¥¼ ë³´ë‚¸ë‹¤. \n\n    char rbuf[64] = {};\n    ssize_t n = read(fd, rbuf, sizeof(rbuf) - 1);\n    if (n \u003c 0) {\n        die(\"read\");\n    }\n    printf(\"server says: %s\\n\", rbuf);\n    close(fd);\n```\n\n\u003e ì½”ë“œ : https://github.com/jiyeonseo/build-your-own-redis-with-c-cpp/tree/main/03\n\n\n## Protocol Parsing\ní´ë¼ì´ì–¸íŠ¸ì™€ ì£¼ê³  ë°›ì„ í”„ë¡œí† ì½œì„ ì •ì˜í•´ë³´ì. ë¨¼ì € ìš”ì²­ ê¸¸ì´ ì„ ì–¸ë¶€í„°.\n### Server\n```cpp\n    while (true) {\n        // accept\n        struct sockaddr_in client_addr = {};\n        socklen_t socklen = sizeof(client_addr);\n        int connfd = accept(fd, (struct sockaddr *)\u0026client_addr, \u0026socklen);\n        if (connfd \u003c 0) {\n            continue;   // error\n        }\n\n        // only serves one client connection at once\n        while (true) {\n            int32_t err = one_request(connfd);\n            if (err) {\n                break;\n            }\n        }\n        close(connfd);\n    }\n```\n- clientì™€ ì—°ê²° í›„, while ë£¹ì´ ëŒë©° í•˜ë‚˜ì˜ ìš”ì²­ì— ëŒ€í•´ íŒŒì”½\u0026 ì‘ë‹µ. \n\n```cpp\n// ì‹¤ì œ requestì²˜ë¦¬í•  `one_request` í•¨ìˆ˜ì—ì„œ ì‚¬ìš©í•  í—¬í¼ í•¨ìˆ˜ 2ê°œë¥¼ ë¨¼ì € ë§Œë“¤ì–´ ë³¸ë‹¤. \nstatic int32_t read_full(int fd, char *buf, size_t n) {\n\t// n byteê°€ ë ë•Œê¹Œì§€ ì»¤ë„ì—ì„œ ì½ê¸° \n\t// ë°ì´í„°\n    while (n \u003e 0) {\n        ssize_t rv = read(fd, buf, n); \n        if (rv \u003c= 0) {\n            return -1;  // error, or unexpected EOF\n        }\n        assert((size_t)rv \u003c= n);\n        n -= (size_t)rv;\n        buf += rv;\n    }\n    return 0;\n}\n\nstatic int32_t write_all(int fd, const char *buf, size_t n) {\n    // ë²„í¼ê°€ ê°€ë“ì°¨ë©´ ë¶€ë¶„ì ìœ¼ë¡œë§Œ ë°ì´í„°ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì“¸ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— \n    // ìš°ë¦¬ê°€ í•„ìš”í•œ ê²ƒë³´ë‹¤ ì ì€ bytesë¥¼ ë°˜í™˜í•˜ë„ë¡ í•´ì¤€ë‹¤. \n    while (n \u003e 0) {\n        ssize_t rv = write(fd, buf, n);\n        if (rv \u003c= 0) {\n            return -1;  // error\n        }\n        assert((size_t)rv \u003c= n);\n        n -= (size_t)rv;\n        buf += rv;\n    }\n    return 0;\n}\n```\nìœ„ `write`ì™€ `read` í—¬í¼ í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ìš”ì²­ ì²˜ë¦¬ í•¨ìˆ˜ `one_request` ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. \n\n```cpp\nconst size_t k_max_msg = 4096;\n\nstatic int32_t one_request(int connfd) {\n    // 4 bytes header\n    char rbuf[4 + k_max_msg + 1];\n    errno = 0;\n    int32_t err = read_full(connfd, rbuf, 4);\n    if (err) {\n        if (errno == 0) {\n            msg(\"EOF\");\n        } else {\n            msg(\"read() error\");\n        }\n        return err;\n    }\n\n    uint32_t len = 0;\n    memcpy(\u0026len, rbuf, 4);  // assume little endian\n    if (len \u003e k_max_msg) {\n        msg(\"too long\");\n        return -1;\n    }\n\n    // request body\n    err = read_full(connfd, \u0026rbuf[4], len);\n    if (err) {\n        msg(\"read() error\");\n        return err;\n    }\n\n    // do something\n    rbuf[4 + len] = '\\0';\n    printf(\"client says: %s\\n\", \u0026rbuf[4]);\n\n    // reply using the same protocol\n    const char reply[] = \"world\";\n    char wbuf[4 + sizeof(reply)];\n    len = (uint32_t)strlen(reply);\n    memcpy(wbuf, \u0026len, 4);\n    memcpy(\u0026wbuf[4], reply, len);\n    return write_all(connfd, wbuf, 4 + len);\n}\n```\n- line 7ê³¼ line 25ì—ì„œ `read` ê°€ ë‘ ë²ˆ ë˜ê³  ìˆë‹¤. \"buffered IOâ€ë¥¼ ì´ìš©í•˜ë©´ syscallì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤. í•œ ë²ˆì˜ ë²„í¼ì— ìµœëŒ€í•œ ë§ì€ ì–‘ì„ ì½ê³  ì—¬ëŸ¬ ìš”ì²­ì„ í•œë²ˆì— íŒŒì‹±í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë” íš¨ìœ¨ì ì´ë‹¤. \n\n### Client\n```cpp\nstatic int32_t query(int fd, const char *text) {\n    uint32_t len = (uint32_t)strlen(text);\n    if (len \u003e k_max_msg) {\n        return -1;\n    }\n\n    char wbuf[4 + k_max_msg];\n    memcpy(wbuf, \u0026len, 4);  // assume little endian\n    memcpy(\u0026wbuf[4], text, len);\n    if (int32_t err = write_all(fd, wbuf, 4 + len)) {\n        return err;\n    }\n\n    // 4 bytes header\n    char rbuf[4 + k_max_msg + 1];\n    errno = 0;\n    int32_t err = read_full(fd, rbuf, 4);\n    if (err) {\n        if (errno == 0) {\n            msg(\"EOF\");\n        } else {\n            msg(\"read() error\");\n        }\n        return err;\n    }\n\n    memcpy(\u0026len, rbuf, 4);  // assume little endian\n    if (len \u003e k_max_msg) {\n        msg(\"too long\");\n        return -1;\n    }\n\n    // reply body\n    err = read_full(fd, \u0026rbuf[4], len);\n    if (err) {\n        msg(\"read() error\");\n        return err;\n    }\n\n    // do something\n    rbuf[4 + len] = '\\0';\n    printf(\"server says: %s\\n\", \u0026rbuf[4]);\n    return 0;\n}\n```\n\nì´ ì¥ì—ì„œëŠ” ì•„ì£¼ ê°„ë‹¨í•œ len ì— ëŒ€í•œ í”„ë¡œí† ì½œë§Œ ì‹¤ìŠµí•˜ì—¬ë³´ì•˜ì§€ë§Œ ì‹¤ì œ í”„ë¡œí† ì½œì€ í›¨ì”¬ ë” ë³µì¡í•˜ë‹¤. ë˜ ë°”ì´ë„ˆë¦¬ ëŒ€ì‹  í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ì´ëŠ” ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ ì¥ì ì´ ìˆì§€ë§Œ, íŒŒì”½ ë¶€ë¶„ì—ì„œ ë°”ì´ë„ˆë¦¬ë³´ë‹¤ ë” ì‹ ê²½ì¨ì•¼ í•˜ëŠ” ë¶€ë¶„ì´ ë§ë‹¤. ë˜ í”„ë¡œí† ì½œì— ë”°ë¼ êµ¬ë¶„ ë¶€í˜¸ê°€ ë‹¬ë¼ì§€ê±°ë‚˜ ì—†ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í”„ë¡œí† ì½œ ë¶„ì„ì€ ì‹¤ìŠµë³´ë‹¤ ë” ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤. \n\n\u003e ì½”ë“œ : https://github.com/jiyeonseo/build-your-own-redis-with-c-cpp/tree/main/04\n\n[[notes/build your own redis with c cpp 2]] ì— ì´ì–´ì§‘ë‹ˆë‹¤. \n\n---\n## Source Code \n- [jiyeonseo/build-your-own-redis-with-c-cpp](https://github.com/jiyeonseo/build-your-own-redis-with-c-cpp)\n## References \n- [Build Your Own Redis with C/C++](https://github.com/jiyeonseo/build-your-own-redis-with-c-cpp)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/build-your-own-redis-with-c-cpp-2":{"title":"(Build Your Own Redis with C/C++) 2. Event Loop","content":"\u003e [Build Your Own Redis With C/C++](https://build-your-own.org/redis) ì„ ë³´ê³  ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤. ë” ìì„¸í•œ ë‚˜ìš©ì€ ì›ë¬¸ì„ ì°¸ê³ í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì§ì ‘ ì‹¤ìŠµí•œ ì½”ë“œëŠ” [jiyeonseo/build-your-own-redis-with-c-cpp](https://github.com/jiyeonseo/build-your-own-redis-with-c-cpp) ì—ì„œ ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. [[notes/build your own redis with c cpp 1]] ì´ì–´ì§€ëŠ” ë…¸íŠ¸ì…ë‹ˆë‹¤. \n\n## The Event Loop and Nonblocking IO\nì„œë²„ì™€ì˜ ë„¤íŠ¸ì›Œí‚¹ ë™ì‹œ ì—°ê²° ì²˜ë¦¬ ë°©ë²• 3ê°€ì§€ \n- Forking : í´ë¼ì´ì–¸íŠ¸ì™€ì˜ ì—°ê²°ë§ˆë‹¤ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ ë§Œë“œëŠ” ë°©ë²• \n- Multi-threading : í”„ë¡œì„¸ìŠ¤ ëŒ€ì‹  ì—¬ëŸ¬ ì“°ë ˆë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•  \n- Event loops : í´ë§ê³¼ ë…¼ë¸”ë¡œí‚¹ IOë¥¼ ì´ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì£¼ë¡œ ë‹¨ì¼ ì“°ë ˆë“œìœ„ì—ì„œ ì‹¤í–‰. í”„ë¡œì„¸ìŠ¤ì™€ ì“°ë ˆë“œ ì˜¤ë²„í—¤ë“œë¡œ ì¸í•´ ëŒ€ë¶€ë¶„ ì´ë²¤íŠ¸ ë£¹ì„ ë§ì´ ì‚¬ìš©í•˜ëŠ” ì¶”ì„¸. \n\nevent loopì„ ì´ìš©í•œ ì„œë²„ìª½ì€ ë‹¤ìŒê³¼ ê°™ì´ í‘œí˜„í•  ìˆ˜ ìˆë‹¤. \n```\nall_fds = [...]\nwhile True:\n    active_fds = poll(all_fds) # blocking ì—†ì´ ë°”ë¡œ ì‘ë™ ê°€ëŠ¥í•œì§€ í™•ì¸ \n    for each fd in active_fds:\n        do_something_with(fd)\n\ndef do_something_with(fd):\n    if fd is a listening socket:\n        add_new_client(fd)\n    elif fd is a client connection:\n        while work_not_done(fd):\n            do_something_to_client(fd)\n\ndef do_something_to_client(fd):\n    if should_read_from(fd):\n        data = read_until_EAGAIN(fd)\n        process_incoming_data(data)\n    while should_write_to(fd):\n        write_until_EAGAIN(fd)\n    if should_close(fd):\n        destroy_client(fd)\n```\n- `fd` ë¡œ IO ì‘ì—…ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” nonblocking ëª¨ë“œì—¬ì•¼ í•¨\n\t- blocking ëª¨ë“œì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ ê²½ìš° block ëœë‹¤. \n\t\t- `read`  ì‹¤í–‰ì‹œ ì»¤ë„ì— ë°ì´í„°ê°€ ì—†ìœ¼ë©´\n\t\t- `write` ì‹¤í–‰ì‹œ ë²„í¼ê°€ ê°€ì¦‰ ì°¼ìœ¼ë©´ \n\t\t- `accept` ì‹¤í–‰ì‹œ ì»¤ë„ íì— ì»¤ë„¥ì…˜ì´ ì—†ìœ¼ë©´ \n\t- nonblocking ëª¨ë“œì—ì„œëŠ”, ê·¸ëƒ¥ ì„±ê³µ í•˜ê±°ë‚˜ ì•„ì§ ì¤€ë¹„ ì•ˆë¨ ì˜¤ë¥˜ì¸ `EAGAIN` ì˜¤ë¥˜ë¥¼ ë‚´ë©° ì‹¤íŒ¨. \n\t\t- `EAGAIN` ì˜¤ë¥˜ê°€ ë‚˜ë©´ `poll` ì„ í†µí•´ ì¤€ë¹„ê°€ ë‹¤ ëë‚œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì•¼ë§Œ í•¨. \n- `poll` : ì´ë²¤íŠ¸ ë£¹ì—ì„œì˜ ìœ ì¼í•œ blocking ì‘ì—…. \n- ë…¼ë¸”ë½í‚¹ ëª¨ë“œì—ì„œ blocking ë°–ì— ì§€ì›í•˜ì§€ ì•ŠëŠ” API (ì˜ˆë¥¼ ë“¤ì–´ `gethostbyname` ì´ë‚˜ disk IO) ëŠ” ì“°ë ˆë“œ í’€ì—ì„œ ìˆ˜í–‰í•´ì•¼ë§Œ í•œë‹¤. \n- `fd`ë¥¼ ë…¼ë¸”ë½í‚¹ ëª¨ë“œë¡œ ì„¸íŒ…í•˜ê¸° ìœ„í•´ì„œëŠ” `fcntl`ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤. \n```cpp\nstatic void fd_set_nb(int fd) {\n    errno = 0;\n    int flags = fcntl(fd, F_GETFL, 0);\n    if (errno) {\n        die(\"fcntl error\");\n        return;\n    }\n\n    flags |= O_NONBLOCK;\n\n    errno = 0;\n    (void)fcntl(fd, F_SETFL, flags);\n    if (errno) {\n        die(\"fcntl error\");\n    }\n}\n```\n- Linuxì—ì„œëŠ” `poll` ì´ì™¸ì—ë„ `select`, `epoll`ê³¼ ê°™ì€ syscallë“¤ì´ ìˆë‹¤. \n\t- `select` : ê¸°ë³¸ì ìœ¼ë¡œëŠ” `poll`ê³¼ ë¹„ìŠ·. í•˜ì§€ë§Œ ìµœëŒ€ `fd` ì œí•œìˆ˜ê°€ ì ì–´ ìš”ì¦˜ì—ëŠ” ì‚¬ìš©ë˜ê³  ìˆì§€ ì•ŠìŒ. \n\t- `epoll` : stateful API. \n\t\t- `epoll_create` : `fd` ìƒì„±\n\t\t- `epoll_wait` : `fd` ì‘ë™ \n\t\t- `epoll_ctl` : `fd` ì¡°ì‘\n\nìœ„ Event loopì„ ì´ìš©í•´ì„œ ì„œë²„ ì½”ë“œë¥¼ ì—…ë°ì´íŠ¸ í•´ë³´ì. ë¨¼ì € `Conn`.   \n```cpp\nenum {\n    STATE_REQ = 0,\n    STATE_RES = 1,\n    STATE_END = 2,  // mark the connection for deletion\n};\n\nstruct Conn {\n    int fd = -1;\n    uint32_t state = 0;     // either STATE_REQ or STATE_RES\n    // buffer for reading\n    size_t rbuf_size = 0;\n    uint8_t rbuf[4 + k_max_msg];\n    // buffer for writing\n    size_t wbuf_size = 0;\n    size_t wbuf_sent = 0;\n    uint8_t wbuf[4 + k_max_msg];\n};\n```\n- nonblocking ëª¨ë“œì—ì„œ IO ì‘ì—…(read, write)ë¥¼ ìœ„í•œ ë²„í¼ í•„ìš” \n- `state` connection ìƒíƒœìš© \n\t- `STATE_REQ` : reqding request ìš© \n\t- `STATE_RES` : sending response ìš©\n\n```cpp \n    int fd = socket(AF_INET, SOCK_STREAM, 0);\n    if (fd \u003c 0) {\n        die(\"socket()\");\n    }\n\n    // bind, listen and etc\n    // code omitted...\n\n    // a map of all client connections, keyed by fd\n    std::vector\u003cConn *\u003e fd2conn;\n\n    // set the listen fd to nonblocking mode\n    fd_set_nb(fd);\n\n    // the event loop\n    std::vector\u003cstruct pollfd\u003e poll_args;\n    while (true) {\n        // prepare the arguments of the poll()\n        poll_args.clear();\n        // for convenience, the listening fd is put in the first position\n        struct pollfd pfd = {fd, POLLIN, 0};\n        poll_args.push_back(pfd);\n        // connection fds\n        for (Conn *conn : fd2conn) {\n            if (!conn) {\n                continue;\n            }\n            struct pollfd pfd = {};\n            pfd.fd = conn-\u003efd;\n            pfd.events = (conn-\u003estate == STATE_REQ) ? POLLIN : POLLOUT;\n            pfd.events = pfd.events | POLLERR;\n            poll_args.push_back(pfd);\n        }\n\n        // poll for active fds\n        // the timeout argument doesn't matter here\n        int rv = poll(poll_args.data(), (nfds_t)poll_args.size(), 1000);\n        if (rv \u003c 0) {\n            die(\"poll\");\n        }\n\n        // process active connections\n        for (size_t i = 1; i \u003c poll_args.size(); ++i) {\n            if (poll_args[i].revents) {\n                Conn *conn = fd2conn[poll_args[i].fd];\n                connection_io(conn);\n                if (conn-\u003estate == STATE_END) {\n                    // client closed normally, or something bad happened.\n                    // destroy this connection\n                    fd2conn[conn-\u003efd] = NULL;\n                    (void)close(conn-\u003efd);\n                    free(conn);\n                }\n            }\n        }\n\n        // try to accept a new connection if the listening fd is active\n        if (poll_args[0].revents) {\n            (void)accept_new_conn(fd2conn, fd);\n        }\n    }\n```\n- ì´ë²¤íŠ¸ ë£¹ì—ì„œ ê°€ì¥ ë¨¼ì € í•„ìš”í•œ ê²ƒì€ `poll` ì„¤ì •\n\t- listening `fd`  :  `POLLIN`  ìƒíƒœë¡œ \n\t- connection `fd` :  struct `Conn` ì— ë”°ë¼ ìƒíƒœê°€ ë³€ê²½ \n- ë•Œì— ë”°ë¼, poll ìƒíƒœê°€ reading(`POLLIN`) ì´ê±°ë‚˜ writing (`POLLOUT`)ì´ ì•„ë‹Œ ê²½ìš°ë„ ìˆë‹¤. \n- `epoll`ì„ ì‚¬ìš©í•œë‹¤ë©´ `epoll_ctl` ë¡œ ì„¤ì •ëœ `fd` ë¡œ ì—…ë°ì´íŠ¸ í•´ì£¼ì–´ì•¼ í•œë‹¤. \n- `poll` argumentë¡œ timeout ê°’ ì„¤ì •ë„ ìˆëŠ”ë° ì—¬ê¸°ì„œëŠ” í¬ê²Œ ì¤‘ìš”í•˜ì§€ ì•ŠìŒìœ¼ë¡œ ì„ì˜ì˜ í° ìˆ˜ë¥¼ ë„£ì–´ì¤Œ. \n- `poll`ì„ ë°˜í™˜ ë°›ìœ¼ë©´ reading/writing ì¤€ë¹„ê°€ ë ë•Œ ë§ˆë‹¤ ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆë‹¤. \n- `accept_new_conn` ì€ ìƒˆë¡œìš´ connectionì„ ë°›ê³  `struct Conn` ê°ì²´ë¥¼ ë§Œë“ ë‹¤. (ì•„ë˜)\n\n```cpp\nstatic int32_t accept_new_conn(std::vector\u003cConn *\u003e \u0026fd2conn, int fd) {\n    // accept \n    struct sockaddr_in client_addr = {};\n    socklen_t socklen = sizeof(client_addr);\n    int connfd = accept(fd, (struct sockaddr *)\u0026client_addr, \u0026socklen);\n    if (connfd \u003c 0) {\n        msg(\"accept() error\");\n        return -1;  // error\n    }\n\n    // set the new connection fd to nonblocking mode\n    fd_set_nb(connfd);\n    // creating the struct Conn\n    struct Conn *conn = (struct Conn *)malloc(sizeof(struct Conn));\n    if (!conn) {\n        close(connfd);\n        return -1;\n    }\n    conn-\u003efd = connfd;\n    conn-\u003estate = STATE_REQ;\n    conn-\u003erbuf_size = 0;\n    conn-\u003ewbuf_size = 0;\n    conn-\u003ewbuf_sent = 0;\n    conn_put(fd2conn, conn);\n    return 0;\n}\n```\n- í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ìƒíƒœ ì²´í¬(state machine)ë¥¼ ìœ„í•œ `connection_io()`\n```cpp\nstatic void connection_io(Conn *conn) {\n    if (conn-\u003estate == STATE_REQ) {\n        state_req(conn);\n    } else if (conn-\u003estate == STATE_RES) {\n        state_res(conn);\n    } else {\n        assert(0);  // not expected\n    }\n}\n```\n- `STATE_REQ` ëŠ” ì½ê¸° ìƒíƒœ \n```cpp\nstatic void state_req(Conn *conn) {\n    while (try_fill_buffer(conn)) {}\n}\n\nstatic bool try_fill_buffer(Conn *conn) {\n    // try to fill the buffer\n    assert(conn-\u003erbuf_size \u003c sizeof(conn-\u003erbuf));\n    ssize_t rv = 0;\n    do {\n        size_t cap = sizeof(conn-\u003erbuf) - conn-\u003erbuf_size;\n        rv = read(conn-\u003efd, \u0026conn-\u003erbuf[conn-\u003erbuf_size], cap);\n    } while (rv \u003c 0 \u0026\u0026 errno == EINTR);\n    if (rv \u003c 0 \u0026\u0026 errno == EAGAIN) {\n        // got EAGAIN, stop.\n        return false;\n    }\n    if (rv \u003c 0) {\n        msg(\"read() error\");\n        conn-\u003estate = STATE_END;\n        return false;\n    }\n    if (rv == 0) {\n        if (conn-\u003erbuf_size \u003e 0) {\n            msg(\"unexpected EOF\");\n        } else {\n            msg(\"EOF\");\n        }\n        conn-\u003estate = STATE_END;\n        return false;\n    }\n\n    conn-\u003erbuf_size += (size_t)rv;\n    assert(conn-\u003erbuf_size \u003c= sizeof(conn-\u003erbuf) - conn-\u003erbuf_size);\n\n    // Try to process requests one by one.\n    // Why is there a loop? Please read the explanation of \"pipelining\".\n    while (try_one_request(conn)) {}\n    return (conn-\u003estate == STATE_REQ);\n}\n```\n- `try_fill_buffer` : read bufferë¥¼ ë°ì´í„°ë¡œ ì±„ì›Œì£¼ëŠ” í•¨ìˆ˜ \n\t- read bufferê°€ ì œí•œì ì´ê¸° ë•Œë¬¸ì— ë§Œì•½ ê½‰ ì°¨ê²Œ ë˜ë©´ ê·¸ ì „ì— `EAGAIN` ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. \n\t- ë”°ë¼ì„œ, ì½ê¸° í›„ read bufferë¥¼ ì²˜ë¦¬í•˜ê³  `EAGAIN` ë°œìƒ ì „ê¹Œì§€ ë£¹ì„ ëˆë‹¤. \n- `read` syscallì€ `EINTR` ì—ëŸ¬ í›„ì— ë¦¬íŠ¸ë¼ì´ í•´ì£¼ì–´ì•¼ í•œë‹¤.\n\t- `EINTR`ì€ syscallì´ ì¤‘ë‹¨ ë˜ì—ˆë‹¤ëŠ” ëœ»ìœ¼ë¡œ, ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ ìƒê´€ ì—†ì´ ì¬ì‹œë„ë¥¼ í•´ì£¼ì–´ì•¼ í•œë‹¤. \n- `try_fill_buffer` ì—ì„œ loopì„ ë„ëŠ” ì´ìœ  \n\t- ìš”ì²­/ì‘ë‹µ í”„ë¡œí† ì½œì—ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ ë³´ë‚´ë†“ê³  ê³„ì† ê¸°ë‹¤ë¦¬ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê³„ì† í•„ìš”í•œ ìš”ì²­ì„ ê³„ì† ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©´ ì‹œê°„ì„ ë” ì ˆì•½í•  ìˆ˜ ìˆìŒ. -\u003e \"pipelining\" \n\t- ë”°ë¼ì„œ, read bufferì— í•˜ë‚˜ì˜ ìš”ì²­ë§Œ í¬í•¨ëœë‹¤ ë¼ê³  í•  ìˆ˜ ì—†ìŒ. í•˜ë‚˜ì˜ read bufferì—ëŠ” ì—¬ëŸ¬ ìš”ì²­ì´ ìˆì„ ìˆ˜ ìˆìŒ. \n- `try_one_request` ì—ì„œ read bufferì— ìˆëŠ” ìš”ì²­ í•˜ë‚˜ì”©ì„ êº¼ë‚´ì™€ ì‘ë‹µì„ ë§Œë“¤ê³  `STATE_RES` ìƒíƒœê°’ìœ¼ë¡œ ë³€ê²½í•œë‹¤. \n```cpp\nstatic bool try_one_request(Conn *conn) {\n    // try to parse a request from the buffer\n    if (conn-\u003erbuf_size \u003c 4) {\n        // not enough data in the buffer. Will retry in the next iteration\n        return false;\n    }\n    uint32_t len = 0;\n    memcpy(\u0026len, \u0026conn-\u003erbuf[0], 4);\n    if (len \u003e k_max_msg) {\n        msg(\"too long\");\n        conn-\u003estate = STATE_END;\n        return false;\n    }\n    if (4 + len \u003e conn-\u003erbuf_size) {\n        // not enough data in the buffer. Will retry in the next iteration\n        return false;\n    }\n\n    // got one request, do something with it\n    printf(\"client says: %.*s\\n\", len, \u0026conn-\u003erbuf[4]);\n\n    // generating echoing response\n    memcpy(\u0026conn-\u003ewbuf[0], \u0026len, 4);\n    memcpy(\u0026conn-\u003ewbuf[4], \u0026conn-\u003erbuf[4], len);\n    conn-\u003ewbuf_size = 4 + len;\n\n    // remove the request from the buffer.\n    // note: frequent memmove is inefficient.\n    // note: need better handling for production code.\n    size_t remain = conn-\u003erbuf_size - 4 - len;\n    if (remain) {\n        memmove(conn-\u003erbuf, \u0026conn-\u003erbuf[4 + len], remain);\n    }\n    conn-\u003erbuf_size = remain;\n\n    // change state\n    conn-\u003estate = STATE_RES;\n    state_res(conn);\n\n    // continue the outer loop if the request was fully processed\n    return (conn-\u003estate == STATE_REQ);\n}\n```\n\në³€ê²½ëœ connì„ ë°›ëŠ” `state_res` ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.\n- `EAGAIN` ì´ ë ë•Œê¹Œì§€ ê³„ì† write bufferë¥¼ flush í•˜ê³ , flushê°€ ì™„ë£Œë˜ë©´ stateë¥¼ `STATE_REQ`ë¡œ ë°”ê¿”ì¤€ë‹¤.  \n\n```cpp\nstatic void state_res(Conn *conn) {\n    while (try_flush_buffer(conn)) {}\n}\n\nstatic bool try_flush_buffer(Conn *conn) {\n    ssize_t rv = 0;\n    do {\n        size_t remain = conn-\u003ewbuf_size - conn-\u003ewbuf_sent;\n        rv = write(conn-\u003efd, \u0026conn-\u003ewbuf[conn-\u003ewbuf_sent], remain);\n    } while (rv \u003c 0 \u0026\u0026 errno == EINTR);\n    if (rv \u003c 0 \u0026\u0026 errno == EAGAIN) {\n        // EAGAIN ì´ ë˜ë©´ ë©ˆì¶˜ë‹¤.\n        return false;\n    }\n    if (rv \u003c 0) {\n        msg(\"write() error\");\n        conn-\u003estate = STATE_END;\n        return false;\n    }\n    conn-\u003ewbuf_sent += (size_t)rv;\n    assert(conn-\u003ewbuf_sent \u003c= conn-\u003ewbuf_size);\n    if (conn-\u003ewbuf_sent == conn-\u003ewbuf_size) {\n        // responseê°€ ëª¨ë‘ ë³´ë‚´ì§€ë©´, STATE_REQë¡œ ë‹¤ì‹œ stateë¥¼ ë°”ê¾¸ì–´ ì¤€ë‹¤.\n        conn-\u003estate = STATE_REQ;\n        conn-\u003ewbuf_sent = 0;\n        conn-\u003ewbuf_size = 0;\n        return false;\n    }\n    // ì•„ì§ write buffer(wbuf)ì— ë°ì´í„°ê°€ ë‚¨ì•„ìˆë‹¤ë©´ ë‹¤ì‹œ ì“°ê¸°ë¥¼ ì‹œë„í•œë‹¤.\n    return true;\n}\n```\n\n\u003e ì½”ë“œ : https://github.com/jiyeonseo/build-your-own-redis-with-c-cpp/tree/main/06","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/build-your-own-redis-with-c-cpp-3":{"title":"(Build Your Own Redis with C/C++) 3. Implement basic commands","content":"\u003e [Build Your Own Redis With C/C++](https://build-your-own.org/redis) ì„ ë³´ê³  ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤. ë” ìì„¸í•œ ë‚˜ìš©ì€ ì›ë¬¸ì„ ì°¸ê³ í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì§ì ‘ ì‹¤ìŠµí•œ ì½”ë“œëŠ” [jiyeonseo/build-your-own-redis-with-c-cpp](https://github.com/jiyeonseo/build-your-own-redis-with-c-cpp) ì—ì„œ ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. [[notes/build your own redis with c cpp 2]] ì´ì–´ì§€ëŠ” ë…¸íŠ¸ì…ë‹ˆë‹¤. \n\nê¸°ë³¸ command ìŠ¤í‚¤ë§ˆëŠ” ì•„ë˜ì™€ ê°™ì´ í•œë‹¤. \n```\n+------+-----+------+-----+------+-----+-----+------+\n| nstr | len | str1 | len | str2 | ... | len | strn |\n+------+-----+------+-----+------+-----+-----+------+\n```\n- `nstr` : number of string. ë¬¸ìì—´ ê°¯ìˆ˜. (32 bits)\n- `len` : length of the following string. ë¬¸ìì—´ ê¸¸ì´ (32 bits)\n\nì‘ë‹µì€ ì•„ë˜ì™€ ê°™ì´ 32 bits ìƒíƒœ ì½”ë“œì™€ ì‘ë‹µ ë©”ì„¸ì§€ë¡œ êµ¬ì„±ëœë‹¤. \n```\n+-----+---------+\n| res | data... |\n+-----+---------+\n```\n\n\n## `get`, `set`, `del`\n","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/common-vulnerabilities-with-nodejs":{"title":"ì„œë²„ ê°œë°œí•˜ë©° ì‰½ê²Œ ë†“ì¹˜ëŠ” ì·¨ì•½ì  5ê°€ì§€","content":"## 1.  Injection Attacks\n- [[SQL Injection]]\n- [[NoSQL Injection]]\n- [[Common Injection]]\n```javascript\napp.get(\"/user\", (req, res) =\u003e {\n  const id = req.query.id;\n  const query = `SELECT * FROM users WHERE id = ${id}`;\n```\n- ë¬¸ì œì  : query parameter `id`ë¡œ `1 OR 1=1`ì™€ ê°™ì´ ì˜¤ê²Œë˜ë©´ `SELECT * FROM users WHERE id = 1 OR 1=1` ì²˜ëŸ¼ ì¿¼ë¦¬ë¬¸ì´ ë˜ì–´ ì „ì²´ usersë¥¼ return í•  ìœ„í—˜ì´ìˆë‹¤. \n- ê°œì„  : prepared statementë¡œ ì¿¼ë¦¬í•˜ê³  `id` ì²´í¬ í›„ ì‚¬ìš©í•˜ë„ë¡ \n\t- user input validation ì¤‘ìš”!\n```javascript\napp.get(\"/user\", (req, res) =\u003e {\n  const id = req.query.id;\n  const query = \"SELECT * FROM users WHERE id = ?\";\n  connection.query(query, [id], (error, results) =\u003e {\n    if (error) {\n      throw error;\n    }\n    res.send(results);\n  });\n});\n```\n\n## 2.  Cross-Site Scripting (XSS)\n- ì›¹ì‚¬ì´íŠ¸ë¥¼ í†µí•´ ì•…ì˜ì ì¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚½ì…í•˜ì—¬ ê³µê²©.\n- URL paramìœ¼ë¡œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚½ì…í•˜ì—¬, ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë˜ë„ë¡ ìœ ë„ \n```javascript\napp.get(\"/\", (req, res) =\u003e {\n\tconst name = req.query.name; \n\tres.send(`\u003ch1\u003eHello, ${name}\u003c/h1\u003e`); \n});\n```\n- ë¬¸ì œì  : param `\u003cscript\u003ealert('XSS')\u003c/script\u003e` ì™€ ê°™ì´ ë“¤ì–´ì˜¤ëŠ” ê²½ìš°\n\n## 3.  Denial-of-Service (DoS)\n\n## 4.  Improper Authentication and Authorization\n\n## 5.  Insecure Direct Object References\n\n\n## References\n- [# 5 Common Server Vulnerabilities with Node.js](https://blog.javascripttoday.com/blog/node-js-server-vulnerabilities/)\n","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/erc-20":{"title":"ERC-20","content":"- [ERC-20 Token Standard](https://ethereum.org/en/developers/docs/standards/tokens/erc-20/)\n\n- ê° í† í°ì€ ë‹¤ë¥¸ í† í°ê³¼ ì •í™•íˆ ë™ì¼í•œ ì†ì„±ì„ ê°€ì§€ê³  ìˆë‹¤. ETHê³¼ ë™ì¼í•˜ê²Œ ì‘ë™í•˜ë©°, 1ê°œì˜ í† í°ì€ ë‹¤ë¥¸ í† í°ê³¼ í•­ìƒ ê°™ë‹¤. \n\n```sol\nmapping(address =\u003e uint256) private _balances;\n```\n- ëˆ„ê°€(adress) =\u003e ì–¼ë§ˆ(unit256) ë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€ ì €ì¥  \n\n## Methods \n```\nfunction name() public view returns (string)\nfunction symbol() public view returns (string)\nfunction decimals() public view returns (uint8)\nfunction totalSupply() public view returns (uint256)\nfunction balanceOf(address _owner) public view returns (uint256 balance)\nfunction transfer(address _to, uint256 _value) public returns (bool success)\nfunction transferFrom(address _from, address _to, uint256 _value) public returns (bool success)\nfunction approve(address _spender, uint256 _value) public returns (bool success)\nfunction allowance(address _owner, address _spender) public view returns (uint256 remaining)\n\n```\n- `transfer` : `from` ê³„ì¢Œ =\u003e `to`ê³„ì¢Œë¡œ ì”ê³ ë¥¼ ë°”ê¿ˆ ([êµ¬í˜„ ì½”ë“œ](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol#L226-L248))\n\n## References\n- [OpenZeppelin - ERC-20 Implementation](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol)\n- ","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/ethereum-2.0":{"title":"ì´ë”ë¦¬ì›€ 2.0","content":"- PoW(ì‘ì—…ì¦ëª…) ìœ¼ë¡œ ë³´ì™„í•˜ì§€ ëª»í–ˆë˜ ë¶€ë¶„ë“¤ì„ \n- PoS(ì§€ë¶„ì¦ëª…)ì˜ ì‹œê°„ ë‹¨ìœ„ëŠ” ìŠ¬ë¡¯ê³¼ ì—íŒ\n\n## ë°¸ë¦¬ë°ì´í„° \n- ë³´ì¦ê¸ˆ 32ETH ë¥¼ ì˜ˆì¹˜í•˜ì—¬ì•¼ í•œë‹¤.\n- ì—­í•  \n\t- ë°¸ë¦¬ë°ì´í„° ì§‘ë‹¨ì„ ì €ì¥ ë° ìœ ì§€ ê´€ë¦¬ \n\t- Crosslinks ì²˜ë¦¬\n\t- ë¸”ë¡ í•©ì˜ ì²˜ë¦¬\n\n## ìŠ¬ë¡¯ (slot)\n- ì‹œê°„ì˜ ê°€ì¥ ì‘ì€ ë‹¨ìœ„ \n- 12ì´ˆ = 1 ìŠ¬ë¡¯ (1 ìŠ¬ë¡¯ë‹¹ 1ê°œì˜ ë¸”ë¡ í˜•ì„±)\n- 32ìŠ¬ë¡¯ = 1 ì—íŒ. ì¦‰ 384ì´ˆ = 1 ì—íŒ\n\n## ì—íŒ (epoch)\n- ë§¤ ì—íŒë§ˆë‹¤ ëª¨ë“  ë°¸ë¦¬ë°ì´í„°ë“¤ì—ê²Œ ì„ë¬´ê°€ ì£¼ì–´ì§ \n- 1 ì—íŒ = 32 ìŠ¬ë¡¯ ì´ë¯€ë¡œ, 32 ë°¸ë¦¬ë°ì´í„°ë¥¼ ì„ íƒ, ê° ìŠ¬ë¡¯ì— ë°°ì¹˜\n\t- ì´ë“¤ì´ ë¸”ë¡ í”„ë¡œë“€ì„œ. ë¸”ë¡ì„ ë§Œë“¬\n\t- ì´ ë°¸ë¦¬ë°ì´í„°ë“¤ì€ ë¸”ë¡ ë§Œë“¤ê³  ê²€ì¦ë„ í•˜ì—¬ \"ë…¸ë“œ ìœ„ì›íšŒ\" ë¼ê³ ë„ ë¶€ë¥¸ë‹¤.\n\t- 2/3 ë…¸ë“œ ìœ„ì›íšŒê°€ ì´ ë¸”ë¡ì´ ì •í™•í•˜ë‹¤ ìŠ¹ì¸í•˜ë©´ ê²€ì¦ì´ ì™„ë£Œ ë¨. \n- ëª¨ë“  ê²€ì¦ì´ ì™„ë£Œë˜ë©´ ë‹¤ìŒ ì—íŒì—ì„œ ìƒˆë¡œìš´ ìŠ¬ë¡¯ì— ê° ë°¸ë¦¬ë°ì´í„°ë“¤ ë°°ì¹˜ \n\n## ë¹„ì½˜ì²´ì¸\n- ë°¸ë¦¬ë°ì´í„°ë“¤ì„ ë¨ë¤í•˜ê²Œ ë°°ì¹˜í•˜ê³  ìƒíƒœ ì €ì¥ ê´€ë¦¬.\n\n## References\n- [í•´ì‹œë„· - ìŠ¬ë¡¯](http://wiki.hash.kr/index.php/%EC%8A%AC%EB%A1%AF_(%EB%B8%94%EB%A1%9D%EC%B2%B4%EC%9D%B8))\n- [# Ethereum 2.0 Phase 0 -- Beacon Chain Fork Choice](https://github.com/ethereum/annotated-spec/blob/master/phase0/fork-choice.md)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/ethers.js":{"title":"ethers.js","content":"- [ethers.js](https://docs.ethers.io/v5/)\n-  Web3 JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ 2016ë…„ì— Richard Mooreê°€ ë§Œë“¤ì—ˆë‹¤. \n- ê¸°ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ë‹¤ë¥´ê²Œ web3 ê¸°ë°˜ìœ¼ë¡œ [[notes/Ethereum]] ë„¤íŠ¸ì›Œí¬ì™€ ìƒí˜¸ì‘ìš©ì´ ì‰½ë‹¤.\n- ì²˜ìŒì—ëŠ” ethers.ioë¥¼ ìœ„í•´ ë§Œë“¤ì–´ì¡ŒìŒ\n- Typescriptë¡œ ì‘ì„±ë˜ì–´ìˆìœ¼ë©° \n\n## References\n-[Full Guide: What is Ethers.js?](https://moralis.io/full-guide-what-is-ethers-js/)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/hard-fork":{"title":"í•˜ë“œí¬í¬","content":"\n- ë¸”ë¡ì²´ì¸ ì—…ê·¸ë ˆì´ë“œ ì‘ì—…\n- ê¸°ì¡´ ë¸”ë¡ì²´ì¸ì—ì„œ ë‹¤ë¥¸ ë¸”ë¡œì²´ì¸ìœ¼ë¡œ ë„˜ì–´ê°ˆë•Œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹\n\n## ì´ìœ  \n- ê¸°ìˆ ì  ë¬¸ì œ í˜¹ì€ ë³´ì•ˆ ê°œì„ ì„ ìœ„í•´\n- ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€ í•˜ê¸° ìœ„í•´ \n- ê±°ë˜ ë°˜ì „ì„ ìœ„í•´","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/memorydb":{"title":"MemoryDB","content":"- [Redis Cluster](https://redis.io/docs/management/scaling/)ë¡œ ë‹¤ì¤‘AZ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì½ìœ¼ë©´ì„œë„ ë‚´êµ¬ì„±ìˆëŠ” DB. \n- ë”°ë¡œ RDB + Cache êµ¬ì„± í•„ìš” ì—†ì´, Redis êµ¬ì„± í•˜ë‚˜ë§Œìœ¼ë¡œ Consistencyì™€ ì†ë„ì˜ ì¥ì ì„ ëª¨ë‘ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.\n\n## íŠ¹ì§• \n- ë³µì œë³¸ ë…¸ë“œì— ëŒ€í•œ ì¼ê´€ì„± ë³´ì¥\n- milisecond ë‹¨ìœ„ writeì™€ microsecond ë‹¨ìœ„ì˜ read\n- Redis client ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥\n### Cluster\n- ë…¸ë“œì˜ ëª¨ìŒ\n\t- primary node : ì½ê¸°/ì“°ê¸°\n        - readonly : ì½ê¸°\n- ë°ì´í„° ì„¸íŠ¸ëŠ” ìƒ¤ë“œë¡œ ë¶„í• ë˜ì–´ ì €ì¥ë¨\n### Node\n- Amazon EC2 instance\n### Shard\n- primary\n\n## Terraform ìœ¼ë¡œ Cluster ë§Œë“¤ê¸°\n\n```sql\nresource \"aws_memorydb_cluster\" \"example\" {\n  acl_name                 = \"open-access\"\n  name                     = \"my-cluster\"\n  node_type                = \"db.t4g.small\"\n  num_shards               = 2\n  security_group_ids       = [aws_security_group.example.id]\n  snapshot_retention_limit = 7\n  subnet_group_name        = aws_memorydb_subnet_group.example.id\n}\n```\n\n-   [(Terraform) ****Resource: aws_memorydb_cluster****](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/memorydb_cluster)\n\n## References\n- [Amazon MemoryDB for Redis](https://docs.aws.amazon.com/memorydb/latest/devguide/what-is-memorydb-for-redis.html)\n","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/readme.io-setting":{"title":"readme.io ì„¸íŒ…","content":"\n## API References Try it Authentication  ì¶”ê°€í•˜ê¸° \n![](https://user-images.githubusercontent.com/2231510/205079888-b4b68d17-aefc-4043-be51-6a94e89e64cd.png)\n- `openapi.json` ìœ¼ë¡œ ì‹±í¬í•˜ëŠ” ê²½ìš°, open api spec ì¤‘ `SecurityScheme` ì„ ë§ì¶°ì£¼ì–´ì•¼ í•œë‹¤. \n- [Security Scheme Object](https://docs.readme.com/main/docs/openapi-compatibility-chart#security-scheme-object)\n\n### FastAPIì—ì„œ ì¶”ê°€í•˜ê¸° \n```python\nfrom fastapi import FastAPI, Security\nfrom fastapi.security import APIKeyHeader\n\nx_api_key = APIKeyHeader(name=\"x-api-key\", auto_error=False)\n\nasync def auth(x_api_key: str = Security(x_api_key)):\n  if x_api_key == get_config(\"API_KEY\"):\n    return x_api_key\n  else:\n    raise UnauthorizedException()\n\nrouter = APIRouter(dependencies= [Depends(auth)])\n\napp = FastAPI()\napp.include_router(router)\n\n```\n\nswaggerì—ì„œë„ Authorizeê°€ ìƒê¸´ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. \n![](https://user-images.githubusercontent.com/2231510/205088702-dc58cc59-75d9-47d1-8215-2329a673400d.png)\n`openapi.json` í™•ì¸í•˜ë©´ `components.securitySchemes` ê°€ ì¶”ê°€ ë˜ì–´ìˆë‹¤.\n![](https://user-images.githubusercontent.com/2231510/205089535-3e12ea04-6082-44ff-93f3-ac7ca1e3a491.png)\n- defaultê°’ ê¹Œì§€ ë„£ìœ¼ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ `x-default` ë¥¼ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.\n ```json\nsecurityDefinitions: {\n     API_KEY: {\n        type: \"apiKey\",\n        name: \"x-api-key\",\n        in: \"header\",\n        \"x-default\": \"demo-api-key\",\n\t},\n},\n```\n- [swagger authentication spec](https://swagger.io/docs/specification/authentication/) ","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/search-engine-hello":{"title":"hello ê²€ìƒ‰ ì—”ì§„","content":"- [https://beta.sayhello.so/](https://beta.sayhello.so/)\n- The search engine for instant answers\n- ì§ˆë¬¸ì— ëŒ€í•´ ë°”ë¡œ ëŒ€ë‹µ(answer)ë¥¼ ë³´ì—¬ì£¼ê³  ì¨ë¨¹ì„ ìˆ˜ ìˆëŠ” ì½”ë“œ ì¡°ê°ì„ ë°”ë¡œ ë³´ì—¬ì£¼ëŠ” ê°œë°œì ì¹œí™” ê²€ìƒ‰ ì—”ì§„ \n\n![](https://user-images.githubusercontent.com/2231510/204835776-eae19bc0-3a41-44c9-bed5-03ddbd0d51fd.png)\n\n\n## How to best use Hello\n- ìì—°ì–´ ê²€ìƒ‰ì–´ ì§€ì›. \n- `How to~` `What is~` ì™€ ê°™ì´ ê²€ìƒ‰í•˜ê¸°\n- \"check if string is a palindrome\" =\u003e \"how to check if string is a palindrome in javascript\"\n- ì§ˆë¬¸ í˜•ì‹ìœ¼ë¡œ ê²€ìƒ‰í•˜ê¸° \n\t- \"rust\" =\u003e \"what is rust?\"\n\n## VSCode Extension\n\n![](https://hello-code-snippets-vscode-extension-assets-public.s3.amazonaws.com/demo.png)\n\n- [Hello Code Snippets](https://marketplace.visualstudio.com/items?itemName=HelloCognition.hello-code-snippets)\n","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/stable-coin":{"title":"ìŠ¤í…Œì´ë¸”ì½”ì¸","content":"\n## References\n","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/supabase":{"title":"supabase","content":"- [supabase](https://supabase.com/)\n- Fairebase ëŒ€ì²´ì œë¡œ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸. Backend as a Serviceë¡œ ë°±ì—”ë“œ ì„œë²„ë¥¼ ê°„ë‹¨í•œ ì„¤ì •ë§Œìœ¼ë¡œ ë¹ ë¥´ê²Œ êµ¬ì¶•í•´ì¤€ë‹¤. \n\n## Features\n### Database\n- PostgreSQL \n- JWT authenticationì„ ì´ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ë‹¨ì—ì„œ ë°”ë¡œ SQL ì¿¼ë¦¬ê°€ ë“¤ì–´ì˜¤ë”ë¼ë„ ë£°ì— ë§ê²Œ ì¿¼ë¦¬ ì‹¤í–‰. \n- ê°„ë‹¨í•œ CRUDëŠ” supabaseì—ì„œ ì œê³µí•˜ëŠ” instant APIë¥¼ ì´ìš©í•˜ì—¬ ë°”ë¡œ ì¿¼ë¦¬ ê°€ëŠ¥ \n- \n\n## Authentication\n\n## Storage\n\n## Edge Functions\n\n## Realtime\n","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/unleash":{"title":"unleash","content":"- í”¼ì³ í† ê¸€ ì„œë¹„ìŠ¤ (ë¹„ìŠ·í•œ ì„œë¹„ìŠ¤ë¡œëŠ” [[notes/LaunchDarkly]] ê°€ ìˆë‹¤.)  \n- ì½”ë“œ ë°°í¬ì™€ ê¸°ëŠ¥ ë°°í¬ë¥¼ ì„œë¡œ ë¶„ë¦¬ì‹œí‚´ìœ¼ë¡œì¨ ë”ìš± ì•ˆì „í•œ ë°°í¬ ìœ ì—°í•œ ê¸°ëŠ¥ ì˜¤í”ˆ/í´ë¡œì¦ˆë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. \n- Client (Server Side) / Frontend (Web+Mobile) ê°ê°ì˜ SDKë¥¼ ì˜ ì§€ì›í•˜ê³  ìˆì–´ ì—¬ëŸ¬ ë°©ë©´ì—ì„œ ì‚¬ìš©í•˜ê¸° ì¢‹ë‹¤. \n![](https://docs.getunleash.io/assets/images/unleash-architecture-40c7293e777a7bea0df4edeeef8a6bf4.svg)\n- Enterpriseì™€ opensource ë‘˜ ë‹¤ ì œê³µí•˜ê³  ìˆì–´ ì…ë§›ì— ì•Œë§ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. \n\t- Managed ëŠ” $80/Month\n\t- [Dockerfile](https://docs.getunleash.io/reference/deploy/getting-started)\n\t- [Helm chart](https://github.com/unleash/helm-charts/)\n\t\n## Feature í† ê¸€ íƒ€ì…\n- Unleashì—ì„œëŠ” 5ê°€ì§€ í† ê¸€ íƒ€ì…ì„ ì œê³µí•˜ê³  ìˆë‹¤. ([doc](https://docs.getunleash.io/reference/feature-toggle-types))\n- í† ê¸€ íƒ€ì…ë³„ë¡œ ê¸°ëŠ¥ì°¨ì´ëŠ” ì—†ìœ¼ë©° í‘œí˜„ë˜ëŠ” **ì•„ì´ì½˜ ëª¨ì–‘ë§Œ ë‹¤ë¥´ê³ ** ê°ê°ì˜ **ì˜ˆìƒ ìˆ˜ëª…ì‹œê°„**ì´ ë‹¤ë¥¼ ë¿ì´ë‹¤. \n\t- í† ê¸€ íƒ€ì…ì„ ì •í–ˆë”ë¼ë„ ë‚˜ì¤‘ì— ë³€ê²½ ê°€ëŠ¥í•˜ë‹¤. \n\t- [íƒ€ì…ë³„ ì˜ˆìƒ ìˆ˜ëª…ì‹œê°„](https://www.getunleash.io/blog/feature-toggle-life-time-best-practices) \n- Feature í† ê¸€ íƒ€ì…\n\t- Release : trunk based í™˜ê²½ì—ì„œ CDì—ì„œ ê³„ì†í•´ì„œ ë°°í¬ì‹œ (ì˜ˆìƒ ìˆ˜ëª… : 40 days)\n\t- Experiment : ì—¬ëŸ¬ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° í˜¹ì€ A/B í…ŒìŠ¤íŒ…(ì˜ˆìƒ ìˆ˜ëª… : 40 days)\n\t- Operational :  ìš´ì˜ ì¸¡ë©´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° (ì˜ˆìƒ ìˆ˜ëª… : 7 days)\n\t- Kill switch : ì²œì²œíˆ ê¸°ëŠ¥ ì‚­ì œí•´ë‚˜ê°ˆë•Œ. (ì˜ˆìƒ ìˆ˜ëª… : ì˜êµ¬) - [kill switch best practice](https://www.getunleash.io/blog/kill-switches-best-practice)\n\t- Permission : íŠ¹ì • ìœ ì €ë“¤ì—ê²Œë§Œ ê¸°ëŠ¥ í˜¹ì€ í”„ëŸ¬ë•íŠ¸ë¥¼ ì—´ì–´ì£¼ëŠ” ê²½ìš° (ì˜ˆìƒ ìˆ˜ëª… : ì˜êµ¬)\n- `stale` ë¡œ mark í•´ì£¼ë©´ ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í† ê¸€ë¡œ í‘œì‹œí•´ë‘˜ ìˆ˜ ìˆë‹¤. \n\t- \u0008ë°”ë¡œ ì‚­ì œí•˜ê²Œ ë˜ë©´ í˜¹ì‹œë‚˜ ì˜ˆìƒì¹˜ ëª»í•œ ì¥ì• ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì§€ë§Œ ì´ë ‡ê²Œ ë¨¼ì € í‘œì‹œë¥¼ í•´ë‘ê²Œ ë˜ë©´ \"health\" íƒ­ì—ì„œ stale ëœ í† ê¸€ì´ í˜„ì¬ ì–¼ë§ˆë‚˜ ë“¤ì–´ì˜¤ê³  ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤. \n\t- [Technical Debt](https://docs.getunleash.io/reference/technical-debt) ì´ ê¸°ëŠ¥ì´ ê¹¨ë—í•œ ì½”ë“œë¥¼ ìœ ì§€í•˜ëŠ”ë° í° ë„ì›€ì´ ë  ê²ƒ ê°™ë‹¤.\n\n![](https://user-images.githubusercontent.com/2231510/208935165-cda5e879-5848-47e7-a15a-357c8e5daae8.png)\n\n## API Token ë§Œë“¤ê¸° \n- [How to create API Tokens](https://docs.getunleash.io/how-to/how-to-create-api-tokens)\n- ì—°ê²° ì½”ë“œì—ì„œ ì‚¬ìš©í•  API Tokenì„ ë¨¼ì € ë§Œë“¤ì–´ì•¼ í•œë‹¤.\n- ì„œë²„ì‚¬ì´ë“œëŠ” Type `Client`, ëª¨ë°”ì¼ì´ë‚˜ ì›¹ì€ Type `Frontend`, Unleash ìì²´ì— ëŒ€í•œ APIë¥¼ ìœ„í•´ì„œëŠ” Type `Admin` ìœ¼ë¡œ ë§Œë“¤ë©´ ëœë‹¤.\n- environment ë§ˆë‹¤ tokenì„ ë°œí–‰í•˜ì—¬ í™˜ê²½ë³„ë¡œ ê¸°ëŠ¥ì„ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤. \n![](https://user-images.githubusercontent.com/2231510/208928220-536afe05-ba09-4875-8dc4-6bb8d223f4c7.png)\n- ìƒì„±í•˜ë©´ SDKì—ì„œ ì—°ê²°ì‹œ ì‚¬ìš©í•´ì•¼í•˜ëŠ” \"API URL\"ì´ ë‚˜ì˜¨ë‹¤. \n\t- managedë¥¼ ì‚¬ìš©í•˜ê²Œë˜ë©´ `https://us.app.unleash-hosted.com/**/api/` \n\n## SDK ì—°ê²°í•˜ê¸° - Python\n- [Python SDK](https://docs.getunleash.io/reference/sdks/python)\n```py \nfrom UnleashClient import UnleashClient  \n  \nclient = UnleashClient(  \nurl=\"`https://us.app.unleash-hosted.com/**/api/\",  # ìœ„ì—ì„œ ë°›ì€ API URL ì…ë ¥\napp_name=\"\u0008cheese\", # ë‚˜ì¤‘ì— admin uiì—ì„œ applicationsì— ëœ¬ë‹¤.  \ncustom_headers={'Authorization': '\u003cAPI token\u003e'})  # ìœ„ì—ì„œ ë§Œë“  API token Thpe \"Client\"\n  \nclient.initialize_client()  \n  \nclient.is_enabled(\"unleash.beta.variants\")\n```\n- ìœ„ì™€ ê°™ì´ ì—°ê²° í›„ ì„œë²„ë¥¼ ì‹œì‘í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì—°ê²°ëœ applicationë“¤ì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. \n![](https://user-images.githubusercontent.com/2231510/208928977-8bd642f0-578c-4351-9915-04658a9725a6.png)\n\n\n## References\n- [ë§˜í¸í•œì„¸ìƒì—ì„œ ì‚¬ìš©í•˜ëŠ” í”¼ì³ í† ê¸€ ì„œë¹„ìŠ¤](https://tech.mfort.co.kr/blog/2022-11-24-feature-toggle/)\n- [# Feature Toggles (aka Feature Flags)](https://martinfowler.com/articles/feature-toggles.html)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null},"/notes/upload-python-library":{"title":"Python Project package PyPiì— ì˜¬ë¦¬ê¸°","content":"\n## pip ì„¤ì¹˜\n- Unix/mac OS\n```sh\npython3 -m pip install --upgrade pip\n```\n- windows\n```\npy -m pip install --upgrade pip\n```\n\n## Project ìƒì„±\nê°„ë‹¨í•œ í”„ë¡œì íŠ¸ `packaging_tutorial` ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì„±ìœ¼ë¡œ ì¤€ë¹„í•œë‹¤. \n```\npackaging_tutorial/ \nâ””â”€â”€ src/\n    â””â”€â”€ example_package_cheese/\n        â”œâ”€â”€ __init__.py\n        â””â”€â”€ example.py\n```\n- `example_package_cheese` : project ëª…ê³¼ ë™ì¼í•˜ê²Œ í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì„¤ì •ë„ ë” ê°„í¸í•˜ê³  íŒ¨í‚¤ì§€ì‚¬ìš©ì ì…ì¥ì—ì„œë„ êµ¬ë¶„í•˜ê¸° ì¢‹ë‹¤. \n- `__init__.py` : ë¹„ì–´ìˆëŠ” íŒŒì¼. directory ìì²´ë¥¼ packageë¡œ import í•˜ê¸° ìœ„í•´ í•„ìš”.\n- `example.py` : ì‹¤ì œ ë¡œì§ì´ ë‹´ê¸¸ íŒŒì¼. ì•„ë˜ì™€ ê°™ì´ ì‹¤ì œ ë¡œì§ì„ ì¶”ê°€í•´ì¤€ë‹¤. \n```pyhon\ndef add_one(number):\n    return number + 1\n```\n\n## Package Files ìƒì„±\n\n```\npackaging_tutorial/\nâ”œâ”€â”€ LICENSE\nâ”œâ”€â”€ pyproject.toml\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ src/\nâ”‚   â””â”€â”€ example_package_YOUR_USERNAME_HERE/\nâ”‚       â”œâ”€â”€ __init__.py\nâ”‚       â””â”€â”€ example.py\nâ””â”€â”€ tests/\n```\n- `pyproject.toml` : í”„ë¡œì íŠ¸ ë¹Œë“œ ì‹œìŠ¤í…œ ìš”êµ¬ ì‚¬í•­ê³¼ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” íŒŒì¼ \n\t- ë¹Œë“œíˆ´ë¡œëŠ” [Hatchling](https://packaging.python.org/en/latest/key_projects/#hatch), [setuptools](https://packaging.python.org/en/latest/key_projects/#setuptools), [Filt](https://packaging.python.org/en/latest/key_projects/#flit). [PDM](https://packaging.python.org/en/latest/key_projects/#pdm) ë“±ì´ ìˆìœ¼ë©° ì—¬ê¸°ì„œëŠ” Hatchlingìœ¼ë¡œ ì§„í–‰í•œë‹¤. \n```\n# Hatchlling\n[build-system]\nrequires = [\"hatchling\"]\nbuild-backend = \"hatchling.build\"\n\n# setuptools\n[build-system]\nrequires = [\"setuptools\u003e=61.0\"]\nbuild-backend = \"setuptools.build_meta\"\n\n# filt\n[build-system]\nrequires = [\"flit_core\u003e=3.4\"]\nbuild-backend = \"flit_core.buildapi\"\n```\n- `requires` : íŒ¨í‚¤ì§€ë¥¼ ë¹Œë“œí•˜ëŠ”ë° í•„ìš”í•œ íŒ¨í‚¤ì§€ ëª©ë¡. \n\t- pip ì™€ ê°™ì€ ë¹Œë“œ í”„ë¡ íŠ¸ì—”ë“œë“¤ì—ì„œ ìë™ìœ¼ë¡œ ê²©ë¦¬ëœ virtual enviromentì—ì„œ ì„ì‹œë¡œ ì„¤ì¹˜í•˜ì—¬ ë¹Œë“œì— ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— ë”°ë¡œ ì„¤ì¹˜í•  í•„ìš”ëŠ” ì—†ë‹¤. \n- `build-backend` : ë¹Œë“œ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë¹Œë“œí• ë•Œ ì‚¬ìš©í•˜ëŠ” Python ê°ì²´ëª…\n\n###  `pyproject.toml` ì— metadata ì‘ì„±í•˜ê¸° \n```toml\n[project]\nname = \"example_package_YOUR_USERNAME_HERE\"\nversion = \"0.0.1\"\nauthors = [\n  { name=\"Example Author\", email=\"author@example.com\" },\n]\ndescription = \"A small example package\"\nreadme = \"README.md\"\nrequires-python = \"\u003e=3.7\"\nclassifiers = [\n    \"Programming Language :: Python :: 3\",\n    \"License :: OSI Approved :: MIT License\",\n    \"Operating System :: OS Independent\",\n]\n\n[project.urls]\n\"Homepage\" = \"https://github.com/pypa/sampleproject\"\n\"Bug Tracker\" = \"https://github.com/pypa/sampleproject/issues\"\n```\n- `name` : íŒ¨í‚¤ì§€ì˜ ì´ë¦„. PyPIì— ì´ë¯¸ ì˜¬ë¼ì™€ ìˆëŠ” ì´ë¦„ê³¼ ê²¹ì¹  ìˆ˜ ì—†ë‹¤. \n- `version` : íŒ¨í‚¤ì§€ì˜ ë²„ì „.  [version spec](https://packaging.python.org/en/latest/specifications/version-specifiers/#version-specifiers)\n- `authors` : ì‘ì„±ì. `maintainers`ë„ ë™ì¼í•œ ëª¨ì–‘ìœ¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.\n- `readme` :  íŒ¨í‚¤ì§€ readme íŒŒì¼ path\n- `requires-python` : í•„ìš” python ë²„ì „ ëª…ì‹œ\n- `classifiers` : ì¶”ê°€ì ì¸ ë©”íƒ€ë°ì´í„°. í˜¸í™˜ python ë²„ì „, ë¼ì´ì„¼ìŠ¤, OS ë“±. [PyPi classifier ëª©ë¡](https://pypi.org/classifiers/)\n- `[project]` ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë” ë§ì€ ë©”íƒ€ë°ì´í„°ë“¤ì€ [project metadata specification](https://packaging.python.org/en/latest/specifications/declaring-project-metadata/#declaring-project-metadata) ì—ì„œ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. \n- ì´ì™¸ì—ë„ `keyword` ë¥¼ í†µí•´ ì‚¬ìš©ìë“¤ì´ ë” ì°¾ê¸° ì‰½ê²Œ í‚¤ì›Œë“œë¥¼ ë“±ë¡í•  ìˆ˜ë„ ìˆê³ , `dependencies`ë¥¼ ì´ìš©í•˜ì—¬ íŒ¨í‚¤ì§€ì— í•„ìš”í•œ dependeciesë“¤ë„ ê´€ë¦¬ í•  ìˆ˜ ìˆë‹¤. \n\n## \u0008íŒ¨í‚¤ì§€ ë¹Œë“œí•˜ê¸° \npip buildë¥¼ ìœ„í•˜ì—¬ PyPA build ì„¤ì¹˜ \n```\n# Unix/mac OS\npy -m pip install --upgrade build\n\n# Windows\npython3 -m pip install --upgrade build\n```\n\nìœ„ì— ì‘ì„±í•œ `pyproject.toml` íŒŒì¼ ìœ„ì¹˜ì—ì„œ ì•„ë˜ ì»¤ë§¨ë“œë¡œ ë¹Œë“œí•˜ê¸° \n```\n# Unix/mac OS\npython3 -m build\n\n# Windows\npy -m build\n```\n\në¹Œë“œí•˜ê³  ë‚˜ë©´ ì•„ë˜ì™€ ê°™ì´ `/dist` directoryê°€ ìƒì„±ëœë‹¤. \n```\ndist/\nâ”œâ”€â”€ example_package_YOUR_USERNAME_HERE-0.0.1-py3-none-any.whl\nâ””â”€â”€ example_package_YOUR_USERNAME_HERE-0.0.1.tar.gz\n```\n- `.tar.gz` : [source distribution](https://packaging.python.org/en/latest/glossary/#term-Source-Distribution-or-sdist)\n- `.whl` : [built distribution](https://packaging.python.org/en/latest/glossary/#term-Built-Distribution) \n- ìµœì‹  pipëŠ” `.whl` ë¡œ ìš°ì„ ì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì§€ë§Œ, í˜¸í™˜ì´ ì•ˆë˜ëŠ” ê²½ìš° `.tar.gz`ìœ¼ë¡œ \n\n## íŒ¨í‚¤ì§€ ì—…ë¡œë“œí•˜ê¸° \n- í…ŒìŠ¤íŠ¸ ì—…ë¡œë“œë¥¼ í•˜ê¸° ìœ„í•´ TestPyPI ê³„ì • ë§Œë“¤ê¸° \n\t- https://test.pypi.org/account/register/ (email verification ë°˜ë“œì‹œ í•„ìš”)\n\t- ë” ìì„¸í•œ ì‚¬í•­ì€ [Using TestPyPI](https://packaging.python.org/en/latest/guides/using-testpypi/) ë¥¼ ì°¸ê³ \n\t- ì—…ë¡œë“œë¥¼ ìœ„í•´ì„œ [API Token](https://test.pypi.org/help/#apitoken) ì„ ì‚¬ìš©í•˜ëŠ”ë° API tokenì€  [TestPyPI account](https://test.pypi.org/manage/account/#api-tokens) ì—ì„œ ìƒì„±í•  ìˆ˜ ìˆë‹¤. \n\nì—…ë¡œë“œ í•˜ê¸° ìœ„í•˜ì—¬ [twine](https://packaging.python.org/en/latest/key_projects/#twine) ì„ ë¨¼ì € ì„¤ì¹˜\n```\n# Unix/macOS\npython3 -m pip install --upgrade twine\n\n# Windows\npy -m pip install --upgrade twine\n```\n\ntwine ì´ìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ì—…ë¡œë“œ í•  ìˆ˜ ìˆë‹¤. \n```\n# Unix/macOS\npython3 -m twine upload --repository testpypi dist/*\n\n# Windows\npy -m twine upload --repository testpypi dist/*\n```\n\nì´ ê³¼ì •ì—ì„œ usernameê³¼ passwordë¥¼ ì…ë ¥í•˜ë„ë¡ ë˜ì–´ìˆëŠ”ë°, \n- username :  `__token__` \n- password : ìœ„ì—ì„œ ë°œê¸‰ë°›ì€ API Token(`pypi-blahblah`)ì„ ì…ë ¥ \nìœ„ ì—…ë¡œë“œê°€ ì„±ê³µí•˜ë©´ `https://test.pypi.org/project/example_package_YOUR_USERNAME_HERE`. ì—ì„œ ì˜¬ë¼ê°„ íŒ¨í‚¤ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. \n\u003e ì˜ˆì‹œ : https://test.pypi.org/project/cheese-package/0.1.0/\n\n## íŒ¨í‚¤ì§€ ì„¤ì¹˜í•˜ê¸° \n```\n# Unix/macOS\npython3 -m pip install --index-url https://test.pypi.org/simple/ --no-deps example-package-YOUR-USERNAME-HERE\n\n# Windows\npy -m pip install --index-url https://test.pypi.org/simple/ --no-deps example-package-YOUR-USERNAME-HERE\n```\n- `--index-url` :  ë¼ì´ë¸Œ ë˜ê³  ìˆëŠ” PyPI ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì•„ë‹Œ TestPyPIì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜ì‹œ ì‚¬ìš©\n- `--no-deps` : ë§Œì•½ ë™ì¼í•œ ì´ë¦„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¼ì´ë¸Œ PyPIì— ìˆëŠ” ê²½ìš°, dependency ì„¤ì¹˜ì— ì‹¤íŒ¨í•˜ê±°ë‚˜ ì˜ˆìƒì¹˜ ëª»í•œ ë‹¤ë¥¸ dependecyê°€ ê¹”ë¦´ ìˆ˜ ìˆìœ¼ë¯€ë¡œ. \n\n```py\nfrom example_package_YOUR_USERNAME_HERE import example\n\nexample.add_one(2)\n```\n\n## pypi.org ì— ì—…ë¡œë“œí•˜ê¸° \n\n- [https://pypi.org] ê³„ì •ë§Œë“¤ê¸°\n- `twine upload dist/*` ë¡œ ì—…ë¡œë“œí•˜ê¸° (ì´ë•Œ, ë¼ì´ë¸Œ PyPIë¡œ ì˜¬ë¦¬ëŠ”ê±°ë‹ˆ `--repository` ë”°ë¡œ ëª…ì‹œ í•„ìš” ì—†ìŒ) \n- íŒ¨í‚¤ì§€ ì„¤ì¹˜ì‹œì—ëŠ” `python -m pip install [your-package]` ë¡œ ì„¤ì¹˜\n\n## References \n- [Packaging Python Projects](https://packaging.python.org/en/latest/tutorials/packaging-projects/)\n- [circleci blog - Publishing a Python package](https://circleci.com/blog/publishing-a-python-package/?utm_source=google\u0026utm_medium=sem\u0026utm_campaign=sem-google-dg--japac-en-dsa-tROAS-auth-brand\u0026utm_term=g_-_c__dsa_\u0026utm_content=\u0026gclid=Cj0KCQiA9YugBhCZARIsAACXxeJChlMZzUeuiklpIknQj03iGqmlmwy4dj2MJIZ0xvahOHsyn1TB0wUaApS3EALw_wcB)","lastmodified":"2023-10-02T05:51:50.819458938Z","tags":null}}